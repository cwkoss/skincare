<!DOCTYPE html>
<html>
<head>
    <title>Skincare Formulation</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
<style>
    .small-text {
        font-size: 0.8em; /* Example size, adjust as needed */
        color: #666; /* Example color, adjust as needed */
    }
</style>

</head>
<body>
    <h2>Skincare Formulation</h2>

<table id="skincareTable" class="table">
    <thead>
        <tr>
            <th>Ingredient</th>
            <th>Parts</th>
            <th>Percentage</th>
            <th>Comedogenic</th>
	    <th>Viscosity</th>
        </tr>
    </thead>
    <tbody>
        <!-- Dynamic rows will be added here in the <tbody> section -->
    </tbody>
</table>
    <form id="skincareForm">
        <button type="button" onclick="addIngredient()">Add Ingredient</button>
        <button type="submit">Submit Formulation</button>
    </form>

<p id="overallComedogenicRating">Overall Comedogenic Rating: </p>
<p class="small-text">
    The comedogenic rating indicates how likely an ingredient is to clog pores. A lower rating (closer to 0) suggests that the ingredient is less likely to clog pores, while a higher rating (closer to 5) suggests a higher likelihood. This rating is crucial for individuals with acne-prone skin.
</p>
<p id="overallViscosityRating">Overall Viscosity Rating: </p>
<p class="small-text">
    The viscosity rating reflects the thickness or fluidity of the final product. Lower viscosity values indicate a more fluid, water-like consistency, while higher values indicate a thicker, more solid consistency like that of butters or waxes. This helps in understanding the texture and spreadability of the skincare product.
</p>
<p id="productConsistency">Product Consistency: </p>

    	<script>
const ingredients = {
    "Coconut oil": { phase: "oil", comedogenic: 4, viscosity: 5 },
    "Argan oil": { phase: "oil", comedogenic: 0, viscosity: 3 },
    "Sunflower oil": { phase: "oil", comedogenic: 2, viscosity: 3 },
    "Distilled water": { phase: "aqueous", comedogenic: 0, viscosity: 1 },
    "Salt water": { phase: "aqueous", comedogenic: -1, viscosity: 1.5 },
    "Beeswax": { phase: "emulsifier", comedogenic: 2, viscosity: 10 },
    "Cocoa butter": { phase: "emulsifier", comedogenic: 4, viscosity: 8 }
};

let selectedIngredients = [];

document.addEventListener('DOMContentLoaded', function() {
    addIngredient();
    document.getElementById('skincareForm').addEventListener('change', updateTable);
    document.getElementById('skincareForm').addEventListener('submit', handleSubmit);
});

function addIngredient() {
    const tableBody = document.getElementById('skincareTable').querySelector('tbody');
    const newRow = document.createElement('tr');
    newRow.innerHTML = `
        <td>
            <select name="ingredient" onchange="updateSelectedIngredients(this)">
                <option value="">Select an ingredient</option>
                ${Object.keys(ingredients).filter(ingredient => !selectedIngredients.includes(ingredient))
                    .map(ingredient => `<option value="${ingredient}">${ingredient}</option>`).join('')}
            </select>
        </td>
        <td><input type="number" name="parts" min="1" placeholder="Parts" oninput="updateTable()"></td>
        <td></td><td></td><td></td>
    `;
    tableBody.appendChild(newRow);
    updateTable();
}

function updateSelectedIngredients(selectElement) {
    selectedIngredients = Array.from(document.querySelectorAll('#skincareForm select[name="ingredient"]'))
                              .map(select => select.value)
                              .filter(value => value);
}

function getProductConsistency(viscosityRating) {
    if (viscosityRating >= 1 && viscosityRating <= 2) {
        return "Liquid";
    } else if (viscosityRating <= 4) {
        return "Lotion";
    } else if (viscosityRating <= 6) {
        return "Cream";
    } else if (viscosityRating <= 8) {
        return "Butter";
    } else {
        return "Wax";
    }
}

function updateTable() {
    const tableBody = document.getElementById('skincareTable').querySelector('tbody');
    let totalParts = 0;
    let totalComedogenic = 0;
    let totalViscosity = 0;

    // Sum up the total parts, comedogenic, and viscosity values
    Array.from(tableBody.rows).forEach(row => {
        const select = row.querySelector('select[name="ingredient"]');
        const input = row.querySelector('input[name="parts"]');

        const ingredient = select.value;
        const parts = parseInt(input.value) || 0;

        if (ingredient && parts > 0) {
            const comedogenic = ingredients[ingredient].comedogenic;
            const viscosity = ingredients[ingredient].viscosity;

            totalParts += parts;
            totalComedogenic += parts * comedogenic;
            totalViscosity += parts * viscosity;
        }
    });

    // Update the percentages, comedogenic, and viscosity for each ingredient
    Array.from(tableBody.rows).forEach(row => {
        const select = row.querySelector('select[name="ingredient"]');
        const input = row.querySelector('input[name="parts"]');
        const ingredient = select.value;
        const parts = parseInt(input.value) || 0;

        if (ingredient && parts > 0) {
            const percentage = ((parts / totalParts) * 100).toFixed(2);
            const comedogenic = ingredients[ingredient].comedogenic;
            const viscosity = ingredients[ingredient].viscosity;

            row.cells[2].innerText = `${percentage}%`;
            row.cells[3].innerText = comedogenic;
            row.cells[4].innerText = viscosity;
        }
    });

    const overallComedogenicRating = totalParts ? (totalComedogenic / totalParts).toFixed(2) : 0;
    const overallViscosityRating = totalParts ? (totalViscosity / totalParts).toFixed(2) : 0;
    const productConsistency = getProductConsistency(overallViscosityRating);

    document.getElementById('overallComedogenicRating').innerText = `Overall Comedogenic Rating: ${overallComedogenicRating}`;
    document.getElementById('overallViscosityRating').innerText = `Overall Viscosity Rating: ${overallViscosityRating}`;
    document.getElementById('productConsistency').innerText = `Product Consistency: ${productConsistency}`;
}







function handleSubmit(e) {
    e.preventDefault();
    // Your form submission logic
}

	</script>

    <!-- Bootstrap JS and its dependencies -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</body>
</html>


