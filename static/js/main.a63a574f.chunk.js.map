{"version":3,"sources":["firebase-config.js","sessionUtils.js","Goals.js","ingredients.js","Product.js","Summary.js","RecipeBuilder.js","FinalizeRecipe.js","SavedRecipe.js","OrderFormulation.js","OrderSuccess.js","Contact.js","OrderPricing.js","VariationSelection.js","OrderSurvey.js","App.js","reportWebVitals.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","getCookie","name","nameEQ","ca","document","cookie","split","i","length","c","charAt","substring","indexOf","pushFirstPageLoadInfo","async","sessionId","sessionRef","doc","updateDoc","lastDateTime","Date","console","log","error","userAgent","navigator","innerWidth","width","innerHeight","height","window","docRef","addDoc","collection","firstDatetime","resolution","concat","id","setCookie","value","expires","date","setTime","getTime","toUTCString","updateSession","updatedData","newData","Goals","_ref","productData","setGoalsData","setSelectedMoodsApp","setIncludeFragranceApp","navigate","useNavigate","selectedOptions","setSelectedOptions","useState","includeFragrance","setIncludeFragrance","selectedMoods","setSelectedMoods","skincareGoals","isMoodSelected","mood","includes","React","createElement","className","onSubmit","e","preventDefault","then","map","goal","index","key","type","onClick","option","newSelectedOptions","filter","item","toggleOption","newSelectedMoods","toggleMood","disabled","ingredients","phase","hlb","description","good_for","bad_for","cost","density","cost_per_g","buy_again_url","endogenous","max_percent","default_percent","deprecated","densitY","getAqueousIngredients","aqueousIngredients","Object","entries","forEach","ingredient","push","skincareProducts","bannedIngredients","mustIncludeIngredients","Product","_ref2","setProductData","selectedProduct","setSelectedProduct","_ref3","toUpperCase","slice","loadingMessages","Summary","goalsData","loading","setLoading","currentMessage","setCurrentMessage","formatIngredientsList","formattedString","keys","array","hasOwnProperty","useEffect","interval","setInterval","prevMessage","nextIndex","clearInterval","Fragment","handleAIClick","goals","join","productType","fragranceSentence","data","text","fetch","method","headers","body","JSON","stringify","response","json","recipeResponse","reply","choices","message","content","parsedResponse","parse","aiRecipeResponse","state","recipe","catch","handleManualClick","RecipeBuilder","_location$state","selectedIngredients","setSelectedIngredients","ingredientProportions","setIngredientProportions","currentStep","setCurrentStep","recipeCommentary","setRecipeCommentary","shelfLifeEstimate","setShelfLifeEstimate","productName","reduce","acc","initialRecipe","useLocation","goToProportionAdjustment","redistributeProportions","adjustedIngredient","adjustedValue","remainingProportion","isAdditive","nonAdditiveIngredients","newProportions","totalCurrentNonAdditive","scaleFactor","adjustedProportion","temporaryInputs","setTemporaryInputs","ingredientName","roundProportions","roundedTotal","Math","round","discrepancy","nonAdditiveKeys","adjustmentPerIngredient","negativeSum","positiveKeys","positiveAdjustment","abs","finalTotal","values","val","excess","excessAdjustment","handleMouseUp","setTimeout","headerWithButtonStyle","display","justifyContent","alignItems","marginBottom","prevProportions","totalPercentage","totalPercentageStyle","color","ingredientsFromResponse","selectedIngredientsFromResponse","style","details","handleIngredientSelect","goBackToSelectIngredients","toFixed","borderCollapse","_temporaryInputs$name","colSpan","position","onChange","handleAdditiveChange","newValue","parseFloat","maxPercent","isNaN","match","boundedValue","target","onBlur","handleAdditiveBlur","borderColor","right","top","min","max","step","handleSliderChange","onMouseUp","onTouchEnd","getRecipeAdvice","finalizeRecipe","commentary","FinalizeRecipe","_location$state2","recipeName","setRecipeName","location","isRecipeNameValid","trim","placeholder","handleChangeIngredients","handleChangeProportions","recipeId","toLowerCase","replace","setDoc","createdAt","SavedRecipe","recipeData","setRecipeData","shareButtonText","setShareButtonText","paramRecipeId","URLSearchParams","search","get","docSnap","getDoc","exists","fetchData","handleShareRecipe","currentUrl","href","shareUrl","clipboard","writeText","handleOrderFormulation","OrderFormulation","setName","phoneNumber","setPhoneNumber","inSeattleArea","setInSeattleArea","pickup","setPickup","address","setAddress","street1","street2","zip","note","setNote","userLocation","setUserLocation","hasError","setHasError","orderId","waitlist","readOnly","OrderSuccess","Link","to","Contact","setMessage","isSubmitted","setIsSubmitted","OrderPricing","targetGrams","setTargetGrams","ingredientList","setIngredientList","totalGrams","sum","grams","totalCost","totalParts","part","searchParams","calculateIngredients","useCallback","newIngredientList","parts","ingredientGrams","VariationSelection","variations","setVariations","selectedVariations","setSelectedVariations","Set","isLoading","setIsLoading","getFormatedIngredientsList","ok","Error","fetchVariations","handleSelectionChange","variationIndex","newSelection","has","delete","add","variation","cursor","tagline","handleSubmit","size","OrderSurvey","currentSectionIndex","setCurrentSectionIndex","currentSection","surveyData","responses","setResponses","docId","setDocId","now","startTime","pushEmptyResponse","handleInputChange","questionId","flexDirection","margin","textAlign","section","questions","question","inputValue","options","checked","shouldAddLineBreak","Array","scale","number","parseInt","renderInput","lastTime","updateResponses","marginTop","App","Router","Routes","Route","path","element","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","src","alt","fragrance","moods","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render","StrictMode"],"mappings":"knIAGA,MASMA,EAAMC,YATW,CACnBC,OAAQ,0CACRC,WAAY,uCACZC,UAAW,uBACXC,cAAe,mCACfC,kBAAmB,gBACnBC,MAAO,+CAILC,EAAKC,YAAaT,GCTXU,EAAaC,IACxB,MAAMC,EAASD,EAAO,IAChBE,EAAKC,SAASC,OAAOC,MAAM,KACjC,IAAI,IAAIC,EAAE,EAAGA,EAAIJ,EAAGK,OAAQD,IAAK,CAC/B,IAAIE,EAAIN,EAAGI,GACX,KAAuB,MAAhBE,EAAEC,OAAO,IAAYD,EAAIA,EAAEE,UAAU,GAC5C,GAA0B,IAAtBF,EAAEG,QAAQV,GAAe,OAAOO,EAAEE,UAAUT,EAAOM,OAAQC,EAAED,QAEnE,OAAO,MAWIK,EAAwBC,UACjC,MAAMC,EAAYf,EAAU,aAE5B,GAAKe,EAqBH,IACE,MAAMC,EAAaC,YAAInB,EAAI,WAAYiB,SACjCG,YAAUF,EAAY,CAC1BG,aAAc,IAAIC,OAEpBC,QAAQC,IAAI,6CACZ,MAAOC,GACPF,QAAQE,MAAM,4BAA6BA,OA5B/B,CAEd,MAAMC,EAAYC,UAAUD,WACpBE,WAAYC,EAAOC,YAAaC,GAAWC,OAEnD,IACE,MAAMC,QAAeC,YAAOC,YAAWnC,EAAI,YAAa,CACtDoC,cAAe,IAAId,KACnBD,aAAc,IAAIC,KAClBI,UAAWA,EACXW,WAAW,GAADC,OAAKT,EAAK,KAAAS,OAAIP,KAE1BR,QAAQC,IAAI,4CAA6CS,EAAOM,IAvB/CC,EAACrC,EAAMsC,KAC5B,IAAIC,EAAU,GACd,MAAMC,EAAO,IAAIrB,KACjBqB,EAAKC,QAAQD,EAAKE,UAAa,SAC/BH,EAAU,aAAeC,EAAKG,cAC9BxC,SAASC,OAASJ,EAAO,KAAOsC,GAAS,IAAOC,EAAU,YAqBtDF,CAAU,YAAaP,EAAOM,IAC9B,MAAOd,GACPF,QAAQE,MAAM,0BAA2BA,MAiBpCsB,EAAgB/B,UAC3B,MAAMC,EAAYf,EAAU,aAC5B,IAAKe,EAEH,YADAM,QAAQE,MAAM,gCAIhB,MAAMuB,EAAc,IAAKC,EAAS5B,aAAc,IAAIC,MAEpD,IACE,MAAMJ,EAAaC,YAAInB,EAAI,WAAYiB,SACjCG,YAAUF,EAAY8B,GAC5BzB,QAAQC,IAAI,gCACZ,MAAOC,GACPF,QAAQE,MAAM,2BAA4BA,KC4D/ByB,MAjIf,SAAcC,GAA8E,IAA7E,YAAEC,EAAW,aAAEC,EAAY,oBAAEC,EAAmB,uBAAEC,GAAwBJ,EACvF,MAAMK,EAAWC,eACVC,EAAiBC,GAAsBC,mBAAS,KAChDC,EAAkBC,GAAuBF,mBAAS,OAClDG,EAAeC,GAAoBJ,mBAAS,IAEnD,IAAIK,EAAgB,GAGlBA,EADkB,uBAAhBb,EACc,CAAC,YAAa,cAAe,aAAc,iBAClC,2CAAhBA,EACO,CAAC,WAAY,iBAAkB,iBAAkB,iBAAkB,gBAAiB,SAAU,sBAE9F,CACd,aAAc,WAAY,iBAAkB,WAC5C,YAAa,UAAW,iBAAkB,qBAAsB,cAChE,UAqBJ,MAwBMc,EAAkBC,GACfJ,EAAcK,SAASD,GAsBhC,OACEE,IAAAC,cAAA,OAAKC,UAAU,kBACbF,IAAAC,cAAA,UAAI,uCACJD,IAAAC,cAAA,QAAME,SAtBYC,IACpBA,EAAEC,iBASF3B,EAPoB,CAClBW,kBACAG,mBACAE,kBAIyBY,KAAK,KAC9BtB,EAAaK,GACbJ,EAAoBS,GACpBR,EAAuBM,GACvBL,EAAS,gBASNS,EAAcW,IAAI,CAACC,EAAMC,KACxBT,WAAAC,cAAA,UACES,IAAKD,EACLE,KAAK,SACLC,QAASA,IAnDGC,KACpB,MAAMC,EAAqBzB,EAAgBU,SAASc,GAChDxB,EAAgB0B,OAAOC,GAAQA,IAASH,GACxC,IAAIxB,EAAiBwB,GAEzBvB,EAAmBwB,IA8CIG,CAAaT,GAC5BN,UAAS,gBAAAjC,QA5CO4C,EA4C4BL,EA3C7CnB,EAAgBU,SAASc,GA2C4B,WAAa,MAEhEL,GA9CeK,QAmDpBb,IAAAC,cAAA,WACED,IAAAC,cAAA,UAAI,+BACJD,IAAAC,cAAA,UAAQU,KAAK,SAASC,QAASA,IAAMnB,EAAoB,OAAQS,UAAS,gBAAAjC,OAAuC,QAArBuB,EAA6B,WAAa,KAAM,OAC5IQ,IAAAC,cAAA,UAAQU,KAAK,SAASC,QAASA,IAAMnB,EAAoB,MAAOS,UAAS,gBAAAjC,OAAuC,OAArBuB,EAA4B,WAAa,KAAM,OAItH,QAArBA,GACCQ,IAAAC,cAAA,WACED,IAAAC,cAAA,UAAI,mDAxEA,CACZ,QAAS,WAAY,cAAe,WAAY,UAAW,YAAa,YAAa,cAAe,aAwErFM,IAAI,CAACT,EAAMW,IAChBT,IAAAC,cAAA,UACES,IAAKD,EACLE,KAAK,SACLC,QAASA,IA7DHd,KAClB,MAAMoB,EAAmBxB,EAAcK,SAASD,GAC5CJ,EAAcqB,OAAOC,GAAQA,IAASlB,GACtC,IAAIJ,EAAeI,GAEvBH,EAAiBuB,IAwDUC,CAAWrB,GAC1BI,UAAS,gBAAAjC,OAAkB4B,EAAeC,GAAQ,WAAa,KAE9DA,KAMTE,IAAAC,cAAA,UAAQC,UAAU,SAASS,KAAK,SAASS,SAAqC,IAA3B/B,EAAgBhD,QAAsC,QAArBmD,GAAuD,IAAzBE,EAAcrD,QAAe,WC9HvJ,MAAMgF,EAAc,CAChB,gBAAiB,CACbC,MAAO,MACPC,IAAK,EACLC,YAAa,gFACbC,SAAU,CAAC,iBAAkB,YAC7BC,QAAS,GACTC,KAAM,kBACNC,QAAS,IACTC,WAAY,QAEhB,aAAc,CACVP,MAAO,MACPC,IAAK,EACLC,YAAa,8FACbC,SAAU,CAAC,aAAc,WAAY,kBACrCC,QAAS,GACTC,KAAM,YACNC,QAAS,IACTC,WAAY,OAEhB,YAAa,CACTP,MAAO,MACPC,IAAK,GACLC,YAAa,6HACbC,SAAU,CAAC,qBAAsB,WAAY,YAC7CC,QAAS,GACTC,KAAM,cACNC,QAAS,IACTC,WAAY,MACZC,cAAc,2GAElB,cAAe,CACXR,MAAO,MACPC,IAAK,EACLC,YAAa,6FACbC,SAAU,CAAC,WAAY,qBACvBC,QAAS,CAAC,cACVC,KAAM,aACNC,QAAS,KACTC,WAAY,OAEhB,eAAgB,CACZP,MAAO,MACPC,IAAK,EACLC,YAAa,4GACbC,SAAU,CAAC,WAAY,YACvBC,QAAS,CAAC,cACVC,KAAM,QACNE,WAAY,MACZC,cAAe,oHAEnB,cAAe,CACXR,MAAO,MACPC,IAAK,EACLC,YAAa,+GACbC,SAAU,CAAC,YACXC,QAAS,CAAC,cACVC,KAAM,aACNC,QAAS,KACTC,WAAY,MAEhB,YAAa,CACTP,MAAO,MACPC,IAAK,EACLC,YAAa,0FACbC,SAAU,CAAC,YACXC,QAAS,GACTC,KAAM,UACNC,QAAS,IACTC,WAAY,OAEhB,mBAAoB,CAChBP,MAAO,MACPC,IAAK,EACLC,YAAa,0FACbC,SAAU,CAAC,aAAc,kBACzBC,QAAS,GACTC,KAAM,SACNC,QAAS,IACTC,WAAY,OAgBhB,YAAa,CACTP,MAAO,MACPC,IAAK,EACLC,YAAa,iIACbC,SAAU,CAAC,YACXC,QAAS,CAAC,cACVC,KAAM,cACNC,QAAS,GACTC,WAAY,OAShB,kBAAmB,CACfP,MAAO,UACPC,IAAK,GACLC,YAAa,+DACbC,SAAU,GACVC,QAAS,GACTG,WAAY,KACZE,YAAY,GAEhB,YAAa,CACTT,MAAO,UACPC,IAAK,GACLC,YAAa,6HACbC,SAAU,CAAC,UAAW,YAAa,kBACnCC,QAAS,GACTG,WAAY,MAEhB,WAAY,CACRP,MAAO,UACPC,IAAK,GACLC,YAAa,6FACbC,SAAU,CAAC,cAAe,qBAC1BC,QAAS,CAAC,aAEd,gBAAiB,CACbJ,MAAO,UACPC,IAAK,GACLC,YAAa,2FACbC,SAAU,CAAC,iBAAkB,iBAAkB,WAC/CC,QAAS,GACTC,KAAM,aACNC,QAAS,IACTC,WAAY,QAEhB,SAAY,CACRP,MAAO,UACPC,IAAK,GACLC,YAAa,iGACbC,SAAU,CAAC,YACXC,QAAS,GACTC,KAAM,WACNC,QAAS,KACTC,WAAY,MACZE,YAAY,GAEhB,MAAS,CACLT,MAAO,UACPC,IAAK,GACLC,YAAa,mGACbC,SAAU,CAAC,WAAY,cACvBC,QAAS,IAEb,sBAAuB,CACnBJ,MAAO,UACPC,IAAK,GACLC,YAAa,yFACbC,SAAU,CAAC,aAAc,eACzBC,QAAS,CAAC,aAEd,iBAAkB,CACdJ,MAAO,UACPC,IAAK,GACLC,YAAa,sGACbC,SAAU,CAAC,YAAa,kBACxBC,QAAS,IAEb,WAAY,CACRJ,MAAO,UACPC,IAAK,GACLC,YAAa,+HACbC,SAAU,CAAC,WAAY,kBACvBC,QAAS,GACTG,WAAY,MAEhB,QAAW,CACPP,MAAO,aACPC,IAAK,GACLC,YAAa,0GACbC,SAAU,CAAC,YACXC,QAAS,GACTG,WAAY,OAEhB,SAAY,CACRP,MAAO,aACPC,IAAK,EACLC,YAAa,gFACbC,SAAU,GACVC,QAAS,GACTG,WAAY,MACZE,YAAY,GAEhB,mBAAoB,CAChBT,MAAO,aACPC,IAAK,GACLC,YAAa,0IACbC,SAAU,GACVC,QAAS,CAAC,kBACVG,WAAY,OAEhB,gBAAiB,CACbP,MAAO,aACPC,IAAK,GACLC,YAAa,6FACbC,SAAU,CAAC,kBACXC,QAAS,GACTE,QAAS,KACTC,WAAY,OAEhB,aAAc,CACVP,MAAO,WACPC,IAAK,GACLS,YAAa,GACbC,gBAAiB,GACjBT,YAAa,iHACbC,SAAU,CAAC,kBACXC,QAAS,GACTG,WAAY,OAEhB,kBAAmB,CACfP,MAAO,WACPC,IAAK,GACLS,YAAa,EACbC,gBAAiB,GACjBT,YAAa,oIACbC,SAAU,CAAC,WAAY,WAAY,sBACnCC,QAAS,GACTG,WAAY,MACZE,YAAY,GAEhB,QAAW,CACPT,MAAO,WACPC,IAAK,EACLS,YAAa,EACbC,gBAAiB,GACjBT,YAAa,8UACbC,SAAU,CAAC,WAAY,sBACvBC,QAAS,CAAC,kBACVG,WAAY,MACZK,YAAY,GAEhB,oBAAqB,CACjBZ,MAAO,WACPC,IAAK,EACLS,YAAa,EACbC,gBAAiB,GACjBT,YAAa,2VACbC,SAAU,CAAC,WAAY,sBACvBC,QAAS,CAAC,kBACVG,WAAY,MACZE,YAAY,GAEhB,YAAa,CACTT,MAAO,WACPC,IAAK,GACLS,YAAa,GACbC,gBAAiB,EACjBT,YAAa,0HACbC,SAAU,CAAC,qBAAsB,kBACjCC,QAAS,GACTG,WAAY,MACZE,YAAY,GAEhB,YAAa,CACTT,MAAO,WACPC,IAAK,EACLS,YAAa,EACbC,gBAAiB,GACjBT,YAAa,2HACbC,SAAU,CAAC,iBAAkB,sBAC7BC,QAAS,GACTE,QAAS,IACTC,WAAY,MACZE,YAAY,GAEhB,2BAA4B,CACxBT,MAAO,WACPC,IAAK,GACLS,YAAa,EACbC,gBAAiB,EACjBT,YAAa,uGACbC,SAAU,CAAC,cAAe,WAAY,WACtCC,QAAS,GACTG,WAAY,MACZE,YAAY,GAEhB,eAAgB,CACZT,MAAO,WACPC,IAAK,EACLS,YAAa,EACbC,gBAAiB,GACjBT,YAAa,kHACbC,SAAU,CAAC,iBAAkB,WAC7BC,QAAS,GACTE,QAAS,KACTC,WAAY,QAEhB,eAAgB,CACZP,MAAO,WACPC,IAAK,EACLS,YAAa,EACbC,gBAAiB,EACjBT,YAAa,6IACbC,SAAU,CAAC,sBACXC,QAAS,CAAC,kBACVE,QAAS,KACTC,WAAY,OAEhB,eAAgB,CACZP,MAAO,WACPC,IAAK,EACLS,YAAa,EACbC,gBAAiB,EACjBT,YAAa,iGACbC,SAAU,CAAC,cACXC,QAAS,CAAC,YACVE,QAAS,KACTC,WAAY,OAEhB,cAAe,CACXP,MAAO,WACPC,IAAK,EACLS,YAAa,EACbC,gBAAiB,GACjBT,YAAa,+EACbC,SAAU,CAAC,YACXC,QAAS,GACTE,QAAS,KACTC,WAAY,QAEhB,iBAAkB,CACdP,MAAO,WACPC,IAAK,EACLS,YAAa,EACbC,gBAAiB,EACjBT,YAAa,mFACbC,SAAU,CAAC,cACXC,QAAS,CAAC,iBAAkB,YAC5BS,QAAS,KACTN,WAAY,MAEhB,iBAAkB,CACdP,MAAO,WACPC,IAAK,EACLS,YAAa,EACbC,gBAAiB,GACjBT,YAAa,mJACbC,SAAU,CAAC,aAAc,aACzBC,QAAS,CAAC,iBAAkB,WAC5BE,QAAS,KACTC,WAAY,OAEhB,WAAY,CACRP,MAAO,WACPC,IAAK,EACLS,YAAa,EACbC,gBAAiB,GACjBT,YAAa,yNACbC,SAAU,CAAC,oBAAqB,cAChCC,QAAS,CAAC,kBACVG,WAAY,OAEhB,YAAa,CACTP,MAAO,WACPC,IAAK,EACLS,YAAa,EACbC,gBAAiB,GACjBT,YAAa,oOACbC,SAAU,CAAC,aAAc,qBACzBC,QAAS,CAAC,kBACVE,QAAS,KACTC,WAAY,QAEhB,mBAAoB,CAChBP,MAAO,MACPC,IAAK,EACLS,YAAa,GACbC,gBAAiB,EACjBT,YAAa,wPACbC,SAAU,CAAC,WAAY,WAAY,iBAAkB,sBACrDC,QAAS,GACTE,QAAS,IACTC,WAAY,OAGhB,eAAgB,CACZP,MAAO,WACPC,IAAK,EACLS,YAAa,EACbC,gBAAiB,GACjBT,YAAa,uOACbC,SAAU,CAAC,aAAc,cAAe,YACxCC,QAAS,CAAC,kBACVE,QAAS,KACTC,WAAY,QAGhB,kBAAmB,CACfP,MAAO,WACPC,IAAK,EACLS,YAAa,EACbC,gBAAiB,EACjBT,YAAa,+PACbC,SAAU,CAAC,qBAAsB,iBAAkB,YACnDC,QAAS,CAAC,kBACVE,QAAS,IACTC,WAAY,QAiEhB,0CAA2C,CACvCP,MAAO,UACPC,IAAK,GACLS,YAAa,GACbC,gBAAiB,EACjBT,YAAa,qNACbC,SAAU,CAAC,oBAAqB,WAAY,WAC5CC,QAAS,CAAC,oBAiDHL,QCxhBf,MAAMe,EAAwBA,KAC1B,MAAMC,EAAqB,GAM3B,OALAC,OAAOC,QAAQlB,GAAamB,QAAQ1D,IAAwB,IAAtB4B,EAAK+B,GAAW3D,EAC9C2D,EAAWlB,IAAM,IACjBc,EAAmBK,KAAKhC,KAGzB2B,GAGEM,EAAmB,CAC5B,2CAA4C,CACxCnB,YAAa,wNACboB,kBAAmB,CAAC,qBACpBC,uBAAwB,CAAC,eAE7B,yCAA0C,CACtCrB,YAAa,qLACboB,kBAAmB,CAAC,qBACpBC,uBAAwB,IAE5B,qCAAsC,CAClCrB,YAAa,+HACboB,kBAAmB,GACnBC,uBAAwB,IAE5B,yCAA0C,CACtCrB,YAAa,qPACboB,kBAAmB,GACnBC,uBAAwB,IAE5B,WAAY,CACRrB,YAAa,iMACboB,kBAAmBR,IACnBS,uBAAwB,IAE5B,qBAAsB,CAClBrB,YAAa,6MACboB,kBAAmBR,IACnBS,uBAAwB,KAwEjBC,MApEf,SAAgBC,GAAsB,IAArB,eAAEC,GAAgBD,EAC/B,MAAM5D,EAAWC,eACV6D,EAAiBC,GAAsB3D,mBAAS,IAEjD8C,EAAqBD,IA0C3B,OApCAlF,QAAQC,IAAIkF,GAqCRrC,IAAAC,cAAA,OAAKC,UAAU,oCACXF,IAAAC,cAAA,UAAI,kCACJD,IAAAC,cAAA,QAAME,SAZQC,IAClBA,EAAEC,iBACF2C,EAAeC,GAEfvE,EAAc,CAAEuE,oBAAmB3C,KAAK,KACpCnB,EAAS,aAOqBe,UAAU,sBACnCoC,OAAOC,QAAQI,GAAkBpC,IAAI4C,IAAA,IAAEzC,EAAKtC,GAAM+E,EAAA,OAC/CnD,IAAAC,cAAA,OAAKS,IAAKA,GACNV,IAAAC,cAAA,UAAQU,KAAK,SAASC,QAASA,KAlB/CsC,EAkBqExC,IACjDR,UAAW+C,IAAoBvC,EAAM,WAAa,IACjDA,EAAInE,OAAO,GAAG6G,cAAgB1C,EAAI2C,MAAM,IAE7CrD,IAAAC,cAAA,KAAGC,UAAW+C,IAAoBvC,EAAM,WAAa,IAChDtC,EAAMoD,gBAInBxB,IAAAC,cAAA,OAAKC,UAAU,kBACfF,IAAAC,cAAA,UAAQC,UAAU,SAASS,KAAK,SAASS,UAAW6B,GAAiB,WCzGrF,MAAMK,EAAkB,CACtB,sCACA,oEACA,oDACA,mCACA,6CACA,sDAkJaC,MA/If,SAAgBzE,GAA+D,IAA9D,UAAE0E,EAAS,YAAEzE,EAAW,iBAAES,EAAgB,cAAEE,GAAeZ,EAC1E,MAAMK,EAAWC,eACVqE,EAASC,GAAcnE,oBAAS,IAChCoE,EAAgBC,GAAqBrE,mBAAS+D,EAAgB,IAoErE,SAASO,EAAsBxC,GAC7B,IAAIyC,EAAkB,GA2BtB,OAzBAxB,OAAOyB,KAAK1C,GAAamB,QAAQ,CAAC9B,EAAKD,EAAOuD,KAC5CF,GAAmBpD,GAEfW,EAAYX,GAAKuD,eAAe,oBAAsB5C,EAAYX,GAAKuD,eAAe,kBACxFH,GAAmB,KAEfzC,EAAYX,GAAKuD,eAAe,qBAClCH,GAAe,YAAA7F,OAAgBoD,EAAYX,GAAKuB,iBAC5CZ,EAAYX,GAAKuD,eAAe,iBAClCH,GAAmB,OAInBzC,EAAYX,GAAKuD,eAAe,iBAClCH,GAAe,QAAA7F,OAAYoD,EAAYX,GAAKsB,cAG9C8B,GAAmB,KAGjBrD,EAAQuD,EAAM3H,OAAS,IACzByH,GAAmB,QAIhBA,EAGT,OAjDAI,oBAAU,KACR,GAAIT,EAAS,CACT,MAAMU,EAAWC,YAAY,KACzBR,EAAkBS,IACd,MACMC,GADQhB,EAAgB7G,QAAQ4H,GACX,GAAKf,EAAgBjH,OAChD,OAAOiH,EAAgBgB,MAE5B,KAEH,MAAO,IAAMC,cAAcJ,KAE9B,CAACV,IAsCFzD,IAAAC,cAAA,OAAKC,UAAU,kBACbF,IAAAC,cAAA,UAAI,mBACJD,IAAAC,cAAA,UAAI,4BACJD,IAAAC,cAAA,UACGuD,EAAUjD,IAAI,CAACS,EAAMP,IACpBT,IAAAC,cAAA,MAAIS,IAAKD,GAAQO,KAIrBhB,IAAAC,cAAA,UAAI,8BACJD,IAAAC,cAAA,UAAID,IAAAC,cAAA,UAAKlB,EAAYxC,OAAO,GAAG6G,cAAgBrE,EAAYsE,MAAM,KAEjErD,IAAAC,cAAA,UAAI,uBACJD,IAAAC,cAAA,UAAID,IAAAC,cAAA,UAAKT,EAAiBjD,OAAO,GAAG6G,cAAgB5D,EAAiB6D,MAAM,KACrD,QAArB7D,GACCQ,IAAAC,cAAAD,IAAAwE,SAAA,KACExE,IAAAC,cAAA,UAAI,mBACJD,IAAAC,cAAA,UACGP,EAAca,IAAI,CAACS,EAAMP,IACxBT,IAAAC,cAAA,MAAIS,IAAKD,GAAQO,MAMxByC,EACCzD,IAAAC,cAAA,OAAKC,UAAU,qBACbF,IAAAC,cAAA,OAAKC,UAAU,WACfF,IAAAC,cAAA,KAAGC,UAAU,mBAAmByD,IAGlC3D,IAAAC,cAAAD,IAAAwE,SAAA,KACExE,IAAAC,cAAA,UAAQW,QAjIM6D,KACpBf,GAAW,GACXE,EAAkBN,EAAgB,IAClC,MACMoB,EAAQlB,EAAUmB,KAAK,MACvBC,EAAc7F,EAGd8F,EAAyC,QAArBrF,EAA0B,0DAAAvB,OAA6DyB,EAAciF,KAAK,SAAQ,MAAO,sCAE7IG,EAAO,CACXC,KAAK,qCAAD9G,OAAuC2G,EAAW,SAAA3G,OAAQyG,EAAK,MAAAzG,OAAK4G,EAAiB,6BACzFxD,YAAawC,EAAsBxC,IAGjB,6CAAhBtC,IACF+F,EAAKC,MAAQ,mEAGf7H,QAAQC,IAAI,2BAA4B2H,EAAKC,KAAMD,EAAKzD,aAExD2D,MAlBiB,+EAkBD,CACdC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAUP,KAEtBxE,KAAKgF,GAAYA,EAASC,QACxBjF,KAAKwE,IACJpB,GAAW,GACXxG,QAAQC,IAAI,WAAY2H,GACxB,MAAMU,EAAiBV,EAAKW,MAAMC,QAAQ,GAAGC,QAAQC,QAC/CC,EAAiBT,KAAKU,MAAMN,GAClCtI,QAAQC,IAAI0I,GAEZnH,EAAc,CAAEqH,iBAAkBF,IAAkBvF,KAAK,KACvDnB,EAAS,kBAAmB,CAAE6G,MAAO,CAAEC,OAAQJ,SAGlDK,MAAO9I,IACNsG,GAAW,GACXxG,QAAQE,MAAM,SAAUA,OAyFU,kCAChC4C,IAAAC,cAAA,UAAQW,QArEUuF,KACxBhH,EAAS,qBAoEiC,kCCiO/BiH,MAjXf,SAAsBtH,GAAiB,IAADuH,EAAA,IAAf,YAACtH,GAAYD,EAChC,MAAMK,EAAWC,eACVkH,EAAqBC,GAA0BhH,mBAAS,KACxDiH,EAAuBC,GAA4BlH,mBAAS,KAC5DmH,EAAaC,GAAkBpH,mBAAS,sBACxCqH,EAAkBC,GAAuBtH,mBAAS,KAClDuH,EAAmBC,GAAwBxH,mBAAS,IACrD8B,GHqegC2F,EGreQjI,EHsevCuD,OAAOyB,KAAK1C,GACdN,OAAO0B,IAAeE,EAAiBqE,GAAapE,kBAAkB7C,SAAS0C,IAC/E1B,OAAO0B,IAAqD,IAAvCpB,EAAYoB,GAAYP,YAC7C+E,OAAO,CAACC,EAAKxG,KACVwG,EAAIxG,GAAOW,EAAYX,GAChBwG,GACR,KAP+BF,MGnetC,MACMG,EAA8B,QAAjBd,EADFe,cACcpB,aAAK,IAAAK,OAAA,EAAdA,EAAgBJ,OAKhCoB,EAA2BA,KAC7BV,EAAe,sBAoBbW,EAA0BA,CAACC,EAAoBC,KAKjD,IAAIC,EAAsB,IAJMnF,OAAOyB,KAAKyC,GACvCzF,OAAOjF,GAAQ4L,EAAW5L,IAC1BmL,OAAO,CAACC,EAAKpL,IAASoL,EAAMV,EAAsB1K,GAAO,GAG9D,MAAM6L,EAAyBrB,EAAoBvF,OAAOjF,IAAS4L,EAAW5L,IAGxE8L,EAAiB,IAAKpB,EAAuB,CAACe,GAAqBC,GACzEC,GAAuBD,EAGvB,MAAMK,EAA0BF,EAC3B5G,OAAOjF,GAAQA,IAASyL,GACxBN,OAAO,CAACC,EAAKpL,IAASoL,EAAMU,EAAe9L,GAAO,GAGvD,GAAI+L,EAA0B,EAAG,CAC7B,MAAMC,EAAcL,EAAsBI,EAC1CF,EAAuBnF,QAAQ1G,IAC3B,GAAIA,IAASyL,EAAoB,CAC7B,IAAIQ,EAAqBH,EAAe9L,GAAQgM,EAChDF,EAAe9L,GAAQiM,EAAqB,EAAI,EAAIA,UAK5DJ,EAAuBnF,QAAQ1G,IACvBA,IAASyL,IACTK,EAAe9L,GAAQ,KAKnC2K,EAAyBmB,KAUtBI,EAAiBC,GAAsB1I,mBAAS,IAuCjDmI,EAAcQ,IAChB,MAAMzF,EAAapB,EAAY6G,GAC/B,QAAOzF,GAAkC,aAArBA,EAAWnB,OAG7B6G,EAAmBA,KACrB,MAAMP,EAAiB,IAAKpB,GAC5B,IAAI4B,EAAe,EAGnB9F,OAAOyB,KAAK6D,GAAgBpF,QAAQ9B,IAC3BgH,EAAWhH,KACZkH,EAAelH,GAAO2H,KAAKC,MAAMV,EAAelH,KAEpD0H,GAAgBR,EAAelH,KAInC,MAAM6H,EAAc,IAAMH,EACpBI,EAAkBlG,OAAOyB,KAAK6D,GAAgB7G,OAAOL,IAAQgH,EAAWhH,IACxE+H,EAA0BF,EAAcC,EAAgBnM,OAE9DmM,EAAgBhG,QAAQ9B,IACpBkH,EAAelH,IAAQ+H,IAI3B,IAAIC,EAAc,EASlB,GARAF,EAAgBhG,QAAQ9B,IAChBkH,EAAelH,GAAO,IACtBgI,GAAed,EAAelH,GAC9BkH,EAAelH,GAAO,KAK1BgI,EAAc,EAAG,CACjB,MAAMC,EAAeH,EAAgBzH,OAAOL,GAAOkH,EAAelH,IAAQ,KACpEkI,EAAqBP,KAAKQ,IAAIH,GAAeC,EAAatM,OAEhEsM,EAAanG,QAAQ9B,IACjBkH,EAAelH,IAAQkI,IAK/B,MAAME,EAAaxG,OAAOyG,OAAOnB,GAAgBX,OAAO,CAACC,EAAK8B,IAAQ9B,EAAM8B,EAAK,GACjF,GAAIF,EAAa,IAAK,CAClB,MAAMG,EAASH,EAAa,IACtBH,EAAeH,EAAgBzH,OAAOL,GAAOkH,EAAelH,GAAO,GACnEwI,EAAmBD,EAASN,EAAatM,OAE/CsM,EAAanG,QAAQ9B,IACjBkH,EAAelH,IAAQwI,IAI/BzC,EAAyBmB,IAOvBuB,EAAgBA,KAClBC,WAAW,KACPjB,KACD,KAyBDkB,EAAwB,CAC1BC,QAAS,OACTC,eAAgB,gBAChBC,WAAY,SACZC,aAAc,QAIlBvF,oBAAU,KACN,MAAM0D,EAAiB,GAGvBtB,EAAoB9D,QAAQC,IACpBiF,EAAWjF,GACXmF,EAAenF,GAAc,EAE7BmF,EAAenF,GAAc,KAIrCgE,EAAyBiD,GAEdpH,OAAOyB,KAAK2F,GACd3I,OAAOL,GAAO4F,EAAoBvG,SAASW,IAC3CuG,OAAO,CAACC,EAAKxG,KACVwG,EAAIxG,GAAOgJ,EAAgBhJ,GACpBwG,GACRU,KAEZ,CAACtB,IAEJ,MAAMqD,EApDKrH,OAAOyG,OAAOvC,GAAuBS,OAAO,CAACC,EAAK9I,IAAU8I,EAAM9I,EAAO,GAqD9EwL,EAAuB,CACzBC,MAAOxB,KAAKQ,IAAIc,EAAkB,KAAO,IAAO,QAAU,OA6B9D,OA1BAzF,oBAAU,KAEN,GADAhH,QAAQC,IAAI,yBAA0BgK,GAClCA,EAAe,CACf,MAAM2C,EAA0B,GAC1BC,EAAkC,GAExCzH,OAAOyB,KAAKoD,GAAe3E,QAAQ9B,IACnB,eAARA,EACAmG,EAAoBM,EAA0B,YAEjC,sBAARzG,EACLqG,EAAqBI,EAAiC,mBAEhD9F,EAAYX,KAClBoJ,EAAwBpJ,GAAOyG,EAAczG,GAC7CqJ,EAAgCrH,KAAKhC,MAG7CxD,QAAQC,IAAI,0BAA2B2M,GACvCrD,EAAyBqD,GACzBvD,EAAuBwD,GAEvB1C,MAEL,CAACF,IAGAnH,IAAAC,cAAA,WACqB,sBAAhByG,GACG1G,IAAAC,cAAA,WACID,IAAAC,cAAA,WACID,IAAAC,cAAA,OAAK+J,MAAOX,GACRrJ,IAAAC,cAAA,UAAI,0BACJD,IAAAC,cAAA,UAAQW,QAASyG,GAA0B,sBAC3CrH,IAAAC,cAAA,cAEHqC,OAAOC,QAAQlB,GAAad,IAAIwC,IAAA,IAAEjH,EAAMmO,GAAQlH,EAAA,OAC7C/C,IAAAC,cAAA,OAAKC,WAzKCgI,EAyKiCpM,GAxKpDwK,EAAoBvG,SAASmI,GAwK+B,WAAa,IAAM,mBAC9DxH,IAAK5E,EACL8E,QAASA,IAvQLsH,KAC5B,GAAI5B,EAAoBvG,SAASmI,GAAiB,CAC9C3B,EAAuBD,EAAoBvF,OAAOjF,GAAQA,IAASoM,IACnE,MAAMN,EAAiB,IAAKpB,UACrBoB,EAAeM,GACtBzB,EAAyBmB,QAEzBrB,EAAuB,IAAID,EAAqB4B,IAChDzB,EAAyB,IAAKD,EAAuB,CAAC0B,GAAuD,aAAtC7G,EAAY6G,GAAgB5G,MAAuBD,EAAY6G,GAAgBjG,gBAAkB,MA+PrIiI,CAAuBpO,IAEtCkE,IAAAC,cAAA,cAASnE,GACTkE,IAAAC,cAAA,aAAQgK,EAAQzI,cA9Kd0G,UAoLL,sBAAhBxB,GACG1G,IAAAC,cAAA,OAAKC,UAAU,4BAEXF,IAAAC,cAAA,OAAK+J,MA9FD,CAChBV,QAAS,OACTC,eAAgB,gBAChBC,WAAY,SACZC,aAAc,SA2FEzJ,IAAAC,cAAA,UAAQW,QAxRMuJ,KAC9BxD,EAAe,uBAuR6C,uBAC5C3G,IAAAC,cAAA,UAAI,gBACJD,IAAAC,cAAA,QAAM+J,MAAOJ,EAAsBhJ,QAASuH,GAAmBwB,EAAgBS,QAAQ,GAAG,MAE9FpK,IAAAC,cAAA,OAAKC,UAAU,sBACfF,IAAAC,cAAA,SAAO+J,MAzGJ,CACfxM,MAAO,MACP6M,eAAgB,aAwGArK,IAAAC,cAAA,aACKqG,EAAoB/F,IAAIzE,IAAI,IAAAwO,EAAA,OACzBtK,IAAAC,cAACD,IAAMwE,SAAQ,CAAC9D,IAAK5E,GACjBkE,IAAAC,cAAA,UACID,IAAAC,cAAA,UAAKnE,GACLkE,IAAAC,cAAA,UAAKuG,EAAsB1K,GAAMsO,QAAQ,GAAG,MAEhDpK,IAAAC,cAAA,UACID,IAAAC,cAAA,MAAIsK,QAAQ,KACP7C,EAAW5L,GACRkE,IAAAC,cAAA,OAAK+J,MAAO,CAAEQ,SAAU,aACpBxK,IAAAC,cAAA,SACIU,KAAK,OACLvC,MAA4B,QAAvBkM,EAAEtC,EAAgBlM,UAAK,IAAAwO,IAAI9D,EAAsB1K,GACtD2O,SAAWrK,GA7OlCsK,EAACxC,EAAgB9J,KAE1C6J,EAAmB,IAAKD,EAAiB,CAACE,GAAiB9J,IAE3D,MAAMuM,EAAWC,WAAWxM,GACtByM,EAAaxJ,EAAY6G,GAAgBlG,aAAe,IAC9D,IAAK8I,MAAMH,IAAavM,EAAM2M,MAAM,iBAAkB,CAClD,MAAMC,EAAeL,EAAWE,EAAaA,EAAaF,EACpD/C,EAAiB,IAAKpB,EAAuB,CAAC0B,GAAiB8C,GACrEvE,EAAyBmB,GACzBN,EAAwBY,EAAgByC,KAmOqBD,CAAqB5O,EAAMsE,EAAE6K,OAAO7M,OACrD8M,OAAS9K,GAhOjC8H,KACxB,MAAM9J,EAAQ4J,EAAgBE,GACxByC,EAAWvM,EAAQwM,WAAWxM,GAAS,EACvCyM,EAAaxJ,EAAY6G,GAAgBlG,aAAe,IACxDgJ,EAAeL,EAAWE,EAAaA,EAAaF,EAC1D,IAAKG,MAAME,GAAe,CAEtB,MAAMpD,EAAiB,IAAKpB,EAAuB,CAAC0B,GAAiB8C,GACrEvE,EAAyBmB,GACzBN,EAAwBY,EAAgB8C,GACpCL,EAAWE,GAEX5C,EAAmB,IAAKD,EAAiB,CAACE,GAAiB2C,MAoNJM,CAAmBrP,EAAMsE,EAAE6K,OAAO7M,OACjD4L,MAAO,CAAExM,MAAO,OAAQ4N,YAAa5E,EAAsB1K,KAAUuF,EAAYvF,GAAMkG,YAAc,MAAQ,aAEhHwE,EAAsB1K,KAAUuF,EAAYvF,GAAMkG,aAC/ChC,IAAAC,cAAA,QAAM+J,MAAO,CAAEQ,SAAU,WAAYa,MAAO,EAAGC,IAAK,EAAGzB,MAAO,QAAS,QAI/E7J,IAAAC,cAAA,SACIU,KAAK,QACL4K,IAAI,IACJC,IAAI,MACJC,KAAK,OACLrN,MAAOoI,EAAsB1K,GAC7B2O,SAAWrK,GAlQhCsL,EAACxD,EAAgB9J,KACxC,MAAMuM,EAAWC,WAAWxM,GAC5BkJ,EAAwBY,EAAgByC,IAgQqBe,CAAmB5P,EAAMsE,EAAE6K,OAAO7M,OACnDuN,UAAWxC,EACXyC,WAAYzC,EACZa,MAAO,CAAExM,MAAO,iBAU/CoJ,GACG5G,IAAAC,cAAA,OAAKC,UAAU,cACXF,IAAAC,cAAA,OAAK+J,MAAOX,GACRrJ,IAAAC,cAAA,UAAI,eACJD,IAAAC,cAAA,UAAQW,QA5KZiL,KACpB3O,QAAQC,IAAI,UA2K8C,qCAEtC6C,IAAAC,cAAA,SAAI2G,GACJ5G,IAAAC,cAAA,SAAG,yBAAuB6G,KAIlC9G,IAAAC,cAAA,UAAQC,UAAU,SAASU,QArKpBkL,KACnB3D,IACAhJ,EAAS,mBAAoB,CAAE6G,MAAO,CAAEC,OAAQO,EAAuBuF,WAAYnF,OAmKnB,sBC5RzDoF,MA1Ef,WAA2B,IAAD3F,EAAA4F,EACtB,MAAOC,EAAYC,GAAiB5M,mBAAS,IACvC6M,EAAWhF,cACXjI,EAAWC,cACX6G,EAAuB,QAAjBI,EAAG+F,EAASpG,aAAK,IAAAK,OAAA,EAAdA,EAAgBJ,OACzB8F,EAA2B,QAAjBE,EAAGG,EAASpG,aAAK,IAAAiG,OAAA,EAAdA,EAAgBF,WAE7BM,EAAoBH,EAAWI,OAAOjQ,OAAS,EAqCrD,OACI2D,IAAAC,cAAA,OAAKC,UAAU,kBACXF,IAAAC,cAAA,UAAI,oCACJD,IAAAC,cAAA,SACIU,KAAK,OACL4L,YAAY,oBACZnO,MAAO8N,EACPzB,SAAWrK,GAAM+L,EAAc/L,EAAE6K,OAAO7M,SAE5C4B,IAAAC,cAAA,UAAI,oBACJD,IAAAC,cAAA,OAAKC,UAAU,UACV+F,GAAU3D,OAAOyB,KAAKkC,GAAQ1F,IAAI,CAACG,EAAKD,IACrCT,IAAAC,cAAA,OAAKC,UAAU,aAAaQ,IAAKD,GAC7BT,IAAAC,cAAA,cAASS,EAAI,KAAU,IAACV,IAAAC,cAAA,QAAMC,UAAU,eAAe+F,EAAOvF,GAAK0J,QAAQ,GAAG,QAK1FpK,IAAAC,cAAA,OAAKC,UAAU,WACXF,IAAAC,cAAA,UAAQW,QA3BY4L,KAC5BrN,EAAS,yBA0ByC,sBAC1Ca,IAAAC,cAAA,UAAQW,QAxBY6L,KAC5BtN,EAAS,qBAuByC,sBAC1Ca,IAAAC,cAAA,UAAQC,UAAU,SAASU,QAvDVjE,UACzB,IACI,MAAM+P,EAAWR,EACZS,cACAC,QAAQ,cAAe,IACvBA,QAAQ,KAAM,KAAO,KAAM,IAAI3P,MAAOuB,UAE3CtB,QAAQC,IAAIuP,GACZxP,QAAQC,IAAIiP,EAASpG,aACf6G,YAAO/P,YAAInB,EAAI,eAAgB+Q,GAAW,CAC5C5Q,KAAMoQ,EACN7K,YAAa4E,EACb8F,WAAYA,EACZe,UAAW,IAAI7P,OAEnBC,QAAQC,IAAI,6BAA8BuP,SAGpChO,EAAc,CAAEgO,SAAUA,IAEhCvN,EAAS,gBAAiB,CAAE6G,MAAO,CAAE0G,SAAUA,KACjD,MAAOtM,GACLlD,QAAQE,MAAM,0BAA2BgD,KAiCqBgB,UAAWiL,GAAmB,sBAE1FA,GACErM,IAAAC,cAAA,KAAGC,UAAU,gBAAe,iCCQ7B6M,MA9Ef,WAAwB,IAAD1G,EACnB,MAAO2G,EAAYC,GAAiB1N,mBAAS,MACvC6M,EAAWhF,cACXjI,EAAWC,cACXsN,EAAyB,QAAjBrG,EAAG+F,EAASpG,aAAK,IAAAK,OAAA,EAAdA,EAAgBqG,UAC1BQ,EAAiBC,GAAsB5N,mBAAS,qBAuDvD,OArDA2E,oBAAU,KACN,MACMkJ,EADe,IAAIC,gBAAgBjB,EAASkB,QACfC,IAAI,YACvC,GAAGH,EAAe,CACIzQ,WACd,MAAMiB,EAASd,YAAInB,EAAI,eAAgByR,GACjCI,QAAgBC,YAAO7P,GAEzB4P,EAAQE,SACRT,EAAcO,EAAQ1I,QAEtB5H,QAAQC,IAAI,sBAIpBwQ,QAGC,GAAIjB,EAAU,CACG/P,WACd,MAAMiB,EAASd,YAAInB,EAAI,eAAgB+Q,GACjCc,QAAgBC,YAAO7P,GAEzB4P,EAAQE,SACRT,EAAcO,EAAQ1I,QAEtB5H,QAAQC,IAAI,sBAIpBwQ,KAEL,CAACjB,EAAUN,EAASkB,SAqBlBN,EAGDhN,IAAAC,cAAA,WACID,IAAAC,cAAA,UAAK+M,EAAWlR,MAChBkE,IAAAC,cAAA,OAAKC,UAAU,UACVoC,OAAOyB,KAAKiJ,EAAW3L,aAAad,IAAI,CAACG,EAAKD,IAC3CT,IAAAC,cAAA,OAAKC,UAAU,aAAaQ,IAAKD,GAC7BT,IAAAC,cAAA,cAASS,EAAI,KAAU,IAACV,IAAAC,cAAA,QAAMC,UAAU,eAAe8M,EAAW3L,YAAYX,GAAK0J,QAAQ,OAIvGpK,IAAAC,cAAA,UAAQW,QA/BUgN,KACtB,MAAMC,EAAalQ,OAAOyO,SAAS0B,KAC7BC,EAAQ,GAAA9P,OAAM4P,EAAU,cAAA5P,OAAayO,GAC3CpP,UAAU0Q,UAAUC,UAAUF,GAAUzN,KAAM,KAC1CpD,QAAQC,IAAI,mCACZgQ,EAAmB,WAEnB/D,WAAW,KACP+D,EAAmB,sBACpB,OACJjH,MAAO,KACNhJ,QAAQC,IAAI,kCAoByB+P,GACrClN,IAAAC,cAAA,UAAQW,QAjBesN,KAC3B/O,EAAS,qBAAsB,CAAE6G,MAAO,CAAE0G,gBAgBG,qCAbzB1M,IAAAC,cAAA,WAAK,eCsElBkO,MAjIf,WAA6B,IAAD9H,EACxB,MAAMlH,EAAWC,eACV4N,EAAYC,GAAiB1N,mBAAS,OACtCzD,EAAMsS,GAAW7O,mBAAS,KAC1B8O,EAAaC,GAAkB/O,mBAAS,KACxCgP,EAAeC,GAAoBjP,oBAAS,IAC5CkP,EAAQC,GAAanP,oBAAS,IAC9BoP,EAASC,GAAcrP,mBAAS,CAAEsP,QAAS,GAAIC,QAAS,GAAIC,IAAK,MACjEC,EAAMC,GAAW1P,mBAAS,KAC1B2P,EAAcC,GAAmB5P,mBAAS,IAE3CmN,EAAyB,QAAjBrG,EADGe,cACSpB,aAAK,IAAAK,OAAA,EAAdA,EAAgBqG,UAC1B0C,EAAUC,GAAe9P,oBAAS,GA+CzC,OA7CA2E,oBAAU,KACN,GAAIwI,EAAU,CACQ/P,WACd,MAAMiB,EAASd,YAAInB,EAAI,eAAgB+Q,GACjCc,QAAgBC,YAAO7P,GAEzB4P,EAAQE,SACRT,EAAcO,EAAQ1I,QAEtB5H,QAAQC,IAAI,sBAIpBwQ,KAEL,CAACjB,IA8BCM,EAGDhN,IAAAC,cAAA,OAAKC,UAAU,kBACXF,IAAAC,cAAA,UAAK+M,EAAWlR,MAChBkE,IAAAC,cAAA,OAAKC,UAAU,sBACXF,IAAAC,cAAA,OAAKC,UAAU,UACVoC,OAAOyB,KAAKiJ,EAAW3L,aAAad,IAAI,CAACG,EAAKD,IAC3CT,IAAAC,cAAA,OAAKS,IAAKD,GACNT,IAAAC,cAAA,cAASS,GAAa,KAAGsM,EAAW3L,YAAYX,MAI5DV,IAAAC,cAAA,SAAG,yRACHD,IAAAC,cAAA,QAAME,SA1CGxD,UACjB0S,GAAY,GACZjP,EAAEC,iBACF,IACI,MAAMiP,GAAU,IAAIrS,MAAOuB,UAAY,IAAMkO,QACvCG,YAAO/P,YAAInB,EAAI,SAAU2T,GAAU,CACrCxT,OACA4Q,WACA2B,cACAI,SACAE,QAASF,EAAS,KAAOE,EACzB7B,UAAW,IAAI7P,KACfsS,UAAWhB,EACXnC,SAAU8C,EACVF,SAEJ9R,QAAQC,IAAI,yBAGNuB,EAAc,CAAE4Q,YAEtBnQ,EAAS,kBACX,MAAOiB,GACLlD,QAAQE,MAAM,2BAA4BgD,GAC1CiP,GAAY,KAkBsBnP,UAAU,mBACpCF,IAAAC,cAAA,WACID,IAAAC,cAAA,aAAO,cAAkBD,IAAAC,cAAA,WACzBD,IAAAC,cAAA,SAAOU,KAAK,OAAOvC,MAAOtC,EAAM2O,SAAWrK,GAAMgO,EAAQhO,EAAE6K,OAAO7M,UAEtE4B,IAAAC,cAAA,WACID,IAAAC,cAAA,aAAO,qEAAyED,IAAAC,cAAA,WAChFD,IAAAC,cAAA,SAAOU,KAAK,MAAMvC,MAAOiQ,EAAa5D,SAAWrK,GAAMkO,EAAelO,EAAE6K,OAAO7M,UAEnF4B,IAAAC,cAAA,WACID,IAAAC,cAAA,aAAO,oCAAwCD,IAAAC,cAAA,WAC/CD,IAAAC,cAAA,UAAQ7B,MAAOmQ,EAAe9D,SAAWrK,GAAMoO,EAAoC,SAAnBpO,EAAE6K,OAAO7M,QACrE4B,IAAAC,cAAA,UAAQ7B,MAAM,QAAO,OACrB4B,IAAAC,cAAA,UAAQ7B,MAAM,SAAQ,QAG7BmQ,EAEGvO,IAAAC,cAAA,WAEID,IAAAC,cAAA,aAAO,0EAA8ED,IAAAC,cAAA,WACrFD,IAAAC,cAAA,UAAQ7B,MAAOqQ,EAAQhE,SAAWrK,GAAMsO,EAA6B,SAAnBtO,EAAE6K,OAAO7M,QACvD4B,IAAAC,cAAA,UAAQ7B,MAAM,QAAO,OACrB4B,IAAAC,cAAA,UAAQ7B,MAAM,SAAQ,QAExBqQ,GACEzO,IAAAC,cAAA,WACID,IAAAC,cAAA,aAAO,qBAAyBD,IAAAC,cAAA,WAChCD,IAAAC,cAAA,SAAOU,KAAK,OAAO4L,YAAY,WAAWnO,MAAOuQ,EAAQE,QAASpE,SAAWrK,GAAMwO,EAAW,IAAKD,EAASE,QAASzO,EAAE6K,OAAO7M,UAAY4B,IAAAC,cAAA,WAC1ID,IAAAC,cAAA,SAAOU,KAAK,OAAO4L,YAAY,WAAWnO,MAAOuQ,EAAQG,QAASrE,SAAWrK,GAAMwO,EAAW,IAAKD,EAASG,QAAS1O,EAAE6K,OAAO7M,UAAY4B,IAAAC,cAAA,WAC1ID,IAAAC,cAAA,SAAOU,KAAK,OAAOvC,MAAM,UAAUoR,UAAQ,IAAGxP,IAAAC,cAAA,WAC9CD,IAAAC,cAAA,SAAOU,KAAK,OAAOvC,MAAM,KAAKoR,UAAQ,IAAGxP,IAAAC,cAAA,WACzCD,IAAAC,cAAA,SAAOU,KAAK,OAAO4L,YAAY,WAAWnO,MAAOuQ,EAAQI,IAAKtE,SAAWrK,GAAMwO,EAAW,IAAKD,EAASI,IAAK3O,EAAE6K,OAAO7M,YAKlI4B,IAAAC,cAAA,WACID,IAAAC,cAAA,SAAG,yJACHD,IAAAC,cAAA,aAAO,0BAA8BD,IAAAC,cAAA,WACrCD,IAAAC,cAAA,SAAOU,KAAK,OAAO4L,YAAY,gBAAgB9B,SAAWrK,IAAO+O,EAAgB/O,EAAE6K,OAAO7M,WAGlG4B,IAAAC,cAAA,aAAO,SAAaD,IAAAC,cAAA,WACpBD,IAAAC,cAAA,YAAUsM,YAAY,uBAAuBnO,MAAO4Q,EAAMvE,SAAWrK,GAAM6O,EAAQ7O,EAAE6K,OAAO7M,SAC5F4B,IAAAC,cAAA,UAAQU,KAAK,SAAST,UAAU,UAAS,kBAGjDF,IAAAC,cAAA,OAAKC,UAAU,kBACfF,IAAAC,cAAA,OAAKC,UAAU,kBAEdkP,GAAapP,IAAAC,cAAA,KAAGC,UAAU,gBAAe,wDAjE1BF,IAAAC,cAAA,WAAK,eClDlBwP,MAZf,WACI,OACIzP,IAAAC,cAAA,OAAKC,UAAU,gCACXF,IAAAC,cAAA,UAAI,iCACJD,IAAAC,cAAA,SAAG,oGACHD,IAAAC,cAAA,SAAG,sJACHD,IAAAC,cAAA,SAAG,oCACHD,IAAAC,cAACyP,IAAI,CAACC,GAAG,KAAI,kBC6CVC,MAnDCA,KACd,MAAOvB,EAAaC,GAAkB/O,mBAAS,KACxCoG,EAASkK,GAActQ,mBAAS,KAChCuQ,EAAaC,GAAkBxQ,oBAAS,GAkB/C,OAAIuQ,EACK9P,IAAAC,cAAA,WAAKD,IAAAC,cAAA,UAAI,6BAA0BD,IAAAC,cAAA,WAAM,gCAChDD,IAAAC,cAAA,KAAG6N,KAAK,KAAI,iBAKZ9N,IAAAC,cAAA,QAAME,SAvBaxD,UACnByD,EAAEC,iBAEF,UACQxC,YAAOC,YAAWnC,EAAI,4BAA6B,CACvD0S,cACA1I,UACAmH,UAAW,IAAI7P,OAGf8S,GAAe,GACjB,MAAO3S,GACPF,QAAQE,MAAM,0BAA2BA,KAWb8C,UAAU,mBACpCF,IAAAC,cAAA,UAAI,cACND,IAAAC,cAAA,aACED,IAAAC,cAAA,cAAQ,gBAAqB,+CAA4CD,IAAAC,cAAA,WACzED,IAAAC,cAAA,SACEU,KAAK,OACLvC,MAAOiQ,EACP5D,SAAWrK,GAAMkO,EAAelO,EAAE6K,OAAO7M,UAG3C4B,IAAAC,cAAA,WACFD,IAAAC,cAAA,aACED,IAAAC,cAAA,cAAQ,YAAiBD,IAAAC,cAAA,WACzBD,IAAAC,cAAA,YACE7B,MAAOuH,EACP8E,SAAWrK,GAAMyP,EAAWzP,EAAE6K,OAAO7M,UAGzC4B,IAAAC,cAAA,UAAQU,KAAK,UAAS,YC2CbqP,MAvFf,WACI,MAAM5D,EAAWhF,eACV4F,EAAYC,GAAiB1N,mBAAS,OACtC0Q,EAAaC,GAAkB3Q,mBAAS,KACxC4Q,EAAgBC,GAAqB7Q,mBAAS,IAE/C8Q,EAAaF,EAAelJ,OAAO,CAACqJ,EAAK7N,IAAe6N,EAAM7N,EAAW8N,MAAO,GAChFC,EAAYL,EAAelJ,OAAO,CAACqJ,EAAK7N,IAAe6N,EAAM7N,EAAWd,KAAM,GAC9E8O,EAAanO,OAAOyG,QAAiB,OAAViE,QAAU,IAAVA,OAAU,EAAVA,EAAY3L,cAAe,IAAI4F,OAAO,CAACqJ,EAAKI,IAASJ,EAAMI,EAAM,GAElGxM,oBAAU,KACN,MAAMyM,EAAe,IAAItD,gBAAgBjB,EAASkB,QAY9CqD,EAAapD,IAAI,aAXH5Q,WACd,MAAMiB,EAASd,YAAInB,EAAI,eAAgBgV,EAAapD,IAAI,aAClDC,QAAgBC,YAAO7P,GAEzB4P,EAAQE,SACRT,EAAcO,EAAQ1I,QAEtB5H,QAAQC,IAAI,sBAKhBwQ,IAEL,CAACvB,EAASkB,SAGb,MAAMsD,EAAuBC,sBAAY,KACrC,GAAI7D,EAAY,CACZ,MAAMyD,EAAanO,OAAOyG,OAAOiE,EAAW3L,aAAa4F,OAAO,CAACqJ,EAAKI,IAASJ,EAAMI,EAAM,GACrFI,EAAoBxO,OAAOC,QAAQyK,EAAW3L,aAAad,IAAIzB,IAAoB,IAAlBhD,EAAMiV,GAAMjS,EAC/E,MAAMkS,EAAmBf,EAAcQ,EAAcM,EAErD,MAAO,CAAEjV,OAAMiV,MAAOA,EAAOR,MAAOS,EAAiBrP,KAD9BN,EAAYvF,GAAM+F,WAAamP,KAG1DZ,EAAkBU,KAEvB,CAAC9D,EAAYiD,IAShB,OAPA/L,oBAAU,KACF8I,GAAciD,EAAc,GAC5BW,KAEL,CAAC5D,EAAYiD,EAAaW,IAIzB5Q,IAAAC,cAAA,OAAKC,UAAU,iBACXF,IAAAC,cAAA,UAAI,iBACJD,IAAAC,cAAA,SACIU,KAAK,SACLvC,MAAO6R,EACPxF,SAAWrK,GAAM8P,EAAe9P,EAAE6K,OAAO7M,OACzCmO,YAAY,iBAEhBvM,IAAAC,cAAA,aACID,IAAAC,cAAA,aACID,IAAAC,cAAA,UACID,IAAAC,cAAA,UAAI,cACJD,IAAAC,cAAA,UAAI,SACJD,IAAAC,cAAA,UAAI,SACJD,IAAAC,cAAA,UAAI,UAGZD,IAAAC,cAAA,aACKkQ,EAAe5P,IAAI,CAACkC,EAAYhC,IAC7BT,IAAAC,cAAA,MAAIS,IAAKD,GACLT,IAAAC,cAAA,UAAKwC,EAAW3G,MAChBkE,IAAAC,cAAA,UAAKwC,EAAWsO,OAChB/Q,IAAAC,cAAA,UAAKwC,EAAW8N,MAAMnG,QAAQ,IAC9BpK,IAAAC,cAAA,UAAI,IAAEwC,EAAWd,KAAKyI,QAAQ,MAGtCpK,IAAAC,cAAA,UACID,IAAAC,cAAA,UAAID,IAAAC,cAAA,cAAQ,UACZD,IAAAC,cAAA,UAAKwQ,GACLzQ,IAAAC,cAAA,UAAKoQ,EAAWjG,QAAQ,IACxBpK,IAAAC,cAAA,UAAI,IAAEuQ,EAAUpG,QAAQ,SC+CjC6G,MA9Hf,WACqB7R,cAAjB,MACMgN,EAAWhF,eAEV8J,EAAYC,GAAiB5R,mBAAS,KACtC6R,EAAoBC,GAAyB9R,mBAAS,IAAI+R,MAC1DC,EAAWC,GAAgBjS,oBAAS,IACpCyN,EAAYC,GAAiB1N,mBAAS,MAG7C2E,oBAAU,KACNsN,GAAa,GACb,MACM9E,EADe,IAAIW,gBAAgBjB,EAASkB,QACpBC,IAAI,YAClC,GAAIb,EAAU,CACQ/P,WACd,MAAMiB,EAASd,YAAInB,EAAI,eAAgB+Q,GACjCc,QAAgBC,YAAO7P,GAEzB4P,EAAQE,UACRT,EAAcO,EAAQ1I,QACtB5H,QAAQC,IAAI,iBAAkBqQ,EAAQ1I,UAEtC5H,QAAQC,IAAI,qBACZqU,GAAa,KAIrB7D,KAEL,CAACvB,EAASkB,SAGbpJ,oBAAU,KACN,GAAI8I,EAAY,CACYrQ,WACpB6U,GAAa,GACb,IACI,MAAMrB,EVidgBsB,MAClC,IAAI3N,EAAkB,GA2BtB,OAzBAxB,OAAOyB,KAAK1C,GAAamB,QAAQ,CAAC9B,EAAKD,EAAOuD,KAC5CF,GAAmBpD,GAEfW,EAAYX,GAAKuD,eAAe,oBAAsB5C,EAAYX,GAAKuD,eAAe,kBACxFH,GAAmB,KAEfzC,EAAYX,GAAKuD,eAAe,qBAClCH,GAAe,YAAA7F,OAAgBoD,EAAYX,GAAKuB,iBAC5CZ,EAAYX,GAAKuD,eAAe,iBAClCH,GAAmB,OAInBzC,EAAYX,GAAKuD,eAAe,iBAClCH,GAAe,QAAA7F,OAAYoD,EAAYX,GAAKsB,cAG9C8B,GAAmB,KAGjBrD,EAAQuD,EAAM3H,OAAS,IACzByH,GAAmB,QAIhBA,GU7e4B2N,GACvBvU,QAAQC,IAAI,eAAgBgT,GAC5B,MAAM7K,QAAiBN,MAAM,kFAAmF,CAC5GC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEY,OAAQ+G,EAAY3L,YAAa8O,MAG5D,GADAjT,QAAQC,IAAI,YAAamI,IACpBA,EAASoM,GAAI,MAAM,IAAIC,MAAM,+BAClC,MAAM7M,QAAaQ,EAASC,OAC5BrI,QAAQC,IAAI,QAAS2H,EAAKW,MAAMC,QAAQ,GAAGC,QAAQC,SACnD,MAAMH,EAAQX,EAAKW,MAAMC,QAAQ,GAAGC,QAAQC,QAC5CuL,EAAc/L,KAAKU,MAAML,IAC3B,MAAOrI,GACLF,QAAQE,MAAM,6BAA8BA,GAE/C,QACGF,QAAQC,IAAI,sBAAuB+T,GACnCM,GAAa,KAGrBI,KAEL,CAAC5E,IAGJ9I,oBAAU,KACNhH,QAAQC,IAAI,sBAAuB+T,IACpC,CAACA,IAEJ,MAAMW,EAAyBC,IAC3B,MAAMC,EAAe,IAAIT,IAAIF,GACzBW,EAAaC,IAAIF,GACjBC,EAAaE,OAAOH,GAEpBC,EAAaG,IAAIJ,GAErBT,EAAsBU,IAQ1B,OACI/R,IAAAC,cAAA,OAAKC,UAAU,uBACXF,IAAAC,cAAA,UAAI,yCACHsR,EACGvR,IAAAC,cAAA,OAAKC,UAAU,WACXF,IAAAC,cAAA,OAAKC,UAAU,YACfF,IAAAC,cAAA,SAAG,0BAGPD,IAAAC,cAAA,WACID,IAAAC,cAAA,UAAQW,QAASA,IAAMiR,EAAsB,aAAa,mBACzDX,EACEnQ,OAAOoR,GAKS,IAHH7P,OAAOyB,KAAKoO,GACrBpR,OAAOL,GAAe,YAARA,GAA6B,gBAARA,GACnCuG,OAAO,CAACC,EAAKxG,IAAQwG,EAAMiL,EAAUzR,GAAM,IAGjDH,IAAI,CAAC4R,EAAW1R,IACbT,IAAAC,cAAA,OAAKS,IAAKD,EAAOG,QAASA,IAAMiR,EAAsBpR,GAAQuJ,MAAO,CAAEP,aAAc,OAAQ2I,OAAQ,YACjGpS,IAAAC,cAAA,UAAKkS,EAAUE,SACfrS,IAAAC,cAAA,SAAIkS,EAAU3Q,aACdxB,IAAAC,cAAA,UACKqC,OAAOyB,KAAKoO,GAAWpR,OAAOL,GAAe,YAARA,GAA6B,gBAARA,GAA4C,IAAnByR,EAAUzR,IAAYH,IAAIG,GAC1GV,IAAAC,cAAA,MAAIS,IAAKA,GAAI,GAAAzC,OAAKyC,EAAG,MAAAzC,OAAKkU,EAAUzR,GAAO,EAAI,IAAM,IAAEzC,OAAGkU,EAAUzR,UAQ5FV,IAAAC,cAAA,UACIW,QAvCS0R,KACjBpV,QAAQC,IAAI,uBAAwB,IAAIiU,KAuChChQ,SAAsC,IAA5BgQ,EAAmBmB,MAChC,Y,QCsDEC,MA7KKA,KAChB,MAAMrT,EAAWC,eACVqT,EAAqBC,GAA0BnT,mBAAS,GACzDoT,EAAiBC,EAAWH,IAC3BI,EAAWC,GAAgBvT,mBAAS,IACrC6M,EAAWhF,cAEXkI,EADe,IAAIjC,gBAAgBjB,EAASkB,QACrBC,IAAI,YAC1BwF,EAAOC,GAAYzT,mBAAS,IAInC2E,oBAAU,KACN,GAAGoL,EAAS,CACZ,IAAI2D,EAAM,IAAIhW,KACd+V,EAASC,EAAIzU,UAAY,IAAM8Q,KAEhC,CAACA,IAEJpL,oBAAU,KACoBvH,WACtB,GAAIoW,EAAO,CACP,MAAMnV,EAASd,YAAInB,EAAI,SAAUoX,SAC3BlG,YAAOjP,EAAQ,CACjB0R,QAASA,EACT4D,UAAW,IAAIjW,KACf4V,UAAW,OAKvBM,IACD,CAACJ,EAAOzD,IAGX,MAyBM8D,EAAoBA,CAACC,EAAYjV,KACnC0U,EAAa,IACND,EACH,CAACQ,GAAajV,KAiGtB,OACI4B,IAAAC,cAAA,OAAKC,UAAU,wBAAwB8J,MAAO,CAAEV,QAAS,OAAQgK,cAAe,SAAU/J,eAAgB,SAAUC,WAAY,WAC5HxJ,IAAAC,cAAA,OAAK+J,MAAO,CAAEuJ,OAAQ,SAAUC,UAAW,WACvCxT,IAAAC,cAAA,UAAK0S,EAAec,UAjBFA,EAkBId,GAhBlBe,UACDD,EAAQC,UAAUnT,IAAI,CAACoT,EAAUlT,IACpCT,IAAAC,cAAA,OAAKS,IAAKD,EAAOuJ,MAAO,CAAEP,aAAc,SACpCzJ,IAAAC,cAAA,SAAI0T,EAASA,UApFRA,KACjB,MAAMC,EAAaf,EAAUc,EAASzV,KAAO,GAE7C,OAAQyV,EAAShT,MACb,IAAK,SACD,OACIX,IAAAC,cAAA,WACK0T,EAASE,QAAQtT,IAAI,CAACM,EAAQJ,IAC3BT,IAAAC,cAAA,SAAOS,IAAKD,GACRT,IAAAC,cAAA,SACIU,KAAK,QACL7E,KAAM6X,EAASzV,GACfE,MAAOyC,EACPiT,QAASF,IAAe/S,EACxB4J,SAAWrK,GAAMgT,EAAkBO,EAASzV,GAAIkC,EAAE6K,OAAO7M,SAE5DyC,EACA8S,EAASI,oBAAsBtT,IAAUkT,EAASE,QAAQxX,OAAS,EAAI2D,IAAAC,cAAA,WAAS,QAKrG,IAAK,SACD,OACID,IAAAC,cAAA,WACK,IAAI+T,MAAML,EAASM,OAAOlQ,QAAQxD,IAAK2T,GACpClU,IAAAC,cAAA,SAAOS,IAAKwT,GACRlU,IAAAC,cAAA,SACIU,KAAK,QACL7E,KAAM6X,EAASzV,GACfE,MAAO8V,EAAS,EAChBJ,QAASK,SAASP,KAAgBM,EAAS,EAC3CzJ,SAAWrK,GAAMgT,EAAkBO,EAASzV,GAAIkC,EAAE6K,OAAO7M,SAE5D8V,EAAS,KAK9B,IAAK,YACD,OACIlU,IAAAC,cAAA,YACInE,KAAM6X,EAASzV,GACfE,MAAOwV,EACPnJ,SAAWrK,GAAMgT,EAAkBO,EAASzV,GAAIkC,EAAE6K,OAAO7M,OACzDmO,YAAY,mBAGxB,IAAK,SACD,OACIvM,IAAAC,cAAA,WACID,IAAAC,cAAA,aACID,IAAAC,cAAA,SACIU,KAAK,QACL7E,KAAM6X,EAASzV,GACfE,MAAM,MACN0V,QAAwB,QAAfF,EACTnJ,SAAWrK,GAAMgT,EAAkBO,EAASzV,GAAIkC,EAAE6K,OAAO7M,SAC3D,OAGN4B,IAAAC,cAAA,aACID,IAAAC,cAAA,SACIU,KAAK,QACL7E,KAAM6X,EAASzV,GACfE,MAAM,KACN0V,QAAwB,OAAfF,EACTnJ,SAAWrK,GAAMgT,EAAkBO,EAASzV,GAAIkC,EAAE6K,OAAO7M,SAC3D,OAKlB,QACI,OAAO,OAWFgW,CAAYT,KAGdF,EAAQ7N,QACR5F,IAAAC,cAAA,SAAIwT,EAAQ7N,cADhB,EAUC5F,IAAAC,cAAA,UAAQW,QAlIIjE,eACIA,WACpB,MAAMiB,EAASd,YAAInB,EAAI,SAAUoX,SAC3BhW,YAAUa,EAAQ,CACpBiV,UAAW,IAAKA,GAChBwB,SAAU,IAAIpX,QAIhBqX,GAE0C,kBAA5C1B,EAAWH,GAAqBgB,QACW,wCAAvCZ,EAAiC,sBACjCH,EAAuBD,EAAsB,GAG7CC,EAAuBD,EAAsB,GAE1CA,EAAsBG,EAAWvW,OAAS,EACjDqW,EAAuBD,EAAsB,GAE7CtT,EAAS,MA6G6B6K,MAAO,CAAEuK,UAAW,SACjD9B,IAAwBG,EAAWvW,OAAS,EAAI,2BAA6B,UApBhEoX,OCtDnBe,MAhFf,WACE,MAAOhR,EAAWxE,GAAgBO,mBAAS,KACpCC,EAAkBC,GAAuBF,mBAAS,OAClDG,EAAeC,GAAoBJ,mBAAS,KAC5CR,EAAaiE,GAAkBzD,mBAAS,IAyB/C,OAvBA2E,oBAAU,KACRxH,KACC,IAsBDsD,IAAAC,cAACwU,IAAM,KACLzU,IAAAC,cAACyU,IAAM,KACL1U,IAAAC,cAAC0U,IAAK,CAACC,KAAK,IAAIC,QACd7U,IAAAC,cAAA,OAAK+J,MAbS,CACpB8K,gBAAiB,mBACjBC,eAAgB,UAChBC,iBAAkB,YAClBC,mBAAoB,aACpBvX,OAAQ,QACRmM,MAAO,WAO0B3J,UAAU,qBACnCF,IAAAC,cAAA,OAAKC,UAAU,SACbF,IAAAC,cAAA,UAAID,IAAAC,cAAA,OAAKiV,IAAI,YAAYhV,UAAU,OAAOiV,IAAI,mCAAuC,kBACrFnV,IAAAC,cAAA,UAAI,mDAEND,IAAAC,cAACyP,IAAI,CAACC,GAAG,YAAW3P,IAAAC,cAAA,UAAQC,UAAU,eAAc,iBAAcF,IAAAC,cAAA,WAAM,qBACxED,IAAAC,cAAA,OAAKC,UAAU,gBACbF,IAAAC,cAAA,SAAGD,IAAAC,cAAA,cAAQ,uCAA4C,IAACD,IAAAC,cAAA,WAAM,gHAC9DD,IAAAC,cAAA,SAAGD,IAAAC,cAAA,cAAQ,4CAAiD,IAACD,IAAAC,cAAA,WAAM,kUACnED,IAAAC,cAAA,SAAGD,IAAAC,cAAA,cAAQ,wGAA6G,uSACxHD,IAAAC,cAAA,SAAGD,IAAAC,cAAA,cAAQ,iDAAsD,+NACjED,IAAAC,cAAA,SAAGD,IAAAC,cAAA,cAAQ,oBAAyB,kNACpCD,IAAAC,cAAA,SAAGD,IAAAC,cAAA,cAAQ,2CAAgD,+LAC3DD,IAAAC,cAAA,SAAGD,IAAAC,cAAA,cAAQ,2BAAgC,+KAC3CD,IAAAC,cAAA,SAAGD,IAAAC,cAAA,cAAQ,uBAA4B,+PACvCD,IAAAC,cAAA,SAAGD,IAAAC,cAAA,cAAQ,2CAAgD,mVAC3DD,IAAAC,cAAA,SAAGD,IAAAC,cAAA,cAAQ,sCAA2C,6KAExDD,IAAAC,cAACyP,IAAI,CAACC,GAAG,YAAW3P,IAAAC,cAAA,UAAQC,UAAU,qBAAoB,gCAC1DF,IAAAC,cAACyP,IAAI,CAACC,GAAG,YAAW3P,IAAAC,cAAA,YAAM,kBAG9BD,IAAAC,cAAC0U,IAAK,CAACC,KAAK,SAASC,QACnB7U,IAAAC,cAACpB,EAAK,CAACE,YAAaA,EAClBC,aAAcA,EACdE,uBA/CsBkW,IAC9B3V,EAAoB2V,IA+CZnW,oBA5CmBoW,IAC3B1V,EAAiB0V,QA6CbrV,IAAAC,cAAC0U,IAAK,CAACC,KAAK,WAAWC,QAAS7U,IAAAC,cAAC6C,EAAO,CAACE,eAAgBA,MACzDhD,IAAAC,cAAC0U,IAAK,CAACC,KAAK,WAAWC,QAAS7U,IAAAC,cAACsD,EAAO,CAACC,UAAWA,EAClDzE,YAAaA,EACbS,iBAAkBA,EAClBE,cAAeA,MACjBM,IAAAC,cAAC0U,IAAK,CAACC,KAAK,kBAAkBC,QAAS7U,IAAAC,cAACmG,EAAa,CAACrH,YAAaA,MACnEiB,IAAAC,cAAC0U,IAAK,CAACC,KAAK,mBAAmBC,QAAS7U,IAAAC,cAAC+L,EAAc,QACvDhM,IAAAC,cAAC0U,IAAK,CAACC,KAAK,gBAAgBC,QAAS7U,IAAAC,cAAC8M,EAAW,QACjD/M,IAAAC,cAAC0U,IAAK,CAACC,KAAK,qBAAqBC,QAAS7U,IAAAC,cAACkO,EAAgB,QAC3DnO,IAAAC,cAAC0U,IAAK,CAACC,KAAK,iBAAiBC,QAAS7U,IAAAC,cAACwP,EAAY,QACnDzP,IAAAC,cAAC0U,IAAK,CAACC,KAAK,WAAWC,QAAS7U,IAAAC,cAAC2P,EAAO,QACxC5P,IAAAC,cAAC0U,IAAK,CAACC,KAAK,iBAAiBC,QAAS7U,IAAAC,cAAC+P,EAAY,QACnDhQ,IAAAC,cAAC0U,IAAK,CAACC,KAAK,uBAAuBC,QAAS7U,IAAAC,cAACgR,EAAkB,QAC/DjR,IAAAC,cAAC0U,IAAK,CAACC,KAAK,gBAAgBC,QAAS7U,IAAAC,cAACuS,EAAW,WChF1C8C,MAZSC,IAClBA,GAAeA,aAAuBC,UACxC,6BAAqBlV,KAAKxB,IAAkD,IAAjD,OAAE2W,EAAM,OAAEC,EAAM,OAAEC,EAAM,OAAEC,EAAM,QAAEC,GAAS/W,EACpE2W,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,MCDDO,IAASC,WAAW9Z,SAAS+Z,eAAe,SACpDC,OACHjW,IAAAC,cAACD,IAAMkW,WAAU,KACflW,IAAAC,cAACuU,EAAG,QAORc,M","file":"static/js/main.a63a574f.chunk.js","sourcesContent":["import { initializeApp } from 'firebase/app';\r\nimport { getFirestore } from 'firebase/firestore';\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyD-XWrjMOmhRPjjRz-MOA1ARZN_RVwTcbc\",\r\n    authDomain: \"skincare-recipe-tool.firebaseapp.com\",\r\n    projectId: \"skincare-recipe-tool\",\r\n    storageBucket: \"skincare-recipe-tool.appspot.com\",\r\n    messagingSenderId: \"1053752399193\",\r\n    appId: \"1:1053752399193:web:caf58158f655ca8e0f2848\"\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\n\r\nexport { db };\r\n","import { collection, addDoc, doc, updateDoc } from 'firebase/firestore';\r\nimport { db } from './firebase-config'; // Ensure this path is correct for your setup\r\n\r\n// Function to get a cookie's value by its name\r\nexport const getCookie = (name) => {\r\n  const nameEQ = name + \"=\";\r\n  const ca = document.cookie.split(';');\r\n  for(let i=0; i < ca.length; i++) {\r\n    let c = ca[i];\r\n    while (c.charAt(0) === ' ') c = c.substring(1);\r\n    if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const setCookie = (name, value) => {\r\n    let expires = \"\";\r\n    const date = new Date();\r\n    date.setTime(date.getTime() + (365*24*60*60*1000));\r\n    expires = \"; expires=\" + date.toUTCString();\r\n    document.cookie = name + \"=\" + (value || \"\")  + expires + \"; path=/\";\r\n};\r\n\r\nexport const pushFirstPageLoadInfo = async () => {\r\n    const sessionId = getCookie(\"sessionId\");\r\n  \r\n    if (!sessionId) {\r\n      // No session ID cookie found, so create a new session document\r\n      const userAgent = navigator.userAgent;\r\n      const { innerWidth: width, innerHeight: height } = window;\r\n  \r\n      try {\r\n        const docRef = await addDoc(collection(db, \"sessions\"), {\r\n          firstDatetime: new Date(),\r\n          lastDateTime: new Date(),\r\n          userAgent: userAgent,\r\n          resolution: `${width}x${height}`\r\n        });\r\n        console.log(\"Session info added to Firestore with ID: \", docRef.id);\r\n  \r\n        // Save the document ID as a cookie\r\n        setCookie(\"sessionId\", docRef.id, 365); // Set the cookie to expire in 365 days\r\n      } catch (error) {\r\n        console.error(\"Error adding document: \", error);\r\n      }\r\n    } else {\r\n      // Session ID exists, update the lastDateTime\r\n      try {\r\n        const sessionRef = doc(db, \"sessions\", sessionId);\r\n        await updateDoc(sessionRef, {\r\n          lastDateTime: new Date() // Update lastDateTime to now\r\n        });\r\n        console.log(\"Session lastDateTime updated in Firestore\");\r\n      } catch (error) {\r\n        console.error(\"Error updating document: \", error);\r\n      }\r\n    }\r\n  };\r\n\r\n// Function to update session information in Firestore\r\nexport const updateSession = async (newData) => {\r\n  const sessionId = getCookie(\"sessionId\"); // Directly retrieve the sessionId cookie here\r\n  if (!sessionId) {\r\n    console.error(\"Session ID cookie not found.\");\r\n    return; // Exit if no sessionId is provided\r\n  }\r\n\r\n  const updatedData = { ...newData, lastDateTime: new Date() }; // Always include lastDateTime in the update\r\n\r\n  try {\r\n    const sessionRef = doc(db, \"sessions\", sessionId);\r\n    await updateDoc(sessionRef, updatedData);\r\n    console.log(\"Session updated successfully\");\r\n  } catch (error) {\r\n    console.error(\"Error updating session: \", error);\r\n  }\r\n};\r\n","import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { updateSession } from './sessionUtils';\r\n\r\n\r\nfunction Goals({ productData, setGoalsData, setSelectedMoodsApp, setIncludeFragranceApp }) {\r\n  const navigate = useNavigate();\r\n  const [selectedOptions, setSelectedOptions] = useState([]);\r\n  const [includeFragrance, setIncludeFragrance] = useState('no');\r\n  const [selectedMoods, setSelectedMoods] = useState([]);\r\n\r\n  var skincareGoals = [];\r\n\r\n  if (productData === \"Hair and Scalp Oil\") {\r\n    skincareGoals = [\"Dry scalp\", \"Hair growth\", \"Hair shine\", \"Hair strength\"];\r\n  } else if (productData === \"Body Moisturizing Cream or Body Butter\") {\r\n    skincareGoals = [\"Dry skin\", \"Sensitive Skin\", \"Sun Protection\", \"Calloused Skin\", \"Stretch marks\", \"Eczema\", \"Aging or age spots\"];\r\n  } else {\r\n    skincareGoals = [\r\n      \"Adult acne\", \"Dry skin\", \"Sensitive Skin\", \"Wrinkles\",\r\n      \"Puffiness\", \"Redness\", \"Sun Protection\", \"Aging or age spots\", \"Large pores\",\r\n      \"Eczema\"\r\n    ];\r\n  }\r\n\r\n\r\n\r\n  /*\r\n  const goalsToIngredients = {\r\n    \"Adult acne\": [\"Tea Tree Oil\", \"Green Tea\", \"Honey\", \"Apple Cider Vinegar\", \"Zinc Oxide\"],\r\n    \"Dry skin\": [\"Shea Butter\", \"Cocoa Butter\", \"Hyaluronic Acid\", \"Olive Oil\", \"Coconut Oil\"],\r\n    \"Sensitive Skin\": [\"Aloe Vera Gel\", \"Oat Milk\", \"Sunflower Oil\", \"Jojoba Oil\", \"Cucumber Juice\"],\r\n    \"Wrinkles\": [\"Argan Oil\", \"Retinol\", \"Hyaluronic Acid\", \"Vitamin C\", \"Rosemary Oil\"],\r\n    \"Puffiness\": [\"Cucumber Juice\", \"Green Tea\", \"Aloe Vera Gel\", \"Peppermint Oil\", \"Tea Tree Oil\"],\r\n    \"Redness\": [\"Aloe Vera Gel\", \"Cucumber Juice\", \"Green Tea\", \"Niacinamide (Vitamin B3)\", \"Oat Milk\"],\r\n    \"Sun Protection\": [\"Zinc Oxide\", \"Vitamin C\", \"Vitamin E\", \"Coconut Oil\", \"Shea Butter\"],\r\n    \"Aging or age spots\": [\"Vitamin C\", \"Retinol\", \"Hyaluronic Acid\", \"Argan Oil\", \"Niacinamide (Vitamin B3)\"],\r\n    \"Large pores\": [\"Apple Cider Vinegar\", \"Green Tea\", \"Clay (if available, not in list)\", \"Honey\", \"Tea Tree Oil\"],\r\n    \"Atopic dermatitis\": [\"Oat Milk\", \"Sunflower Oil\", \"Shea Butter\", \"Aloe Vera Gel\", \"Cocoa Butter\"]\r\n};*/\r\n\r\n\r\n  const moods = [\r\n    \"Fresh\", \"Relaxing\", \"Invigorated\", \"Pampered\", \"Focused\", \"Beautiful\", \"Confident\", \"Rejuvenated\", \"Empowered\"\r\n  ];\r\n\r\n  const toggleOption = (option) => {\r\n    const newSelectedOptions = selectedOptions.includes(option)\r\n      ? selectedOptions.filter(item => item !== option)\r\n      : [...selectedOptions, option];\r\n\r\n    setSelectedOptions(newSelectedOptions);\r\n  };\r\n\r\n  const isOptionSelected = (option) => {\r\n    return selectedOptions.includes(option);\r\n  };\r\n\r\n  const toggleMood = (mood) => {\r\n    const newSelectedMoods = selectedMoods.includes(mood)\r\n      ? selectedMoods.filter(item => item !== mood)\r\n      : [...selectedMoods, mood];\r\n\r\n    setSelectedMoods(newSelectedMoods);\r\n  };\r\n\r\n  const isMoodSelected = (mood) => {\r\n    return selectedMoods.includes(mood);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    // Prepare the data to send to Firestore\r\n    const sessionData = {\r\n      selectedOptions,\r\n      includeFragrance,\r\n      selectedMoods,\r\n    };\r\n  \r\n    // Call updateSession to update Firestore document and navigate upon completion\r\n    updateSession(sessionData).then(() => {\r\n      setGoalsData(selectedOptions); // Assuming you still want to do this for local state\r\n      setSelectedMoodsApp(selectedMoods); // Assuming you still want to do this for local state\r\n      setIncludeFragranceApp(includeFragrance); // Assuming you still want to do this for local state\r\n      navigate('/summary');\r\n    });\r\n  };\r\n  \r\n\r\n  return (\r\n    <div className=\"body-container\">\r\n      <h2>Select Your Skincare Goals/Concerns</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        {skincareGoals.map((goal, index) => (\r\n          <button\r\n            key={index}\r\n            type=\"button\"\r\n            onClick={() => toggleOption(goal)}\r\n            className={`goals-button ${isOptionSelected(goal) ? 'selected' : ''}`}\r\n          >\r\n            {goal}\r\n          </button>\r\n        ))}\r\n\r\n        {/* Fragrance selection */}\r\n        <div>\r\n          <h3>Include natural fragrances?</h3>\r\n          <button type=\"button\" onClick={() => setIncludeFragrance('yes')} className={`goals-button ${includeFragrance === 'yes' ? 'selected' : ''}`}>Yes</button>\r\n          <button type=\"button\" onClick={() => setIncludeFragrance('no')} className={`goals-button ${includeFragrance === 'no' ? 'selected' : ''}`}>No</button>\r\n        </div>\r\n\r\n        {/* Mood selection, shown if fragrance is 'yes' */}\r\n        {includeFragrance === 'yes' && (\r\n          <div>\r\n            <h3>How do you want the fragrance to make you feel?</h3>\r\n            {moods.map((mood, index) => (\r\n              <button\r\n                key={index}\r\n                type=\"button\"\r\n                onClick={() => toggleMood(mood)}\r\n                className={`goals-button ${isMoodSelected(mood) ? 'selected' : ''}`}\r\n              >\r\n                {mood}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        <button className=\"submit\" type=\"submit\" disabled={selectedOptions.length === 0 || (includeFragrance === 'yes' && selectedMoods.length === 0)}>Next</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Goals;\r\n","import { skincareProducts } from \"./Product\";\r\n\r\nconst ingredients = {\r\n    \"Sunflower Oil\": {\r\n        phase: \"oil\",\r\n        hlb: 0,\r\n        description: \"Moisturizer, rich in Vitamin E, non-comedogenic, suitable for sensitive skin.\",\r\n        good_for: [\"Sensitive Skin\", \"Dry skin\"],\r\n        bad_for: [],\r\n        cost: \"$20/half gallon\",\r\n        density: 0.92,\r\n        cost_per_g: 0.01148,\r\n    },\r\n    \"Jojoba Oil\": {\r\n        phase: \"oil\",\r\n        hlb: 0,\r\n        description: \"Moisturizer, mimics natural skin oils, balances sebum production, good for acne-prone skin.\",\r\n        good_for: [\"Adult acne\", \"Dry skin\", \"Sensitive Skin\"],\r\n        bad_for: [],\r\n        cost: \"$9.99/8oz\",\r\n        density: 0.87,\r\n        cost_per_g: 0.0485,\r\n    },\r\n    \"Argan Oil\": {\r\n        phase: \"oil\",\r\n        hlb: 11,\r\n        description: \"Rich in antioxidants and Vitamin E, moisturizes, reduces signs of aging, improves skin elasticity and enhances hair shine.\",\r\n        good_for: [\"Aging or age spots\", \"Dry skin\", \"Wrinkles\"],\r\n        bad_for: [],\r\n        cost: \"$54.99/32oz\",\r\n        density: 0.91,\r\n        cost_per_g: 0.0639,\r\n        buy_again_url:\"https://www.organicpureoil.com/product/pure-1-oz-organic-argan-oil-extra-virgin-unrefined-cold-pressed/\",\r\n    },\r\n    \"Shea Butter\": {\r\n        phase: \"oil\",\r\n        hlb: 8,\r\n        description: \"Moisturizer, rich in fatty acids and vitamins, anti-inflammatory, helps with skin healing.\",\r\n        good_for: [\"Dry skin\", \"Atopic dermatitis\"],\r\n        bad_for: [\"Adult acne\"], // due to its comedogenic properties\r\n        cost: \"$9.99/16oz\",\r\n        density: 0.927,\r\n        cost_per_g: 0.0228,\r\n    },\r\n    \"Cocoa Butter\": {\r\n        phase: \"oil\",\r\n        hlb: 8,\r\n        description: \"Moisturizer, high in fatty acids, helps to hydrate and nourish the skin, reduces the appearance of scars.\",\r\n        good_for: [\"Dry skin\", \"Wrinkles\"],\r\n        bad_for: [\"Adult acne\"],\r\n        cost: \"$1/oz\",\r\n        cost_per_g: 0.0338,\r\n        buy_again_url: \"https://simply-ingredients.com/collections/butters-waxes/products/fair-trade-cocoa-butter?variant=37889946484922\",\r\n    },\r\n    \"Coconut Oil\": {\r\n        phase: \"oil\",\r\n        hlb: 8,\r\n        description: \"Moisturizes skin and hair, rich in fatty acids and antioxidants. Can be comedogenic (acne-causing) for some.\",\r\n        good_for: [\"Dry skin\"],\r\n        bad_for: [\"Adult acne\"], // high comedogenic rating\r\n        cost: \"$6.96/15oz\",\r\n        density: 0.924,\r\n        cost_per_g: 0.0170,\r\n    },\r\n    \"Pecan Oil\": {\r\n        phase: \"oil\",\r\n        hlb: 0,\r\n        description: \"Moisturizer, rich in antioxidants, promotes skin and hair health, hydrating properties.\",\r\n        good_for: [\"Dry skin\"],\r\n        bad_for: [],\r\n        cost: \"$17/8oz\",\r\n        density: 0.95,\r\n        cost_per_g: 0.0756,\r\n    },\r\n    \"Pumpkin Seed Oil\": {\r\n        phase: \"oil\",\r\n        hlb: 0,\r\n        description: \"Rich in zinc and vitamins, improves skin tone, fights acne, and soothes sensitive skin.\",\r\n        good_for: [\"Adult acne\", \"Sensitive Skin\"],\r\n        bad_for: [],\r\n        cost: \"$3/2oz\",\r\n        density: 0.95,\r\n        cost_per_g: 0.0534\r\n    },\r\n    /*\"Benne Seed Oil\": {\r\n        phase: \"oil\",\r\n        hlb: 0,\r\n        description: \"Rich in linoleic acid, nourishes skin and strengthens hair.\",\r\n        good_for: [\"Dry skin\"],\r\n        bad_for: []\r\n    },\r\n    \"Okra Seed Oil\": {\r\n        phase: \"oil\",\r\n        hlb: 0,\r\n        description: \"Promotes a healthy scalp and is rich in unsaturated fats. (comedogenic rating estimated)\",\r\n        good_for: [\"Sensitive Skin\"],\r\n        bad_for: [\"Adult acne\"]\r\n    },*/\r\n    \"Olive Oil\": {\r\n        phase: \"oil\",\r\n        hlb: 0,\r\n        description: \"Moisturizer, rich in vitamins and antioxidants, promotes skin and hair health, but can be comedogenic (acne-causing) for some.\",\r\n        good_for: [\"Dry skin\"],\r\n        bad_for: [\"Adult acne\"],\r\n        cost: \"$18.99/68oz\",\r\n        density: 0.9,\r\n        cost_per_g: 0.0105,\r\n    },\r\n    /*\"Almond Oil\": {\r\n        phase: \"oil\",\r\n        hlb: 0,\r\n        description: \"Gentle on skin, rich in vitamin E, and excellent for dry skin.\",\r\n        good_for: [\"Dry skin\", \"Sensitive Skin\"],\r\n        bad_for: []\r\n    },*/\r\n    \"Distilled Water\": {\r\n        phase: \"aqueous\",\r\n        hlb: 20,\r\n        description: \"Hydrates and serves as a base for water-soluble ingredients.\",\r\n        good_for: [],\r\n        bad_for: [],\r\n        cost_per_g: 0.0001,\r\n        endogenous: true,\r\n    },\r\n    \"Green Tea\": {\r\n        phase: \"aqueous\",\r\n        hlb: 20,\r\n        description: \"Antioxidant-rich, reduces inflammation and redness, can protect against environmental stressors and promotes skin healing.\",\r\n        good_for: [\"Redness\", \"Puffiness\", \"Sensitive Skin\"],\r\n        bad_for: [],\r\n        cost_per_g: 0.0070,\r\n    },\r\n    \"Sea Salt\": {\r\n        phase: \"aqueous\",\r\n        hlb: 20,\r\n        description: \"Rich in minerals, helps in detoxifying and cleansing the skin, can balance oil production.\",\r\n        good_for: [\"Large pores\", \"Atopic dermatitis\"],\r\n        bad_for: [\"Dry skin\"] // can be drying\r\n    },\r\n    \"Aloe Vera Gel\": {\r\n        phase: \"aqueous\",\r\n        hlb: 20,\r\n        description: \"Soothes skin irritations, hydrates, promotes healing, good for sunburns and inflammation\",\r\n        good_for: [\"Sensitive Skin\", \"Sun Protection\", \"Redness\"],\r\n        bad_for: [],\r\n        cost: \"9.99/300ml\",\r\n        density: 1.2,\r\n        cost_per_g: 0.02775 \r\n    },\r\n    \"Glycerin\": {\r\n        phase: \"aqueous\",\r\n        hlb: 20,\r\n        description: \"Humectant, draws moisture into the skin, suitable for all skin types, enhances skin hydration.\",\r\n        good_for: [\"Dry skin\"],\r\n        bad_for: [],\r\n        cost: \"3.66/4oz\",\r\n        density: 1.26,\r\n        cost_per_g: 0.0246,\r\n        endogenous: true,\r\n    },\r\n    \"Honey\": {\r\n        phase: \"aqueous\",\r\n        hlb: 20,\r\n        description: \"Natural humectant, antibacterial, great for acne treatment and hydration, soothing for the skin.\",\r\n        good_for: [\"Dry skin\", \"Adult acne\"],\r\n        bad_for: []\r\n    },\r\n    \"Apple Cider Vinegar\": {\r\n        phase: \"aqueous\",\r\n        hlb: 20,\r\n        description: \"Balances skin's pH, astringent properties, good for acne-prone skin but can be drying.\",\r\n        good_for: [\"Adult acne\", \"Large pores\"],\r\n        bad_for: [\"Dry skin\"] // can be drying\r\n    },\r\n    \"Cucumber Juice\": {\r\n        phase: \"aqueous\",\r\n        hlb: 20,\r\n        description: \" Hydrating, soothing, rich in vitamins and minerals, good for puffiness and calming irritated skin.\",\r\n        good_for: [\"Puffiness\", \"Sensitive Skin\"],\r\n        bad_for: []\r\n    },\r\n    \"Oat Milk\": {\r\n        phase: \"aqueous\",\r\n        hlb: 20,\r\n        description: \"Contains lipids and water-absorbing substances, providing moisturizing and soothing benefits. Helps in reducing inflammation\",\r\n        good_for: [\"Dry skin\", \"Sensitive Skin\"],\r\n        bad_for: [],\r\n        cost_per_g: 0.0008,\r\n    },\r\n    \"Beeswax\": {\r\n        phase: \"emulsifier\",\r\n        hlb: 12,\r\n        description: \" Emulsifier and stabilizer in formulations, creates a protective barrier on the skin, retains moisture.\",\r\n        good_for: [\"Dry skin\"],\r\n        bad_for: [],\r\n        cost_per_g: 0.1706\r\n    },\r\n    \"Lecithin\": {\r\n        phase: \"emulsifier\",\r\n        hlb: 8,\r\n        description: \"Natural stabilizer, thickens formulas and creates protective barrier on skin.\",\r\n        good_for: [],\r\n        bad_for: [],\r\n        cost_per_g: 0.0884,\r\n        endogenous: true,\r\n    },\r\n    \"Cetearyl Alcohol\": {\r\n        phase: \"emulsifier\",\r\n        hlb: 16,\r\n        description: \"A waxy fatty alcohol used as an emulsifier, thickener and stabilizer in creams and lotions. Extracted from Coconut and Palm Kernel oils\",\r\n        good_for: [],\r\n        bad_for: [\"Sensitive Skin\"], // can be irritating for some sensitive skins\r\n        cost_per_g: 0.0439,\r\n    },\r\n    \"Castille Soap\": {\r\n        phase: \"surfactant\",\r\n        hlb: 10,\r\n        description: \"Gentle and versatile cleanser, made from olive and hemp oils, suitable for sensitive skin.\",\r\n        good_for: [\"Sensitive Skin\"],\r\n        bad_for: [],\r\n        density: 1.04,\r\n        cost_per_g: 0.0172,\r\n    },\r\n    \"Zinc Oxide\": {\r\n        phase: \"additive\",\r\n        hlb: 20,\r\n        max_percent: 25,\r\n        default_percent: 10,\r\n        description: \"Sunscreen agent, provides broad-spectrum UV protection, also known for its soothing and astringent properties.\",\r\n        good_for: [\"Sun Protection\"],\r\n        bad_for: [],\r\n        cost_per_g: 0.0958,\r\n    },\r\n    \"Hyaluronic Acid\": {\r\n        phase: \"additive\",\r\n        hlb: 20,\r\n        max_percent: 2,\r\n        default_percent: 0.5,\r\n        description: \"Powerful humectant, helps to hydrate and plump the skin by retaining moisture, reduces the appearance of fine lines and wrinkles.\",\r\n        good_for: [\"Dry skin\", \"Wrinkles\", \"Aging or age spots\"],\r\n        bad_for: [],\r\n        cost_per_g: 0.4639,\r\n        endogenous: true,\r\n    },\r\n    \"Retinol\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 1,\r\n        default_percent: 0.1,\r\n        description: \"Retinyl Palmitate is an ester of Retinol (Vitamin A) and Palmitic Acid.  It is a powerful antioxidant that may help boosts collagen in the skin, minimizes fine lines and wrinkles, as well as smooths the texture of the skin. Should be used intermittently until skin aclimates to it. Sun sensitizing, so should only be used at night.\",\r\n        good_for: [\"Wrinkles\", \"Aging or age spots\"],\r\n        bad_for: [\"Sensitive Skin\"], // can be \r\n        cost_per_g: 0.4282,\r\n        deprecated: true,\r\n    },\r\n    \"Retinyl Palmitate\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 1,\r\n        default_percent: 0.1,\r\n        description: \"An ester of Retinol (Vitamin A) and Palmitic Acid, it is the weakest form of Retinol. It is a powerful antioxidant that may help boosts collagen in the skin, minimizes fine lines and wrinkles, as well as smooths the texture of the skin. Should be used intermittently until skin aclimates to it. Sun sensitizing, so should only be used at night.\",\r\n        good_for: [\"Wrinkles\", \"Aging or age spots\"],\r\n        bad_for: [\"Sensitive Skin\"], // can be \r\n        cost_per_g: 0.4282,\r\n        endogenous: true,\r\n    },\r\n    \"Vitamin C\": {\r\n        phase: \"additive\",\r\n        hlb: 20,\r\n        max_percent: 20,\r\n        default_percent: 5,\r\n        description: \"Antioxidant, aids in skin repair and regeneration, can help in reducing pigmentation and promoting collagen production.\",\r\n        good_for: [\"Aging or age spots\", \"Sun Protection\"],\r\n        bad_for: [],\r\n        cost_per_g: 0.0288,\r\n        endogenous: true,\r\n    },\r\n    \"Vitamin E\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 1,\r\n        default_percent: 0.5,\r\n        description: \"Antioxidant, helps in protecting the skin from environmental damage, moisturizes, and heals. Extends shelf life of oils.\",\r\n        good_for: [\"Sun Protection\", \"Aging or age spots\"],\r\n        bad_for: [],\r\n        density: 0.95,\r\n        cost_per_g: 0.3505,\r\n        endogenous: true,\r\n    },\r\n    \"Niacinamide (Vitamin B3)\": {\r\n        phase: \"additive\",\r\n        hlb: 20,\r\n        max_percent: 5,\r\n        default_percent: 2,\r\n        description: \"Improves appearance of enlarged pores, uneven skin tone, fine lines. Reduces redness and irritation.\",\r\n        good_for: [\"Large pores\", \"Wrinkles\", \"Redness\"],\r\n        bad_for: [],\r\n        cost_per_g: 0.3567,\r\n        endogenous: true,\r\n    },\r\n    \"Lavender Oil\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 1,\r\n        default_percent: 0.5,\r\n        description: \"Calming and relaxing, and can be used to soothe irritated skin. Anti-inflammatory and antimicrobial properties.\",\r\n        good_for: [\"Sensitive Skin\", \"Redness\"],\r\n        bad_for: [],\r\n        density: 0.885,\r\n        cost_per_g: 1.1578,\r\n    },\r\n    \"Rosemary Oil\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 2,\r\n        default_percent: 1,\r\n        description: \"Rejuvenates skin, improves hair growth and scalp health, and has antioxidant properties. Improves circulation and can help with puffiness.\",\r\n        good_for: [\"Aging or age spots\"],\r\n        bad_for: [\"Sensitive Skin\"], // can be irritating for some people\r\n        density: 0.895,\r\n        cost_per_g: 0.1214\r\n    },\r\n    \"Tea Tree Oil\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 2,\r\n        default_percent: 1,\r\n        description: \"Antimicrobial and anti-inflammatory, very effective against acne, helps in cleansing the skin.\",\r\n        good_for: [\"Adult acne\"],\r\n        bad_for: [\"Dry skin\"], // can be drying if overused\r\n        density: 0.878,\r\n        cost_per_g: 0.3792,\r\n    },\r\n    \"Jasmine Oil\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 1,\r\n        default_percent: 0.5,\r\n        description: \"Moisturizes, soothes, often used for its fragrance and hydrating properties.\",\r\n        good_for: [\"Dry skin\"],\r\n        bad_for: [],\r\n        density: 0.947,\r\n        cost_per_g: 2.7434, // expensive\r\n    },\r\n    \"Eucalyptus Oil\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 2,\r\n        default_percent: 1,\r\n        description: \"Antiseptic and anti-inflammatory properties, good for healing. Refreshing scent.\",\r\n        good_for: [\"Adult acne\"],\r\n        bad_for: [\"Sensitive Skin\", \"Dry skin\"], // can be irritating and drying\r\n        densitY: 0.914 ,\r\n        cost_per_g: 0.1530,\r\n    },\r\n    \"Peppermint Oil\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 1,\r\n        default_percent: 0.5,\r\n        description: \"Cooling sensation and refreshing scent. It has antiseptic and antimicrobial properties. Can help with acne and oily skin, but can be irritating.\",\r\n        good_for: [\"Adult acne\", \"Puffiness\"],\r\n        bad_for: [\"Sensitive Skin\", \"Redness\"], // can be irritating and cause a burning sensation for sensitive skin types\r\n        density: 0.898,\r\n        cost_per_g: 0.0942,\r\n    },\r\n    \"Pine Oil\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 1,\r\n        default_percent: 0.5,\r\n        description: \"Known for its invigorating and refreshing scent, has antimicrobial and anti-inflammatory properties. It's often used in skincare for its soothing effects on the skin and its ability to help with respiratory issues.\",\r\n        good_for: [\"Atopic dermatitis\", \"Adult acne\"],\r\n        bad_for: [\"Sensitive Skin\"], // can be irritating due to its potent nature\r\n        cost_per_g: 1.155,\r\n    },\r\n    \"Cedar Oil\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 1,\r\n        default_percent: 0.5,\r\n        description: \"With its woodsy aroma, is known for its calming and grounding effects. It has antiseptic, anti-inflammatory, and astringent properties, making it beneficial for skin conditions like acne and aiding in soothing irritated skin.\",\r\n        good_for: [\"Adult acne\", \"Atopic dermatitis\"],\r\n        bad_for: [\"Sensitive Skin\"], // may cause irritation in higher concentrations or sensitive individuals\r\n        density: 0.952,\r\n        cost_per_g: 1.7507\r\n    },\r\n    \"Rosehip Seed Oil\": {\r\n        phase: \"oil\",\r\n        hlb: 0,\r\n        max_percent: 10,\r\n        default_percent: 2,\r\n        description: \"Rosehip Seed Oil is rich in essential fatty acids and antioxidants. It's renowned for its skin-regenerative properties, aiding in reducing scars and fine lines. High in vitamins A and C, it helps in evening out skin tone and improving hydration.\",\r\n        good_for: [\"Wrinkles\", \"Dry skin\", \"Sun Protection\", \"Aging or age spots\"],\r\n        bad_for: [], // Generally well-tolerated, but always patch test\r\n        density: 0.92,\r\n        cost_per_g: 0.6159,\r\n    },\r\n\r\n    \"Geranium Oil\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 2,\r\n        default_percent: 0.5,\r\n        description: \"Geranium Oil, known for its floral scent, is used for its astringent, antiseptic, and anti-inflammatory properties. It helps in balancing sebum production, enhancing skin elasticity, and promoting the healing of scars and spots.\",\r\n        good_for: [\"Adult acne\", \"Large pores\", \"Wrinkles\"],\r\n        bad_for: [\"Sensitive Skin\"], // Can be irritating for some sensitive skin types\r\n        density: 0.887,\r\n        cost_per_g: 1.5031,\r\n    },\r\n\r\n    \"Carrot Seed Oil\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 5,\r\n        default_percent: 1,\r\n        description: \"Carrot Seed Oil is valued for its antioxidant properties and high vitamin A content. It's considered excellent for sun protection, rejuvenating aged skin, and promoting skin healing. Also known for its ability to rejuvenate and regenerate skin tissues.\",\r\n        good_for: [\"Aging or age spots\", \"Sun Protection\", \"Wrinkles\"],\r\n        bad_for: [\"Sensitive Skin\"], // Can be potent; patch test recommended\r\n        density: 0.92,\r\n        cost_per_g: 1.5942\r\n    },\r\n    /*\"Cedarwood Oil\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 1,\r\n        default_percent: 0.5,\r\n        description: \"Cedarwood oil is used for its soothing effect on the skin and its woodsy, warm fragrance.\",\r\n        good_for: [\"Dry skin\"],\r\n        bad_for: []\r\n    },\r\n    \"Noble Fir Oil\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 1,\r\n        default_percent: 0.5,\r\n        description: \"Noble Fir oil is known for its crisp, clean fragrance and can help to refresh and invigorate the skin.\",\r\n        good_for: [],\r\n        bad_for: []\r\n    },\r\n    \"Ponderosa Pine Oil\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 1,\r\n        default_percent: 0.5,\r\n        description: \"Ponderosa Pine oil, with its fresh forest scent, is used for its invigorating properties and potential skin benefits.\",\r\n        good_for: [],\r\n        bad_for: []\r\n    },\r\n    \"Turmeric\": {\r\n        phase: \"additive\",\r\n        hlb: 20,\r\n        max_percent: 1,\r\n        default_percent: 0.5,\r\n        description: \" Anti-inflammatory, antimicrobial, helps in improving skin tone and reducing scars.\",\r\n        good_for: [\"Redness\", \"Adult acne\", \"Atopic dermatitis\"],\r\n        bad_for: []\r\n    },\r\n     \"Cinnamon\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 0.5,\r\n        default_percent: 0.2,\r\n        description: \"Antimicrobial, stimulates blood flow, but can be irritating to the skin so should be used cautiously.\",\r\n        good_for: [\"Adult acne\"],\r\n        bad_for: [\"Sensitive Skin\", \"Dry skin\"] // potential irritant\r\n    },\r\n    \"Black Pepper\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 0.5,\r\n        default_percent: 0.2,\r\n        description: \"Antioxidant, stimulating, enhances blood circulation, but can be irritating to sensitive skin.\",\r\n        good_for: [\"Aging or age spots\"],\r\n        bad_for: [\"Sensitive Skin\"] // can be irritating\r\n    },\r\n    \"Nutmeg\": {\r\n        phase: \"additive\",\r\n        hlb: 0,\r\n        max_percent: 0.5,\r\n        default_percent: 0.2,\r\n        description: \"Nutmeg, with its anti-inflammatory and antibacterial properties, is used in small amounts to soothe skin and improve its appearance.\",\r\n        good_for: [\"Redness\", \"Atopic dermatitis\"],\r\n        bad_for: [\"Sensitive Skin\"] // can be irritating in higher concentrations\r\n    },*/\r\n    \"Tepezcohuite Mimosa Tenuiflora Infusion\": {\r\n        phase: \"aqueous\",\r\n        hlb: 20, \r\n        max_percent: 10,\r\n        default_percent: 5,\r\n        description: \"Rich in tannins and antioxidants, known for its healing, regenerative, and antimicrobial properties. Used to soothe skin conditions, promote wound healing, and provide anti-aging benefits. Also known as Jurema.\",\r\n        good_for: [\"Atopic dermatitis\", \"Wrinkles\", \"Redness\"],\r\n        bad_for: [\"Sensitive Skin\"] // can be irritating due to tannins\r\n    }\r\n\r\n\r\n};\r\n\r\nexport const getFilteredIngredientList = (productName) => {\r\n    return Object.keys(ingredients) // Get the keys of the object.\r\n        .filter(ingredient => !skincareProducts[productName].bannedIngredients.includes(ingredient)) // Filter keys based on their values.\r\n        .filter(ingredient => ingredients[ingredient].deprecated !== true) // Filter out deprecated ingredients\r\n        .reduce((acc, key) => {\r\n            acc[key] = ingredients[key]; // Add the filtered keys to a new object.\r\n            return acc;\r\n        }, {});\r\n    //return ingredients.filter(ingredient => skincareProducts[productName].bannedIngredients.includes(ingredient));\r\n}\r\n\r\nexport const getFormatedIngredientsList = () => {\r\n        let formattedString = \"\";\r\n    \r\n        Object.keys(ingredients).forEach((key, index, array) => {\r\n          formattedString += key;\r\n    \r\n          if (ingredients[key].hasOwnProperty('default_percent') || ingredients[key].hasOwnProperty('max_percent')) {\r\n            formattedString += \" (\";\r\n    \r\n            if (ingredients[key].hasOwnProperty('default_percent')) {\r\n              formattedString += `default: ${ingredients[key].default_percent}`;\r\n              if (ingredients[key].hasOwnProperty('max_percent')) {\r\n                formattedString += \", \";\r\n              }\r\n            }\r\n    \r\n            if (ingredients[key].hasOwnProperty('max_percent')) {\r\n              formattedString += `max: ${ingredients[key].max_percent}`;\r\n            }\r\n    \r\n            formattedString += \")\";\r\n          }\r\n    \r\n          if (index < array.length - 1) {\r\n            formattedString += \", \";\r\n          }\r\n        });\r\n    \r\n        return formattedString;\r\n      \r\n}\r\n\r\nexport default ingredients;\r\n\r\n\r\n","import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport ingredients from './ingredients';\r\nimport { updateSession } from './sessionUtils';\r\n\r\nconst getAqueousIngredients = () => {\r\n    const aqueousIngredients = [];\r\n    Object.entries(ingredients).forEach(([key, ingredient]) => {\r\n        if (ingredient.hlb > 16) {\r\n            aqueousIngredients.push(key);\r\n        }\r\n    });\r\n    return aqueousIngredients;\r\n};\r\n\r\nexport const skincareProducts = {\r\n    \"Daytime Face Moisturizing Cream with SPF\": {\r\n        description: \"An invigorating morning cream that hydrates your skin while providing sun protection with natural zinc oxide, perfect for applying after your morning cleanse to keep your skin soft and shielded throughout the day.\",\r\n        bannedIngredients: [\"Retinyl Palmitate\"],\r\n        mustIncludeIngredients: [\"Zinc Oxide\"],\r\n    },\r\n    \"AM/PM Face Moisturizing Cream (No SPF)\": {\r\n        description: \"Ideal for night-time nourishment or for daytime use under your preferred sunscreen, design a cream that will deeply moisturizes your skin, leaving it feeling smooth and refreshed\",\r\n        bannedIngredients: [\"Retinyl Palmitate\"],\r\n        mustIncludeIngredients: [],\r\n    },\r\n    \"Before Bed Face Moisturizing Cream\": {\r\n        description: \"A deeply nourishing cream that will hydrate your skin while you sleep, leaving it feeling soft and refreshed in the morning.\",\r\n        bannedIngredients: [],\r\n        mustIncludeIngredients: [],\r\n    },\r\n    \"Body Moisturizing Cream or Body Butter\": {\r\n        description: \"Build a deeply hydrading and nourishing to lock in moisture and rejuvenate the skin. Body moisturizers are typically richer and thicker in texture than facial moisturizers, designed to hydrate the less sensitive, more robust skin of the body.\",\r\n        bannedIngredients: [],\r\n        mustIncludeIngredients: [],\r\n    },\r\n    \"Face Oil\": {\r\n        description: \"Formulate an oil to deeply nourish and rejuvenate your skin, best used in combination with a separate SPF product during the day to ensure full sun protection while maintaining radiant skin.\",\r\n        bannedIngredients: getAqueousIngredients(),\r\n        mustIncludeIngredients: [],\r\n    },\r\n    \"Hair and Scalp Oil\": {\r\n        description: \"Formulate a soothing and revitalizing hair and scalp oil to nourish your scalp, strengthen hair roots, and add a healthy shine to your hair.  Use as a pre-shampoo treatment or as a leave-in conditioner.\",\r\n        bannedIngredients: getAqueousIngredients(),\r\n        mustIncludeIngredients: [],\r\n    },\r\n};\r\n\r\nfunction Product({ setProductData }) {\r\n    const navigate = useNavigate();\r\n    const [selectedProduct, setSelectedProduct] = useState('');\r\n\r\n    const aqueousIngredients = getAqueousIngredients();\r\n\r\n\r\n\r\n    \r\n\r\n    console.log(aqueousIngredients);\r\n\r\n    /*\r\n        \"Daytime Face Moisturizing Cream with SPF\": \"An invigorating morning cream that hydrates your skin while providing sun protection with natural zinc oxide, perfect for applying after your morning cleanse to keep your skin soft and shielded throughout the day.\",\r\n        \"AM/PM Face Moisturizing Cream (No SPF)\": \"Ideal for night-time nourishment or for daytime use under your preferred sunscreen, design a cream that will deeply moisturizes your skin, leaving it feeling smooth and refreshed\",\r\n        \"Before Bed Face Moisturizing Cream\": \"A deeply nourishing cream that will hydrate your skin while you sleep, leaving it feeling soft and refreshed in the morning.\",\r\n        \"Body Moisturizing Cream or Body Butter\": \"Build a deeply hydrading and nourishing to lock in moisture and rejuvenate the skin. Body moisturizers are typically richer and thicker in texture than facial moisturizers, designed to hydrate the less sensitive, more robust skin of the body.\",\r\n        //toner: \"Applied after cleansing, toner helps to remove any remaining impurities and balances the pH of the skin.\",\r\n        //serum: \"Highly concentrated with active ingredients, serums target specific skin concerns such as aging, hydration, or brightening.\",\r\n        //moisturizer: \"Hydrates the skin and locks in moisture. It can come in various forms like lotions, creams, and gels.\",\r\n        //sunscreen: \"Protects the skin from harmful UV rays. It's essential for preventing sun damage, aging, and skin cancer.\",\r\n        // exfoliant: \"Removes dead skin cells from the surface of the skin, promoting a smoother and clearer complexion.\",\r\n        //eyeCream: \"Specifically formulated for the delicate eye area, it targets concerns like dark circles, puffiness, and wrinkles.\",\r\n        //mask: \"Used occasionally to address specific skin concerns. Masks can hydrate, detoxify, or provide anti-aging benefits.\",\r\n        //\"Lotion\" : \"A lightweight moisturizer, often used for normal to oily skin, providing hydration without being too heavy.\",\r\n        //\"Cream\": \"Thicker than lotion, creams are ideal for dry skin as they provide more intensive moisturization.\",\r\n        //\"Butter\": \"Even thicker than creams, butters are used for very dry skin areas, providing deep nourishment and hydration.\",\r\n        //\"Balm\": \"A dense, oil-based product, balms are used for intense healing and protection, often in specific areas.\",\r\n        \"Face Oil\": \"Formulate an oil to deeply nourish and rejuvenate your skin, best used in combination with a separate SPF product during the day to ensure full sun protection while maintaining radiant skin.\",\r\n        \"Hair and Scalp Oil\":\"Formulate a soothing and revitalizing hair and scalp oil to nourish your scalp, strengthen hair roots, and add a healthy shine to your hair.  Use as a pre-shampoo treatment or as a leave-in conditioner.\",\r\n        //cleanser: \"Used to remove dirt, oil, and makeup from the skin. It helps in keeping the pores clear and the skin clean.\",\r\n    };*/\r\n\r\n    const handleSelection = (product) => {\r\n        setSelectedProduct(product);\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        setProductData(selectedProduct);\r\n        // Use updateSession to send selectedProduct and update lastDateTime\r\n        updateSession({ selectedProduct }).then(() => {\r\n            navigate('/goals'); // Navigate after session is updated\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"product-container body-container\">\r\n            <h2>Select a Skincare Product Type</h2>\r\n            <form onSubmit={handleSubmit} className=\"scrollable-content\">\r\n                {Object.entries(skincareProducts).map(([key, value]) => (\r\n                    <div key={key}>\r\n                        <button type=\"button\" onClick={() => handleSelection(key)}\r\n                            className={selectedProduct === key ? 'selected' : ''}>\r\n                            {key.charAt(0).toUpperCase() + key.slice(1)}\r\n                        </button>\r\n                        <p className={selectedProduct === key ? 'selected' : ''}>\r\n                            {value.description}\r\n                        </p>\r\n                    </div>\r\n                ))}\r\n                <div className=\"bottom-spacer\"></div>\r\n                <button className=\"submit\" type=\"submit\" disabled={!selectedProduct}>Next</button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Product;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport ingredients from './ingredients';\r\nimport { updateSession } from './sessionUtils';\r\n\r\nconst loadingMessages = [\r\n  \"AI is preparing a recipe for you...\",\r\n  \"Considering which ingredients will work best for your concerns...\",\r\n  \"Balancing proportions to ensure proper texture...\",\r\n  \"Optimizing for your skin type...\",\r\n  \"Finalizing the perfect skincare formula...\",\r\n  \"Almost there, just adding the finishing touches...\"\r\n];\r\n\r\nfunction Summary({ goalsData, productData, includeFragrance, selectedMoods }) {\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = useState(false);\r\n  const [currentMessage, setCurrentMessage] = useState(loadingMessages[0]);\r\n\r\n\r\n  const handleAIClick = () => {\r\n    setLoading(true);\r\n    setCurrentMessage(loadingMessages[0]);\r\n    const endpoint = 'https://us-central1-skincare-recipe-tool.cloudfunctions.net/getInitialRecipe';\r\n    const goals = goalsData.join(', ');\r\n    const productType = productData;\r\n\r\n\r\n    const fragranceSentence = includeFragrance === 'yes' ? `Essential oils should be added that will make me feel  ${selectedMoods.join(' and ')} .` : 'It should not have fragrance added.';\r\n\r\n    const data = {\r\n      text: `Hello, I am trying to formulate a ${productType} for ${goals}. ${fragranceSentence} Please suggest a recipe?`,\r\n      ingredients: formatIngredientsList(ingredients)\r\n    };\r\n\r\n    if (productData === \"Daytime Face Moisturizing Cream with SPF\") {\r\n      data.text += \" I would like to include Zinc Oxide for SPF in the formulation.\"\r\n    }\r\n\r\n    console.log('Sending OpenAI request: ', data.text, data.ingredients);\r\n\r\n    fetch(endpoint, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(data)\r\n    })\r\n    .then(response => response.json())\r\n      .then(data => {\r\n        setLoading(false);\r\n        console.log('Success:', data);\r\n        const recipeResponse = data.reply.choices[0].message.content;\r\n        const parsedResponse = JSON.parse(recipeResponse);\r\n        console.log(parsedResponse);\r\n        // Update the session with the AI response\r\n        updateSession({ aiRecipeResponse: parsedResponse }).then(() => {\r\n          navigate('/recipe-builder', { state: { recipe: parsedResponse } });\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        setLoading(false);\r\n        console.error('Error:', error);\r\n        // Handle error state here, e.g., display an error message\r\n      });\r\n  };\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (loading) {\r\n        const interval = setInterval(() => {\r\n            setCurrentMessage(prevMessage => {\r\n                const index = loadingMessages.indexOf(prevMessage);\r\n                const nextIndex = (index + 1) % loadingMessages.length;\r\n                return loadingMessages[nextIndex];\r\n            });\r\n        }, 4000); // Change message every 4 seconds\r\n\r\n        return () => clearInterval(interval);\r\n    }\r\n  }, [loading]);\r\n\r\n  const handleManualClick = () => {\r\n    navigate('/recipe-builder'); // Replace with your actual route\r\n  };\r\n\r\n  function formatIngredientsList(ingredients) {\r\n    let formattedString = \"\";\r\n\r\n    Object.keys(ingredients).forEach((key, index, array) => {\r\n      formattedString += key;\r\n\r\n      if (ingredients[key].hasOwnProperty('default_percent') || ingredients[key].hasOwnProperty('max_percent')) {\r\n        formattedString += \" (\";\r\n\r\n        if (ingredients[key].hasOwnProperty('default_percent')) {\r\n          formattedString += `default: ${ingredients[key].default_percent}`;\r\n          if (ingredients[key].hasOwnProperty('max_percent')) {\r\n            formattedString += \", \";\r\n          }\r\n        }\r\n\r\n        if (ingredients[key].hasOwnProperty('max_percent')) {\r\n          formattedString += `max: ${ingredients[key].max_percent}`;\r\n        }\r\n\r\n        formattedString += \")\";\r\n      }\r\n\r\n      if (index < array.length - 1) {\r\n        formattedString += \", \";\r\n      }\r\n    });\r\n\r\n    return formattedString;\r\n  }\r\n\r\n  return (\r\n    <div className=\"body-container\">\r\n      <h2>Your Selections</h2>\r\n      <h3>Skincare Goals/Concerns:</h3>\r\n      <ul>\r\n        {goalsData.map((item, index) => (\r\n          <li key={index}>{item}</li>\r\n        ))}\r\n      </ul>\r\n\r\n      <h3>Selected Skincare Product:</h3>\r\n      <ul><li>{productData.charAt(0).toUpperCase() + productData.slice(1)}</li></ul>\r\n\r\n      <h3>Include Fragrance: </h3>\r\n      <ul><li>{includeFragrance.charAt(0).toUpperCase() + includeFragrance.slice(1)}</li></ul>\r\n      {includeFragrance === 'yes' && (\r\n        <>\r\n          <h3>Selected Moods:</h3>\r\n          <ul>\r\n            {selectedMoods.map((item, index) => (\r\n              <li key={index}>{item}</li>\r\n            ))}\r\n          </ul>\r\n        </>\r\n      )}\r\n\r\n      {loading ? (\r\n        <div className=\"loading-container\">\r\n          <div className=\"loader\"></div> \r\n          <p className=\"loading-message\">{currentMessage}</p>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <button onClick={handleAIClick}>Generate a Formulation with AI</button>\r\n          <button onClick={handleManualClick}>Choose Ingredients Manually</button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Summary;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {getFilteredIngredientList} from './ingredients';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\n\r\nfunction RecipeBuilder({productData}) {\r\n    const navigate = useNavigate();\r\n    const [selectedIngredients, setSelectedIngredients] = useState([]);\r\n    const [ingredientProportions, setIngredientProportions] = useState({});\r\n    const [currentStep, setCurrentStep] = useState('selectIngredients');\r\n    const [recipeCommentary, setRecipeCommentary] = useState('');\r\n    const [shelfLifeEstimate, setShelfLifeEstimate] = useState('');\r\n    const ingredients = getFilteredIngredientList(productData);\r\n    \r\n    const location = useLocation();\r\n    const initialRecipe = location.state?.recipe;\r\n\r\n\r\n\r\n    // Function to move to the proportion adjustment step\r\n    const goToProportionAdjustment = () => {\r\n        setCurrentStep('adjustProportions');\r\n    };\r\n\r\n    // Function to go back to ingredient selection\r\n    const goBackToSelectIngredients = () => {\r\n        setCurrentStep('selectIngredients');\r\n    };\r\n\r\n    const handleIngredientSelect = (ingredientName) => {\r\n        if (selectedIngredients.includes(ingredientName)) {\r\n            setSelectedIngredients(selectedIngredients.filter(name => name !== ingredientName));\r\n            const newProportions = { ...ingredientProportions };\r\n            delete newProportions[ingredientName];\r\n            setIngredientProportions(newProportions);\r\n        } else {\r\n            setSelectedIngredients([...selectedIngredients, ingredientName]);\r\n            setIngredientProportions({ ...ingredientProportions, [ingredientName]: ingredients[ingredientName].phase === \"additive\" ? ingredients[ingredientName].default_percent : 10 });\r\n        }\r\n    };\r\n\r\n    const redistributeProportions = (adjustedIngredient, adjustedValue) => {\r\n        const totalAdditiveProportion = Object.keys(ingredientProportions)\r\n            .filter(name => isAdditive(name))\r\n            .reduce((acc, name) => acc + ingredientProportions[name], 0);\r\n\r\n        let remainingProportion = 100 - totalAdditiveProportion;\r\n        const nonAdditiveIngredients = selectedIngredients.filter(name => !isAdditive(name));\r\n\r\n        // First, set the adjusted ingredient's value and subtract it from the remaining proportion\r\n        const newProportions = { ...ingredientProportions, [adjustedIngredient]: adjustedValue };\r\n        remainingProportion -= adjustedValue;\r\n\r\n        // Then, distribute the remaining proportion among the other non-additive ingredients\r\n        const totalCurrentNonAdditive = nonAdditiveIngredients\r\n            .filter(name => name !== adjustedIngredient)\r\n            .reduce((acc, name) => acc + newProportions[name], 0);\r\n\r\n        // Prevent negative values during redistribution\r\n        if (totalCurrentNonAdditive > 0) {\r\n            const scaleFactor = remainingProportion / totalCurrentNonAdditive;\r\n            nonAdditiveIngredients.forEach(name => {\r\n                if (name !== adjustedIngredient) {\r\n                    let adjustedProportion = newProportions[name] * scaleFactor;\r\n                    newProportions[name] = adjustedProportion < 0 ? 0 : adjustedProportion;\r\n                }\r\n            });\r\n        } else {\r\n            // If there are no other non-additives, set their proportions to 0\r\n            nonAdditiveIngredients.forEach(name => {\r\n                if (name !== adjustedIngredient) {\r\n                    newProportions[name] = 0;\r\n                }\r\n            });\r\n        }\r\n\r\n        setIngredientProportions(newProportions);\r\n    };\r\n\r\n\r\n\r\n\r\n    const handleSliderChange = (ingredientName, value) => {\r\n        const newValue = parseFloat(value);\r\n        redistributeProportions(ingredientName, newValue);\r\n    };\r\n    const [temporaryInputs, setTemporaryInputs] = useState({});\r\n\r\n    const handleAdditiveChange = (ingredientName, value) => {\r\n        // Update the temporary input state\r\n        setTemporaryInputs({ ...temporaryInputs, [ingredientName]: value });\r\n        // If the value is a valid complete number, update the proportions immediately\r\n        const newValue = parseFloat(value);\r\n        const maxPercent = ingredients[ingredientName].max_percent || 100; // Default to 100 if not specified\r\n        if (!isNaN(newValue) && value.match(/^\\d+(\\.\\d+)?$/)) {\r\n            const boundedValue = newValue > maxPercent ? maxPercent : newValue;\r\n            const newProportions = { ...ingredientProportions, [ingredientName]: boundedValue };\r\n            setIngredientProportions(newProportions);\r\n            redistributeProportions(ingredientName, newValue);\r\n        }\r\n    };\r\n\r\n    const handleAdditiveBlur = (ingredientName) => {\r\n        const value = temporaryInputs[ingredientName];\r\n        const newValue = value ? parseFloat(value) : 0;\r\n        const maxPercent = ingredients[ingredientName].max_percent || 100; // Default to 100 if not specified\r\n        const boundedValue = newValue > maxPercent ? maxPercent : newValue;\r\n        if (!isNaN(boundedValue)) {\r\n            // Update the real proportions and redistribute\r\n            const newProportions = { ...ingredientProportions, [ingredientName]: boundedValue };\r\n            setIngredientProportions(newProportions);\r\n            redistributeProportions(ingredientName, boundedValue);\r\n            if (newValue > maxPercent) {\r\n                // Update the temporary input state\r\n                setTemporaryInputs({ ...temporaryInputs, [ingredientName]: maxPercent });\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n\r\n    const isIngredientSelected = (ingredientName) => {\r\n        return selectedIngredients.includes(ingredientName);\r\n    };\r\n\r\n    const isAdditive = (ingredientName) => {\r\n        const ingredient = ingredients[ingredientName];\r\n        return ingredient ? ingredient.phase === \"additive\" : false;\r\n    };\r\n\r\n    const roundProportions = () => {\r\n        const newProportions = { ...ingredientProportions };\r\n        let roundedTotal = 0;\r\n\r\n        // Round each non-additive proportion\r\n        Object.keys(newProportions).forEach(key => {\r\n            if (!isAdditive(key)) {\r\n                newProportions[key] = Math.round(newProportions[key]);\r\n            }\r\n            roundedTotal += newProportions[key];\r\n        });\r\n\r\n        // Calculate discrepancy and adjust non-additive proportions\r\n        const discrepancy = 100 - roundedTotal;\r\n        const nonAdditiveKeys = Object.keys(newProportions).filter(key => !isAdditive(key));\r\n        const adjustmentPerIngredient = discrepancy / nonAdditiveKeys.length;\r\n\r\n        nonAdditiveKeys.forEach(key => {\r\n            newProportions[key] += adjustmentPerIngredient;\r\n        });\r\n\r\n        // Handle negative proportions\r\n        let negativeSum = 0;\r\n        nonAdditiveKeys.forEach(key => {\r\n            if (newProportions[key] < 0) {\r\n                negativeSum += newProportions[key];\r\n                newProportions[key] = 0;\r\n            }\r\n        });\r\n\r\n        // Redistribute the negative sum among positive non-additive ingredients\r\n        if (negativeSum < 0) {\r\n            const positiveKeys = nonAdditiveKeys.filter(key => newProportions[key] >= 0.01);\r\n            const positiveAdjustment = Math.abs(negativeSum) / positiveKeys.length;\r\n\r\n            positiveKeys.forEach(key => {\r\n                newProportions[key] += positiveAdjustment;\r\n            });\r\n        }\r\n\r\n        // Final check if total exceeds 100%\r\n        const finalTotal = Object.values(newProportions).reduce((acc, val) => acc + val, 0);\r\n        if (finalTotal > 100) {\r\n            const excess = finalTotal - 100;\r\n            const positiveKeys = nonAdditiveKeys.filter(key => newProportions[key] > 0);\r\n            const excessAdjustment = excess / positiveKeys.length;\r\n\r\n            positiveKeys.forEach(key => {\r\n                newProportions[key] -= excessAdjustment;\r\n            });\r\n        }\r\n\r\n        setIngredientProportions(newProportions);\r\n    };\r\n\r\n    const getRecipeAdvice = () => {\r\n        console.log(\"boop\");\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n        setTimeout(() => {\r\n            roundProportions();\r\n        }, 10); // Delay of 100 milliseconds\r\n    };\r\n\r\n    const calculateTotalPercentage = () => {\r\n        return Object.values(ingredientProportions).reduce((acc, value) => acc + value, 0);\r\n    };\r\n\r\n    const finalizeRecipe = () => {\r\n        roundProportions();\r\n        navigate('/finalize-recipe', { state: { recipe: ingredientProportions, commentary: recipeCommentary } });\r\n    }\r\n\r\n\r\n    const tableStyle = {\r\n        width: '95%', // Ensure the table takes full width\r\n        borderCollapse: 'collapse',\r\n    };\r\n\r\n    const headerStyle = {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        marginBottom: '10px',\r\n    };\r\n\r\n    const headerWithButtonStyle = {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        marginBottom: '10px',\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        const newProportions = {};\r\n\r\n        // Set initial proportions for selected ingredients\r\n        selectedIngredients.forEach(ingredient => {\r\n            if (isAdditive(ingredient)) {\r\n                newProportions[ingredient] = 1; // Set initial value for additive\r\n            } else {\r\n                newProportions[ingredient] = 10; // Set initial value for non-additive\r\n            }\r\n        });\r\n\r\n        setIngredientProportions(prevProportions => {\r\n            // Retain the proportions of ingredients that are still selected\r\n            return Object.keys(prevProportions)\r\n                .filter(key => selectedIngredients.includes(key))\r\n                .reduce((acc, key) => {\r\n                    acc[key] = prevProportions[key];\r\n                    return acc;\r\n                }, newProportions);\r\n        });\r\n    }, [selectedIngredients]);\r\n\r\n    const totalPercentage = calculateTotalPercentage();\r\n    const totalPercentageStyle = {\r\n        color: Math.abs(totalPercentage - 100) < 0.01 ? 'black' : 'red',\r\n    };\r\n    \r\n    useEffect(() => {\r\n        console.log(\"useeffectinitialRecipe\", initialRecipe);\r\n        if (initialRecipe) {\r\n            const ingredientsFromResponse = {};\r\n            const selectedIngredientsFromResponse = [];\r\n    \r\n            Object.keys(initialRecipe).forEach(key => {\r\n                if (key === \"commentary\") {\r\n                    setRecipeCommentary(initialRecipe[\"commentary\"]);\r\n                }\r\n                else if (key === \"shelfLifeEstimate\") {\r\n                    setShelfLifeEstimate(initialRecipe[\"shelfLifeEstimate\"]);\r\n                }\r\n                else if ( ingredients[key]) {\r\n                    ingredientsFromResponse[key] = initialRecipe[key];\r\n                    selectedIngredientsFromResponse.push(key);\r\n                } \r\n            });\r\n            console.log(\"ingredientsfromresponse\", ingredientsFromResponse);\r\n            setIngredientProportions(ingredientsFromResponse);\r\n            setSelectedIngredients(selectedIngredientsFromResponse);\r\n\r\n            goToProportionAdjustment();\r\n        }\r\n    }, [initialRecipe]);\r\n\r\n    return (\r\n        <div>\r\n            {currentStep === 'selectIngredients' && (\r\n                <div>\r\n                    <div>\r\n                        <div style={headerWithButtonStyle}>\r\n                            <h3>Available Ingredients:</h3>\r\n                            <button onClick={goToProportionAdjustment}>Adjust Proportions</button>\r\n                            <span></span>\r\n                        </div>\r\n                        {Object.entries(ingredients).map(([name, details]) => (\r\n                            <div className={ (isIngredientSelected(name) ? 'selected' : '') + \" ingredient-row\"}\r\n                                key={name}\r\n                                onClick={() => handleIngredientSelect(name)}\r\n                            >\r\n                                <strong>{name}</strong>\r\n                                <small>{details.description}</small>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n            {currentStep === 'adjustProportions' && (\r\n                <div className=\"recipe-builder-container\">\r\n\r\n                    <div style={headerStyle}>\r\n                        <button onClick={goBackToSelectIngredients}>Back to Ingredients</button>\r\n                        <h3>Proportions:</h3>\r\n                        <span style={totalPercentageStyle} onClick={roundProportions}>{totalPercentage.toFixed(2)}%</span>\r\n                    </div>\r\n                    <div className=\"scrollable-content\">\r\n                    <table style={tableStyle}>\r\n                        <tbody>\r\n                            {selectedIngredients.map(name => (\r\n                                <React.Fragment key={name}>\r\n                                    <tr>\r\n                                        <td>{name}</td>\r\n                                        <td>{ingredientProportions[name].toFixed(2)}%</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td colSpan=\"2\">\r\n                                            {isAdditive(name) ? (\r\n                                                <div style={{ position: 'relative' }}>\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={temporaryInputs[name] ?? ingredientProportions[name]}\r\n                                                        onChange={(e) => handleAdditiveChange(name, e.target.value)}\r\n                                                        onBlur={(e) => handleAdditiveBlur(name, e.target.value)}\r\n                                                        style={{ width: '100%', borderColor: ingredientProportions[name] === ingredients[name].max_percent ? 'red' : 'initial' }}\r\n                                                    />\r\n                                                    {ingredientProportions[name] === ingredients[name].max_percent && (\r\n                                                        <span style={{ position: 'absolute', right: 0, top: 0, color: 'red' }}>Max</span>\r\n                                                    )}\r\n                                                </div>\r\n                                            ) : (\r\n                                                <input\r\n                                                    type=\"range\"\r\n                                                    min=\"0\"\r\n                                                    max=\"100\"\r\n                                                    step=\"0.01\"\r\n                                                    value={ingredientProportions[name]}\r\n                                                    onChange={(e) => handleSliderChange(name, e.target.value)}\r\n                                                    onMouseUp={handleMouseUp}\r\n                                                    onTouchEnd={handleMouseUp}\r\n                                                    style={{ width: '100%' }}\r\n                                                />\r\n                                            )}\r\n                                        </td>\r\n                                    </tr>\r\n                                </React.Fragment>\r\n                            ))}\r\n\r\n                        </tbody>\r\n                    </table>\r\n                    {recipeCommentary && (\r\n                        <div className=\"commentary\">\r\n                            <div style={headerWithButtonStyle}>\r\n                                <h3>Commentary:</h3>\r\n                                <button onClick={getRecipeAdvice}>Get Recipe Advice (Coming Soon!)</button>\r\n                            </div>\r\n                            <p>{recipeCommentary}</p>\r\n                            <p>Estimated Shelf Life: {shelfLifeEstimate}</p>\r\n                        </div>\r\n                    )}\r\n                    </div>\r\n                    <button className='submit' onClick={finalizeRecipe}>Finalize Recipe</button>\r\n                </div>\r\n            )}\r\n\r\n\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RecipeBuilder;\r\n","import React, { useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { db } from './firebase-config';\r\nimport { doc, setDoc } from 'firebase/firestore'\r\nimport { updateSession } from './sessionUtils';\r\n\r\nfunction FinalizeRecipe() {\r\n    const [recipeName, setRecipeName] = useState('');\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const recipe = location.state?.recipe;\r\n    const commentary = location.state?.commentary;\r\n\r\n    const isRecipeNameValid = recipeName.trim().length > 0;\r\n\r\n    // Handler to save the recipe\r\n    const handleConfirmAndSave = async () => {\r\n        try {\r\n            const recipeId = recipeName\r\n                .toLowerCase()\r\n                .replace(/[^a-z0-9]/gi, '') // Strip out all non-alphanumeric characters\r\n                .replace(/ /g, '-') + \"-\" + new Date().getTime();\r\n\r\n            console.log(recipeId);\r\n            console.log(location.state);\r\n            await setDoc(doc(db, \"formulations\", recipeId), {\r\n                name: recipeName,\r\n                ingredients: recipe,\r\n                commentary: commentary,\r\n                createdAt: new Date()\r\n            });\r\n            console.log(\"Document written with ID: \", recipeId);\r\n\r\n            // Update the session with the new recipeId\r\n            await updateSession({ recipeId: recipeId });\r\n\r\n            navigate('/saved-recipe', { state: { recipeId: recipeId } });\r\n        } catch (e) {\r\n            console.error(\"Error adding document: \", e);\r\n            // Show an error message or handle the error as needed\r\n        }\r\n    };\r\n    const handleChangeIngredients = () => {\r\n        navigate('/change-ingredients'); // Navigate to the change ingredients page\r\n    };\r\n\r\n    const handleChangeProportions = () => {\r\n        navigate('/recipe-builder'); // Navigate to the change proportions page\r\n    };\r\n\r\n    return (\r\n        <div className=\"body-container\">\r\n            <h2>Name Your Custom Skincare Recipe</h2>\r\n            <input\r\n                type=\"text\"\r\n                placeholder=\"Enter recipe name\"\r\n                value={recipeName}\r\n                onChange={(e) => setRecipeName(e.target.value)}\r\n            />\r\n            <h2>Your Base Recipe</h2>\r\n            <div className=\"recipe\">\r\n                {recipe && Object.keys(recipe).map((key, index) => (\r\n                    <div className=\"recipe-row\" key={index}>\r\n                        <strong>{key}:</strong> <span className=\"align-right\">{recipe[key].toFixed(2)}%</span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"actions\">\r\n                <button onClick={handleChangeIngredients}>Change Ingredients</button>\r\n                <button onClick={handleChangeProportions}>Change Proportions</button>\r\n                <button className=\"submit\" onClick={handleConfirmAndSave} disabled={!isRecipeNameValid}>Save Base Recipe</button>\r\n            </div>\r\n            {!isRecipeNameValid && (\r\n                <p className=\"why-disabled\">Please enter a recipe name.</p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FinalizeRecipe;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { db } from './firebase-config'; // Adjust the path as necessary\r\nimport { doc, getDoc } from 'firebase/firestore';\r\n\r\nfunction SavedRecipe() {\r\n    const [recipeData, setRecipeData] = useState(null);\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const recipeId = location.state?.recipeId;\r\n    const [shareButtonText, setShareButtonText] = useState('Share this Recipe');\r\n\r\n    useEffect(() => {\r\n        const searchParams = new URLSearchParams(location.search);\r\n        const paramRecipeId = searchParams.get('recipeId');\r\n        if(paramRecipeId) {\r\n            const fetchData = async () => {\r\n                const docRef = doc(db, \"formulations\", paramRecipeId);\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    setRecipeData(docSnap.data());\r\n                } else {\r\n                    console.log(\"No such document!\");\r\n                }\r\n            };\r\n\r\n            fetchData();\r\n        }\r\n            \r\n        else if (recipeId) {\r\n            const fetchData = async () => {\r\n                const docRef = doc(db, \"formulations\", recipeId);\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    setRecipeData(docSnap.data());\r\n                } else {\r\n                    console.log(\"No such document!\");\r\n                }\r\n            };\r\n\r\n            fetchData();\r\n        }\r\n    }, [recipeId, location.search]);\r\n\r\n    const handleShareRecipe = () => {\r\n        const currentUrl = window.location.href;\r\n        const shareUrl = `${currentUrl}?recipeId=${recipeId}`;\r\n        navigator.clipboard.writeText(shareUrl).then( () => {\r\n            console.log('Recipe URL copied to clipboard!');\r\n            setShareButtonText('Copied!'); // Change button text to 'Copied!'\r\n\r\n            setTimeout(() => {\r\n                setShareButtonText('Share this Recipe');\r\n            }, 3000);\r\n        }).catch( () => {\r\n            console.log('Error copying to clipboard');\r\n        });\r\n    };\r\n\r\n    const handleOrderFormulation = () => {\r\n        navigate('/order-formulation', { state: { recipeId } });\r\n    };\r\n\r\n    if (!recipeData) return <div>Loading...</div>;\r\n\r\n    return (\r\n        <div>\r\n            <h2>{recipeData.name}</h2>\r\n            <div className=\"recipe\">\r\n                {Object.keys(recipeData.ingredients).map((key, index) => (\r\n                    <div className=\"recipe-row\" key={index}>\r\n                        <strong>{key}:</strong> <span className=\"align-right\">{recipeData.ingredients[key].toFixed(2)}</span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            <button onClick={handleShareRecipe}>{shareButtonText}</button>\r\n            <button onClick={handleOrderFormulation}>Order Formulation of this Recipe</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SavedRecipe;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { db } from './firebase-config';\r\nimport { doc, getDoc, setDoc } from 'firebase/firestore';\r\nimport { updateSession } from './sessionUtils';\r\n\r\nfunction OrderFormulation() {\r\n    const navigate = useNavigate();\r\n    const [recipeData, setRecipeData] = useState(null);\r\n    const [name, setName] = useState('');\r\n    const [phoneNumber, setPhoneNumber] = useState('');\r\n    const [inSeattleArea, setInSeattleArea] = useState(true);\r\n    const [pickup, setPickup] = useState(true);\r\n    const [address, setAddress] = useState({ street1: '', street2: '', zip: '' });\r\n    const [note, setNote] = useState('');\r\n    const [userLocation, setUserLocation] = useState('');\r\n    const location = useLocation();\r\n    const recipeId = location.state?.recipeId;\r\n    const [hasError, setHasError] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (recipeId) {\r\n            const fetchData = async () => {\r\n                const docRef = doc(db, \"formulations\", recipeId);\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    setRecipeData(docSnap.data());\r\n                } else {\r\n                    console.log(\"No such document!\");\r\n                }\r\n            };\r\n\r\n            fetchData();\r\n        }\r\n    }, [recipeId]);\r\n\r\n    const handleSubmit = async (e) => {\r\n        setHasError(false);\r\n        e.preventDefault();\r\n        try {\r\n            const orderId = new Date().getTime() + \"-\" + recipeId;\r\n            await setDoc(doc(db, \"orders\", orderId), {\r\n                name,\r\n                recipeId,\r\n                phoneNumber,\r\n                pickup,\r\n                address: pickup ? null : address,\r\n                createdAt: new Date(),\r\n                waitlist: !inSeattleArea,\r\n                location: userLocation,\r\n                note\r\n            });\r\n            console.log(\"Order submitted\");\r\n\r\n            // Update the session with the new orderId\r\n            await updateSession({ orderId });\r\n\r\n            navigate('/order-success');\r\n        } catch (e) {\r\n            console.error(\"Error submitting order: \", e);\r\n            setHasError(true);\r\n        }\r\n    };\r\n\r\n    if (!recipeData) return <div>Loading...</div>;\r\n\r\n    return (\r\n        <div className=\"body-container\">\r\n            <h2>{recipeData.name}</h2>\r\n            <div className=\"scrollable-content\">\r\n                <div className=\"recipe\">\r\n                    {Object.keys(recipeData.ingredients).map((key, index) => (\r\n                        <div key={index}>\r\n                            <strong>{key}</strong>: {recipeData.ingredients[key]}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n                <p>While this service is in development, formulations are free to people located in Seattle! We only ask that you please provide a review of your product and feedback about your experience using the service. (We'll send you a way to access that after we deliver your formulation).</p>\r\n                <form onSubmit={handleSubmit} className=\"contact-us-form\">\r\n                    <div>\r\n                        <label>Your Name:</label><br />\r\n                        <input type=\"text\" value={name} onChange={(e) => setName(e.target.value)} />\r\n                    </div>\r\n                    <div>\r\n                        <label>Mobile phone number (We'll text with you to coordinate delivery):</label><br />\r\n                        <input type=\"tel\" value={phoneNumber} onChange={(e) => setPhoneNumber(e.target.value)} />\r\n                    </div>\r\n                    <div>\r\n                        <label>Do you live in the Seattle area?</label><br />\r\n                        <select value={inSeattleArea} onChange={(e) => setInSeattleArea(e.target.value === 'true')}>\r\n                            <option value=\"true\">Yes</option>\r\n                            <option value=\"false\">No</option>\r\n                        </select>\r\n                    </div>\r\n                    {inSeattleArea ? (\r\n                        // Form fields for Seattle area users\r\n                        <div>\r\n                            {/* ... existing form fields ... */}\r\n                            <label>Do you want to pick it up from Chris Koss's house (South Beacon Hill)?</label><br />\r\n                            <select value={pickup} onChange={(e) => setPickup(e.target.value === 'true')}>\r\n                                <option value=\"true\">Yes</option>\r\n                                <option value=\"false\">No</option>\r\n                            </select>\r\n                            {!pickup && (\r\n                                <div>\r\n                                    <label>Delivery Address:</label><br />\r\n                                    <input type=\"text\" placeholder=\"Street 1\" value={address.street1} onChange={(e) => setAddress({ ...address, street1: e.target.value })} /><br />\r\n                                    <input type=\"text\" placeholder=\"Street 2\" value={address.street2} onChange={(e) => setAddress({ ...address, street2: e.target.value })} /><br />\r\n                                    <input type=\"text\" value=\"Seattle\" readOnly /><br />\r\n                                    <input type=\"text\" value=\"WA\" readOnly /><br />\r\n                                    <input type=\"text\" placeholder=\"Zip Code\" value={address.zip} onChange={(e) => setAddress({ ...address, zip: e.target.value })} />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        <div>\r\n                            <p>We are currently only fulfilling orders within the Seattle area. You'll be added to the waitlist and we'll contact you when we start shipping orders.</p>\r\n                            <label>Where are you located?</label><br />\r\n                            <input type=\"text\" placeholder=\"Your Location\" onChange={(e) => {setUserLocation(e.target.value)}} />\r\n                        </div>\r\n                    )}\r\n                    <label>Note:</label><br />\r\n                    <textarea placeholder=\"Enter your note here\" value={note} onChange={(e) => setNote(e.target.value)}></textarea>\r\n                    <button type=\"submit\" className=\"submit\">Submit Order</button>\r\n                </form>\r\n            </div>\r\n            <div className=\"bottom-spacer\"></div>\r\n            <div className=\"bottom-spacer\"></div>\r\n\r\n            {hasError && (<p className=\"why-disabled\">Something went wrong submitting... please try again</p>) }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default OrderFormulation;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction OrderSuccess() {\r\n    return (\r\n        <div className=\"order-success body-container\">\r\n            <h2>Order Submitted Successfully!</h2>\r\n            <p>Your information has been successfully submitted. Please look out for a text message from Chris.</p>\r\n            <p>We will coordinate the mixing time with you, ensuring that your formulation is mixed within 24 hours of when you receive it for maximum freshness.</p>\r\n            <p>Thank you for using our service!</p>\r\n            <Link to=\"/\">Back to Home</Link>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default OrderSuccess;\r\n","import React, { useState } from 'react';\r\nimport { db } from './firebase-config'; \r\nimport { collection, addDoc } from 'firebase/firestore'\r\n\r\nconst Contact = () => {\r\n  const [phoneNumber, setPhoneNumber] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      await addDoc(collection(db, 'contact-form-submissions'), {\r\n        phoneNumber,\r\n        message,\r\n        createdAt: new Date()\r\n      });\r\n\r\n        setIsSubmitted(true);\r\n    } catch (error) {\r\n      console.error(\"Error adding document: \", error);\r\n    }\r\n  };\r\n\r\n  if (isSubmitted) {\r\n    return <div><h1>Thanks for contacting us! <br /> We'll get back to you soon!</h1>\r\n    <a href=\"/\">Back to home</a>\r\n    </div>;\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className='contact-us-form'>\r\n        <h2>Contact Us</h2>\r\n      <label>\r\n        <strong>Phone number</strong> (if you'd like us to text you a response): <br />\r\n        <input\r\n          type=\"text\"\r\n          value={phoneNumber}\r\n          onChange={(e) => setPhoneNumber(e.target.value)}\r\n        />\r\n      </label>\r\n        <br />\r\n      <label>\r\n        <strong>Message:</strong><br />\r\n        <textarea\r\n          value={message}\r\n          onChange={(e) => setMessage(e.target.value)}\r\n        />\r\n      </label>\r\n      <button type=\"submit\">Submit</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Contact;\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { db } from './firebase-config'; // Adjust with your actual firebase config import\r\nimport { doc, getDoc } from 'firebase/firestore';\r\nimport ingredients from './ingredients';\r\n\r\nfunction OrderPricing() {\r\n    const location = useLocation();\r\n    const [recipeData, setRecipeData] = useState(null);\r\n    const [targetGrams, setTargetGrams] = useState(60);\r\n    const [ingredientList, setIngredientList] = useState([]);\r\n\r\n    const totalGrams = ingredientList.reduce((sum, ingredient) => sum + ingredient.grams, 0);\r\n    const totalCost = ingredientList.reduce((sum, ingredient) => sum + ingredient.cost, 0);\r\n    const totalParts = Object.values(recipeData?.ingredients || {}).reduce((sum, part) => sum + part, 0);\r\n\r\n    useEffect(() => {\r\n        const searchParams = new URLSearchParams(location.search);\r\n        const fetchData = async () => {\r\n            const docRef = doc(db, \"formulations\", searchParams.get('recipeId'));\r\n            const docSnap = await getDoc(docRef);\r\n\r\n            if (docSnap.exists()) {\r\n                setRecipeData(docSnap.data());\r\n            } else {\r\n                console.log(\"No such document!\");\r\n            }\r\n        };\r\n\r\n        if (searchParams.get('recipeId')) {\r\n            fetchData();\r\n        }\r\n    }, [location.search]);\r\n\r\n\r\n    const calculateIngredients = useCallback(() => {\r\n        if (recipeData) {\r\n            const totalParts = Object.values(recipeData.ingredients).reduce((sum, part) => sum + part, 0);\r\n            const newIngredientList = Object.entries(recipeData.ingredients).map(([name, parts]) => {\r\n                const ingredientGrams = (targetGrams / totalParts) * parts;\r\n                const ingredientCost = ingredients[name].cost_per_g * ingredientGrams;\r\n                return { name, parts: parts, grams: ingredientGrams, cost: ingredientCost };\r\n            });\r\n            setIngredientList(newIngredientList);\r\n        }\r\n    }, [recipeData, targetGrams]);\r\n\r\n    useEffect(() => {\r\n        if (recipeData && targetGrams > 0) {\r\n            calculateIngredients();\r\n        }\r\n    }, [recipeData, targetGrams, calculateIngredients]);\r\n\r\n\r\n    return (\r\n        <div className=\"order-pricing\">\r\n            <h1>Order Pricing</h1>\r\n            <input\r\n                type=\"number\"\r\n                value={targetGrams}\r\n                onChange={(e) => setTargetGrams(e.target.value)}\r\n                placeholder=\"Target Grams\"\r\n            />\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Ingredient</th>\r\n                        <th>Parts</th>\r\n                        <th>Grams</th>\r\n                        <th>Cost</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {ingredientList.map((ingredient, index) => (\r\n                        <tr key={index}>\r\n                            <td>{ingredient.name}</td>\r\n                            <td>{ingredient.parts}</td>\r\n                            <td>{ingredient.grams.toFixed(3)}</td>\r\n                            <td>${ingredient.cost.toFixed(2)}</td>\r\n                        </tr>\r\n                    ))}\r\n                    <tr>\r\n                        <td><strong>Total</strong></td>\r\n                        <td>{totalParts}</td>\r\n                        <td>{totalGrams.toFixed(3)}</td>\r\n                        <td>${totalCost.toFixed(2)}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default OrderPricing;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { getFormatedIngredientsList } from './ingredients';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\nimport { db } from './firebase-config';\r\n\r\nfunction VariationSelection() {\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    const [variations, setVariations] = useState([]);\r\n    const [selectedVariations, setSelectedVariations] = useState(new Set());\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [recipeData, setRecipeData] = useState(null);\r\n\r\n    // Fetch recipe data from the endpoint\r\n    useEffect(() => {\r\n        setIsLoading(true);\r\n        const searchParams = new URLSearchParams(location.search);\r\n        const recipeId = searchParams.get('recipeId');\r\n        if (recipeId) {\r\n            const fetchData = async () => {\r\n                const docRef = doc(db, \"formulations\", recipeId);\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    setRecipeData(docSnap.data());\r\n                    console.log(\"Document data:\", docSnap.data());\r\n                } else {\r\n                    console.log(\"No such document!\");\r\n                    setIsLoading(false);\r\n                }\r\n            };\r\n\r\n            fetchData();\r\n        }\r\n    }, [location.search]);\r\n\r\n    // Fetch variations from the endpoint\r\n    useEffect(() => {\r\n        if (recipeData) {\r\n            const fetchVariations = async () => {\r\n                setIsLoading(true);\r\n                try {\r\n                    const ingredientList = getFormatedIngredientsList();\r\n                    console.log('Ingredients:', ingredientList);\r\n                    const response = await fetch('https://us-central1-skincare-recipe-tool.cloudfunctions.net/getRecipeVariations', {\r\n                        method: 'POST',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                        body: JSON.stringify({ recipe: recipeData, ingredients: ingredientList })\r\n                    });\r\n                    console.log('Response:', response);\r\n                    if (!response.ok) throw new Error('Network response was not ok');\r\n                    const data = await response.json();\r\n                    console.log('Data:', data.reply.choices[0].message.content);\r\n                    const reply = data.reply.choices[0].message.content;\r\n                    setVariations(JSON.parse(reply));\r\n                } catch (error) {\r\n                    console.error('Error fetching variations:', error);\r\n                    // Handle error state here\r\n                } finally {\r\n                    console.log('Variations fetched:', variations);\r\n                    setIsLoading(false);\r\n                }\r\n            };\r\n            fetchVariations();\r\n        }\r\n    }, [recipeData]);\r\n\r\n    // TEMPORARY\r\n    useEffect(() => {\r\n        console.log('Variations updated:', variations);\r\n    }, [variations]); // Log variations when they change\r\n\r\n    const handleSelectionChange = (variationIndex) => {\r\n        const newSelection = new Set(selectedVariations);\r\n        if (newSelection.has(variationIndex)) {\r\n            newSelection.delete(variationIndex);\r\n        } else {\r\n            newSelection.add(variationIndex);\r\n        }\r\n        setSelectedVariations(newSelection);\r\n    };\r\n\r\n    const handleSubmit = () => {\r\n        console.log('Selected variations:', [...selectedVariations]);\r\n        // Implement submission logic here\r\n    };\r\n\r\n    return (\r\n        <div className=\"variation-selection\">\r\n            <h2>Select Your Desired Recipe Variations</h2>\r\n            {isLoading ? (\r\n                <div className=\"loading\">\r\n                    <div className=\"spinner\"></div>\r\n                    <p>Loading variations...</p>\r\n                </div>\r\n            ) : (\r\n                <div>\r\n                    <button onClick={() => handleSelectionChange('original')}>Original Recipe</button>\r\n                    {variations\r\n                      .filter(variation => {\r\n                        // Calculate the sum of numerical values, ignoring non-numeric properties\r\n                        const sum = Object.keys(variation)\r\n                          .filter(key => key !== 'tagline' && key !== 'description')\r\n                          .reduce((acc, key) => acc + variation[key], 0);\r\n                        return sum === 0;\r\n                      })\r\n                    .map((variation, index) => (\r\n                        <div key={index} onClick={() => handleSelectionChange(index)} style={{ marginBottom: '20px', cursor: 'pointer' }}>\r\n                            <h3>{variation.tagline}</h3>\r\n                            <p>{variation.description}</p>\r\n                            <ul>\r\n                                {Object.keys(variation).filter(key => key !== 'tagline' && key !== 'description' && variation[key] !== 0).map(key => (\r\n                                    <li key={key}>{`${key}: ${variation[key] > 0 ? '+' : ''}${variation[key]}`}</li>\r\n                                ))}\r\n                            </ul>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n            )}\r\n            <button\r\n                onClick={handleSubmit}\r\n                disabled={selectedVariations.size !== 2}\r\n            >\r\n                Submit\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default VariationSelection;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport surveyData from './SurveyQs.json';\r\nimport { db } from './firebase-config';\r\nimport { setDoc, doc, updateDoc } from 'firebase/firestore'\r\n\r\nconst OrderSurvey = () => {\r\n    const navigate = useNavigate();\r\n    const [currentSectionIndex, setCurrentSectionIndex] = useState(0);\r\n    const currentSection = surveyData[currentSectionIndex];\r\n    const [responses, setResponses] = useState({});\r\n    const location = useLocation();\r\n    const searchParams = new URLSearchParams(location.search);\r\n    const orderId = searchParams.get('orderId');\r\n    const [docId, setDocId] = useState('');\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if(orderId) {\r\n        var now = new Date();\r\n        setDocId(now.getTime() + \"-\" + orderId);\r\n    }\r\n    }, [orderId]);\r\n\r\n    useEffect(() => {\r\n        const pushEmptyResponse = async () => {\r\n            if (docId) {\r\n                const docRef = doc(db, \"survey\", docId);\r\n                await setDoc(docRef, {\r\n                    orderId: orderId,\r\n                    startTime: new Date(),\r\n                    responses: {} // Initially empty\r\n                });\r\n            }\r\n        };\r\n\r\n        pushEmptyResponse();\r\n    }, [docId, orderId]);\r\n\r\n\r\n    const handleNextClick = async () => {\r\n        const updateResponses = async () => {\r\n            const docRef = doc(db, \"survey\", docId);\r\n            await updateDoc(docRef, {\r\n                responses: { ...responses },\r\n                lastTime: new Date()\r\n            });\r\n        };\r\n\r\n        await updateResponses();\r\n\r\n        if (surveyData[currentSectionIndex].section === \"Future Orders\") {\r\n            if (responses[\"repeat_order_interest\"] === \"Yes, I'd like to evolve this recipe\") {\r\n                setCurrentSectionIndex(currentSectionIndex + 1);\r\n            }\r\n            else {\r\n                setCurrentSectionIndex(currentSectionIndex + 2);\r\n            }\r\n        } else if (currentSectionIndex < surveyData.length - 1) {\r\n            setCurrentSectionIndex(currentSectionIndex + 1);\r\n        } else {\r\n            navigate('/');\r\n        }\r\n    };\r\n\r\n    const handleInputChange = (questionId, value) => {\r\n        setResponses({\r\n            ...responses,\r\n            [questionId]: value,\r\n        });\r\n    };\r\n\r\n    const renderInput = (question) => {\r\n        const inputValue = responses[question.id] || \"\";\r\n\r\n        switch (question.type) {\r\n            case 'choice':\r\n                return (\r\n                    <div>\r\n                        {question.options.map((option, index) => (\r\n                            <label key={index}>\r\n                                <input\r\n                                    type=\"radio\"\r\n                                    name={question.id}\r\n                                    value={option}\r\n                                    checked={inputValue === option}\r\n                                    onChange={(e) => handleInputChange(question.id, e.target.value)}\r\n                                />\r\n                                {option}\r\n                                {question.shouldAddLineBreak && index !== question.options.length - 1 ? <br /> : null}\r\n                            </label>\r\n                        ))}\r\n                    </div>\r\n                );\r\n            case 'rating':\r\n                return (\r\n                    <div>\r\n                        {[...Array(question.scale).keys()].map((number) => (\r\n                            <label key={number}>\r\n                                <input\r\n                                    type=\"radio\"\r\n                                    name={question.id}\r\n                                    value={number + 1}\r\n                                    checked={parseInt(inputValue) === number + 1}\r\n                                    onChange={(e) => handleInputChange(question.id, e.target.value)}\r\n                                />\r\n                                {number + 1}\r\n                            </label>\r\n                        ))}\r\n                    </div>\r\n                );\r\n            case 'open_text':\r\n                return (\r\n                    <textarea\r\n                        name={question.id}\r\n                        value={inputValue}\r\n                        onChange={(e) => handleInputChange(question.id, e.target.value)}\r\n                        placeholder=\"Your answer...\"\r\n                    />\r\n                );\r\n            case 'yes_no':\r\n                return (\r\n                    <div>\r\n                        <label>\r\n                            <input\r\n                                type=\"radio\"\r\n                                name={question.id}\r\n                                value=\"Yes\"\r\n                                checked={inputValue === \"Yes\"}\r\n                                onChange={(e) => handleInputChange(question.id, e.target.value)}\r\n                            />\r\n                            Yes\r\n                        </label>\r\n                        <label>\r\n                            <input\r\n                                type=\"radio\"\r\n                                name={question.id}\r\n                                value=\"No\"\r\n                                checked={inputValue === \"No\"}\r\n                                onChange={(e) => handleInputChange(question.id, e.target.value)}\r\n                            />\r\n                            No\r\n                        </label>\r\n                    </div>\r\n                );\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n\r\n    const renderSectionContent = (section) => {\r\n        // Check if the section contains questions\r\n        if (section.questions) {\r\n            return section.questions.map((question, index) => (\r\n                <div key={index} style={{ marginBottom: '20px' }}>\r\n                    <p>{question.question}</p>\r\n                    {renderInput(question)}\r\n                </div>\r\n            ));\r\n        } else if (section.content) { // Handle sections that are purely informational\r\n            return <p>{section.content}</p>;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"body-container survey\" style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center' }}>\r\n            <div style={{ margin: '0 auto', textAlign: 'center' }}>\r\n                <h2>{currentSection.section}</h2>\r\n                {renderSectionContent(currentSection)}\r\n                <button onClick={handleNextClick} style={{ marginTop: '20px' }}>\r\n                    {currentSectionIndex === surveyData.length - 1 ? \"Complete and Return Home\" : \"Next\"}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default OrderSurvey;\r\n","import React, { useState, useEffect } from 'react';\r\nimport './App.css';\r\nimport { HashRouter as Router, Routes, Route, Link } from 'react-router-dom';\r\nimport Goals from './Goals';\r\nimport Product from './Product';\r\nimport Summary from './Summary';\r\nimport RecipeBuilder from './RecipeBuilder';\r\nimport FinalizeRecipe from './FinalizeRecipe';\r\nimport SavedRecipe from './SavedRecipe';\r\nimport OrderFormulation from './OrderFormulation';\r\nimport OrderSuccess from './OrderSuccess';\r\nimport Contact from './Contact';\r\nimport OrderPricing from './OrderPricing';\r\nimport VariationSelection from './VariationSelection';\r\nimport OrderSurvey from './OrderSurvey';\r\nimport { pushFirstPageLoadInfo  } from './sessionUtils';\r\n\r\n\r\nfunction App() {\r\n  const [goalsData, setGoalsData] = useState([]);\r\n  const [includeFragrance, setIncludeFragrance] = useState('no');\r\n  const [selectedMoods, setSelectedMoods] = useState([]);\r\n  const [productData, setProductData] = useState('');\r\n  \r\n  useEffect(() => {\r\n    pushFirstPageLoadInfo();\r\n  }, []); // The empty array ensures this effect runs only once after the initial render\r\n  \r\n\r\n  const setIncludeFragranceApp = (fragrance) => {\r\n    setIncludeFragrance(fragrance);\r\n  };\r\n\r\n  const setSelectedMoodsApp = (moods) => {\r\n    setSelectedMoods(moods);\r\n  };\r\n\r\n  // Style for background image\r\n  const homePageStyle = {\r\n    backgroundImage: 'url(\"bgimg.png\")',\r\n    backgroundSize: 'contain',\r\n    backgroundRepeat: 'no-repeat',\r\n    backgroundPosition: 'center top',\r\n    height: '100vh',\r\n    color: '#61685f',\r\n  };\r\n\r\n  return (\r\n    <Router>\r\n      <Routes>\r\n        <Route path=\"/\" element={\r\n          <div style={homePageStyle} className=\"homePageContainer\">\r\n            <div className=\"title\">\r\n              <h1><img src=\"/logo.png\" className=\"logo\" alt=\"A logo of a leaf inside a drop\"></img> Skincremental</h1>\r\n              <h4>Revolutionizing Skincare, One Batch at a Time!</h4>\r\n            </div>\r\n            <Link to=\"/product\"><button className=\"startbutton\">Design Custom <br /> Skincare Recipe</button></Link>\r\n            <div className=\"homepageText\">\r\n              <p><strong>Tailored to You, Evolving with You:</strong> <br /> Small batch custom-crafted skincare that adapts to your unique needs, lifestyle, and environmental changes.</p>\r\n              <p><strong>Double the Discovery, Double the Impact:</strong> <br /> Embark on a skincare adventure with every order as you try two variations of your custom formulation. Use, assess, and let us know your favorite. Our AI assistant will refine your choice into two new exploratory batches for your next order. Your skincare journey is an ongoing adventure of discovery and optimization.</p>\r\n              <p><strong>Tired of skincare cluttered with unnecessary preservatives, stabilizers and cheap synthetic fillers?</strong> We are too! Our mission is to provide you with skincare essentials free from the non-beneficial ingredients that are only added so it can sit in a warehouse for a year before it reaches you.  Our commitment to using only deeply nourishing ingredients means your skin receives only the best.</p>\r\n              <p><strong>Knowledge is Power, Especially for Your Skin:</strong>  Dive into the world of ingredients without the complexity. As you customize your formulation, we'll guide you through each ingredient's purpose. Say goodbye to mystery chemicals and hello to informed skincare choices.</p>\r\n              <p><strong>Empowered by AI:</strong>  Say hello to your new skincare partner, our AI-powered formulation assistant. It's not just about the initial match but how your skincare evolves with you, ensuring you always have the best for your skin.</p>\r\n              <p><strong>Natural Preservation, Naturally Better:</strong> Delivering small batches within days of mixing means minimal need for preservatives. When needed, we opt for natural, plant-based options. Healthier for your skin, gentler on the planet.</p>\r\n              <p><strong>Adapt with the Seasons:</strong> As the seasons change, so should your skincare. We fine-tune your formulation to adapt to seasonal shifts, ensuring your skin always gets what it needs, when it needs it.</p>\r\n              <p><strong>Craft, Share, Earn:</strong> Ready to be a skincare trendsetter? Create and perfect your unique formulation, then share it with the world. Every time someone chooses your creation, you can earn rewards or support a cause close to your heart. Empower your skin and your community!</p>\r\n              <p><strong>Conscious, Clean, and Community-Driven:</strong> We're not just about great skincare; we're about a healthier planet. Our packaging? Recycled, sterilized, and reused for future orders. Our ingredients? We strive to source from local Pacific Northwest small and family-owned businesses whenever possible. For each jar you return for recycling, well donate $1 to a local charity.</p>\r\n              <p><strong>Join the Skincremental Revolution:</strong> Where skincare is more than a routine  it's a dynamic, personalized journey. Be a part of a community that chooses sustainability, customization, and innovation.</p>\r\n            </div>\r\n            <Link to=\"/product\"><button className=\"bottomstartbutton\">Begin Your Skincare Journey</button></Link>\r\n            <Link to=\"/contact\"><span>Contact us</span></Link>\r\n          </div>\r\n        } />\r\n        <Route path=\"/goals\" element={\r\n          <Goals productData={productData}\r\n            setGoalsData={setGoalsData}\r\n            setIncludeFragranceApp={setIncludeFragranceApp}\r\n            setSelectedMoodsApp={setSelectedMoodsApp} />\r\n        } />\r\n        <Route path=\"/product\" element={<Product setProductData={setProductData} />} />\r\n        <Route path=\"/summary\" element={<Summary goalsData={goalsData}\r\n          productData={productData}\r\n          includeFragrance={includeFragrance}\r\n          selectedMoods={selectedMoods} />} />\r\n        <Route path=\"/recipe-builder\" element={<RecipeBuilder productData={productData}/>} />\r\n        <Route path=\"/finalize-recipe\" element={<FinalizeRecipe />} />\r\n        <Route path=\"/saved-recipe\" element={<SavedRecipe />} />\r\n        <Route path=\"/order-formulation\" element={<OrderFormulation />} />\r\n        <Route path=\"/order-success\" element={<OrderSuccess />} />\r\n        <Route path=\"/contact\" element={<Contact />}/>\r\n        <Route path=\"/order-pricing\" element={<OrderPricing />} />\r\n        <Route path=\"/variation-selection\" element={<VariationSelection />} />\r\n        <Route path=\"/order-survey\" element={<OrderSurvey />} />\r\n      </Routes>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}