/*! For license information please see main.e9b7444e.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,j=Object.assign;function M(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function B(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case x:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ee=null;function xe(e){if(e=_i(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),ke(e.stateNode,e.type,t))}}function Ce(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Te(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ie(e,t){return e(t)}function Ae(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ie(e,t,n)}finally{Ne=!1,(null!==Se||null!==Ee)&&(Ae(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(c)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ce){De=!1}function Fe(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Le=!1,je=null,Me=!1,Ue=null,ze={onError:function(e){Le=!0,je=e}};function Be(e,t,n,r,i,s,o,a,l){Le=!1,je=null,Fe.apply(ze,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(s(188))}function $e(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,Et,xt,Ct=!1,Tt=[],It=null,At=null,Nt=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ft(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void xt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Mt(e)&&n.delete(t)}function zt(){Ct=!1,null!==It&&Mt(It)&&(It=null),null!==At&&Mt(At)&&(At=null),null!==Nt&&Mt(Nt)&&(Nt=null),Rt.forEach(Ut),Pt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Vt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Bt(It,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)jt(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function $t(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=1,Gt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Wt(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=4,Gt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Gt(e,t,n,r){if(Ht){var i=Qt(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),Ft(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return At=Lt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ft(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&wt(s),null===(s=Qt(e,t,n,r))&&Hr(e,t,r,Kt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Qt(e,t,n,r){if(Kt=null,null!==(e=yi(e=we(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=j({},un,{view:0,detail:0}),dn=sn(hn),fn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(j({},fn,{dataTransfer:0})),mn=sn(j({},hn,{relatedTarget:0})),vn=sn(j({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(yn),bn=sn(j({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function xn(){return En}var Cn=j({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(Cn),In=sn(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Nn=sn(j({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Rn),Dn=[9,13,27,32],On=c&&"CompositionEvent"in window,Fn=null;c&&"documentMode"in document&&(Fn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Fn,jn=c&&(!On||Fn&&8<Fn&&11>=Fn),Mn=String.fromCharCode(32),Un=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function $n(e,t,n,r){Ce(r),0<(t=Wr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function Kn(e){Mr(e,0)}function Qn(e){if(G(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Gn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];$n(t,Gn,e,we(e)),Re(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==K(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Er={};function xr(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Cr=xr("animationend"),Tr=xr("animationiteration"),Ir=xr("animationstart"),Ar=xr("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Cr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Ir,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(Be.apply(this,arguments),Le){if(!Le)throw Error(s(198));var c=je;Le=!1,je=null,Me||(Me=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;jr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;jr(i,a,u),s=l}}}if(Me)throw e=Ue,Me=!1,Ue=null,e}function Ur(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=$t;break;case 4:i=Wt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=we(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Cr:case Tr:case Ir:l=vn;break;case Ar:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Pe(p,d))&&c.push($r(p,g,f)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(h=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==u?a:bi(u),(a=new c(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,yi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,g=c),h=g,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Gr(f))p++;for(f=0,g=d;g;g=Gr(g))f++;for(;0<p-f;)c=Gr(c),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Gr(c),d=Gr(d)}c=null}else c=null;null!==l&&Kr(o,a,l,c,!1),null!==u&&null!==h&&Kr(o,h,u,c,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Yn;else if(Hn(a))if(Xn)m=or;else{m=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(e,r))?$n(o,m,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Vn?zn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Vn&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Vn=!0)),0<(v=Wr(r,_)).length&&(_=new bn(_,e,null,n,i),o.push({event:_,listeners:v}),y?_.data=y:null!==(y=Bn(n))&&(_.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Mn);case"textInput":return(e=t.data)===Mn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),Zt=Jt=Xt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Mr(o,t)}))}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift($r(e,s,i)),null!=(s=Pe(e,t))&&r.push($r(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Pe(n,s))&&o.unshift($r(n,l,a)):i||null!=(l=Pe(n,s))&&o.push($r(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var ki=[],Si=-1;function Ei(e){return{current:e}}function xi(e){0>Si||(e.current=ki[Si],ki[Si]=null,Si--)}function Ci(e,t){Si++,ki[Si]=e.current,e.current=t}var Ti={},Ii=Ei(Ti),Ai=Ei(!1),Ni=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){xi(Ai),xi(Ii)}function Oi(e,t,n){if(Ii.current!==Ti)throw Error(s(168));Ci(Ii,t),Ci(Ai,n)}function Fi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return j({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ii.current,Ci(Ii,e),Ci(Ai,Ai.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Fi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,xi(Ai),xi(Ii),Ci(Ii,e)):xi(Ai),Ci(Ai,n)}var Mi=null,Ui=!1,zi=!1;function Bi(e){null===Mi?Mi=[e]:Mi.push(e)}function Vi(){if(!zi&&null!==Mi){zi=!0;var e=0,t=_t;try{var n=Mi;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Mi=null,Ui=!1}catch(i){throw null!==Mi&&(Mi=Mi.slice(e+1)),Ge(Ze,Vi),i}finally{_t=t,zi=!1}}return null}var qi=[],Hi=0,$i=null,Wi=0,Gi=[],Ki=0,Qi=null,Yi=1,Xi="";function Ji(e,t){qi[Hi++]=Wi,qi[Hi++]=$i,$i=e,Wi=t}function Zi(e,t,n){Gi[Ki++]=Yi,Gi[Ki++]=Xi,Gi[Ki++]=Qi,Qi=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else Yi=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===$i;)$i=qi[--Hi],qi[Hi]=null,Wi=qi[--Hi],qi[Hi]=null;for(;e===Qi;)Qi=Gi[--Ki],Gi[Ki]=null,Xi=Gi[--Ki],Gi[Ki]=null,Yi=Gi[--Ki],Gi[Ki]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ui(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ui(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ui(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ui(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=b.ReactCurrentBatchConfig;function ms(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=Ei(null),ys=null,_s=null,bs=null;function ws(){bs=_s=ys=null}function ks(e){var t=vs.current;xi(vs),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){ys=e,bs=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function xs(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===ys)throw Error(s(308));_s=e,ys.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var Cs=null;function Ts(e){null===Cs?Cs=[e]:Cs.push(e)}function Is(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ts(t)):(n.next=i.next,i.next=n),t.interleaved=n,As(e,r)}function As(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ns=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,As(e,n)}return null===(i=r.interleaved)?(t.next=t,Ts(r)):(t.next=i.next,i.next=t),r.interleaved=t,As(e,n)}function Fs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ls(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function js(e,t,n,r){var i=e.updateQueue;Ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=j({},h,d);break e;case 2:Ns=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);jl|=o,e.lanes=o,e.memoizedState=h}}function Ms(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Us=(new r.Component).refs;function zs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Ds(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(ru(t,e,i,r),Fs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Ds(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(ru(t,e,i,r),Fs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Ds(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(ru(t,e,r,n),Fs(t,e,r))}};function Vs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=xs(s):(i=Pi(t)?Ni:Ii.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Hs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function $s(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Us,Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=xs(s):(s=Pi(t)?Ni:Ii.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(zs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),js(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ws(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Us&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ks(e){return(0,e._init)(e._payload)}function Qs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ou(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Ks(s)===t.type)?((r=i(t,n.props)).ref=Ws(e,t,n),r.return=e,r):((r=Fu(n.type,n.key,n.props,null,e.mode,r)).ref=Ws(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Fu(t.type,t.key,t.props,null,e.mode,n)).ref=Ws(e,null,t),n.return=e,n;case k:return(t=Uu(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||F(t))return(t=Lu(t,e.mode,n,null)).return=e,t;Gs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case k:return n.key===i?c(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||F(n))return null!==i?null:h(e,t,n,r,null);Gs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||F(r))return h(t,e=e.get(n)||null,r,i,null);Gs(t,r)}return null}function g(i,s,a,l){for(var u=null,c=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(i,h,a[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,g),null===c?u=v:c.sibling=v,c=v,h=m}if(g===a.length)return n(i,h),is&&Ji(i,g),u;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(s=o(h,s,g),null===c?u=h:c.sibling=h,c=h);return is&&Ji(i,g),u}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),is&&Ji(i,g),u}function m(i,a,l,u){var c=F(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var _=f(i,g,y.value,u);if(null===_){null===g&&(g=v);break}e&&g&&null===_.alternate&&t(i,g),a=o(_,a,m),null===h?c=_:h.sibling=_,h=_,g=v}if(y.done)return n(i,g),is&&Ji(i,m),c;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,u))&&(a=o(y,a,m),null===h?c=y:h.sibling=y,h=y);return is&&Ji(i,m),c}for(g=r(i,g);!y.done;m++,y=l.next())null!==(y=p(g,i,m,y.value,u))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=o(y,a,m),null===h?c=y:h.sibling=y,h=y);return e&&g.forEach((function(e){return t(i,e)})),is&&Ji(i,m),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===S){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===P&&Ks(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=Ws(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===S?((s=Lu(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Fu(o.type,o.key,o.props,null,r.mode,l)).ref=Ws(r,s,o),l.return=r,r=l)}return a(r);case k:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uu(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return g(r,s,o,l);if(F(o))return m(r,s,o,l);Gs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Mu(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Ys=Qs(!0),Xs=Qs(!1),Js={},Zs=Ei(Js),eo=Ei(Js),to=Ei(Js);function no(e){if(e===Js)throw Error(s(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Zs,Js),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Zs),Ci(Zs,t)}function io(){xi(Zs),xi(eo),xi(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(Ci(eo,e),Ci(Zs,n))}function oo(e){eo.current===e&&(xi(Zs),xi(eo))}var ao=Ei(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,go=null,mo=null,vo=null,yo=!1,_o=!1,bo=0,wo=0;function ko(){throw Error(s(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,go=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),_o){o=0;do{if(_o=!1,bo=0,25<=o)throw Error(s(301));o+=1,vo=mo=null,t.updateQueue=null,ho.current=ua,e=n(r,i)}while(_o)}if(ho.current=oa,t=null!==mo&&null!==mo.next,po=0,vo=mo=go=null,yo=!1,t)throw Error(s(300));return e}function xo(){var e=0!==bo;return bo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?go.memoizedState=vo=e:vo=vo.next=e,vo}function To(){if(null===mo){var e=go.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===vo?go.memoizedState:vo.next;if(null!==t)vo=t,mo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===vo?go.memoizedState=vo=e:vo=vo.next=e}return vo}function Io(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((po&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,go.lanes|=h,jl|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,go.lanes|=o,jl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=go,r=To(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ho(Fo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&jo(e)}function Fo(e,t,n){return n((function(){Lo(t)&&jo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function jo(e){var t=As(e,1);null!==t&&ru(t,e,1,-1)}function Mo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,go,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return To().memoizedState}function Bo(e,t,n,r){var i=Co();go.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Vo(e,t,n,r){var i=To();r=void 0===r?null:r;var s=void 0;if(null!==mo){var o=mo.memoizedState;if(s=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=Uo(t,n,s,r))}go.flags|=e,i.memoizedState=Uo(1|t,n,s,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ho(e,t){return Vo(2048,8,e,t)}function $o(e,t){return Vo(4,2,e,t)}function Wo(e,t){return Vo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4,4,Go.bind(null,t,e),n)}function Qo(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),go.lanes|=n,jl|=n,e.baseState=!0),t)}function Zo(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{_t=n,fo.transition=r}}function ea(){return To().memoizedState}function ta(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Is(e,t,n,r))){ru(n,e,r,tu()),sa(n,t,r)}}function na(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ts(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Is(e,t,i,r))&&(ru(n,e,r,i=tu()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===go||null!==t&&t===go}function ia(e,t){_o=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:xs,useCallback:ko,useContext:ko,useEffect:ko,useImperativeHandle:ko,useInsertionEffect:ko,useLayoutEffect:ko,useMemo:ko,useReducer:ko,useRef:ko,useState:ko,useDebugValue:ko,useDeferredValue:ko,useTransition:ko,useMutableSource:ko,useSyncExternalStore:ko,useId:ko,unstable_isNewReconciler:!1},aa={readContext:xs,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:xs,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,go,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:Mo,useDebugValue:Qo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=Mo(!1),t=e[0];return e=Zo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=go,i=Co();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Fo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Nl.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:xs,useCallback:Yo,useContext:xs,useEffect:Ho,useImperativeHandle:Ko,useInsertionEffect:$o,useLayoutEffect:Wo,useMemo:Xo,useReducer:Ao,useRef:zo,useState:function(){return Ao(Io)},useDebugValue:Qo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[Ao(Io)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1},ua={readContext:xs,useCallback:Yo,useContext:xs,useEffect:Ho,useImperativeHandle:Ko,useInsertionEffect:$o,useLayoutEffect:Wo,useMemo:Xo,useReducer:No,useRef:zo,useState:function(){return No(Io)},useDebugValue:Qo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[No(Io)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1};function ca(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ds(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$l||($l=!0,Wl=r),da(0,t)},n}function ga(e,t,n){(n=Ds(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cu.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ds(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _a=b.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?Xs(t,null,n,r):Ys(t,e.child,n,r)}function ka(e,t,n,r,i){n=n.render;var s=t.ref;return Es(t,i),r=Eo(e,t,n,r,s,i),n=xo(),null===e||ba?(is&&n&&es(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$a(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Du(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return $a(e,t,i)}return t.flags|=1,(e=Ou(s,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,$a(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ta(e,t,n,r,i)}function xa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ol,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ol,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ci(Ol,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ci(Ol,Dl),Dl|=r;return wa(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Pi(n)?Ni:Ii.current;return s=Ri(t,s),Es(t,i),n=Eo(e,t,n,r,s,i),r=xo(),null===e||ba?(is&&r&&es(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$a(e,t,i))}function Ia(e,t,n,r,i){if(Pi(n)){var s=!0;Li(t)}else s=!1;if(Es(t,i),null===t.stateNode)Ha(e,t),qs(t,n,r),$s(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=xs(u):u=Ri(t,u=Pi(n)?Ni:Ii.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&Hs(t,o,r,u),Ns=!1;var d=t.memoizedState;o.state=d,js(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ai.current||Ns?("function"===typeof c&&(zs(t,n,c,r),l=t.memoizedState),(a=Ns||Vs(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ps(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:ms(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=xs(l):l=Ri(t,l=Pi(n)?Ni:Ii.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Hs(t,o,r,l),Ns=!1,d=t.memoizedState,o.state=d,js(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Ns?("function"===typeof f&&(zs(t,n,f,r),p=t.memoizedState),(u=Ns||Vs(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,s,i)}function Aa(e,t,n,r,i,s){Ca(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),$a(e,t,s);r=t.stateNode,_a.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ys(t,e.child,null,s),t.child=Ys(t,null,a,s)):wa(e,t,a,s),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ra(e,t,n,r,i){return fs(),ps(i),t.flags|=256,wa(e,t,n,r),t.child}var Pa,Da,Oa,Fa,La={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ma(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(ao,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=ju(l,i,0,null),e=Lu(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ja(n),t.memoizedState=La,e):Ua(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=ju({mode:"visible",children:r.children},i,0,null),(o=Lu(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ys(t,e.child,null,a),t.child.memoizedState=ja(a),t.memoizedState=La,o);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,As(e,i),ru(r,e,i,-1))}return mu(),za(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Iu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ui(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Ki++]=Yi,Gi[Ki++]=Xi,Gi[Ki++]=Qi,Yi=e.id,Xi=e.overflow,Qi=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Ou(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Ou(r,a):(a=Lu(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?ja(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Ou(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=ju({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&ps(r),Ys(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ss(e.return,t,n)}function Va(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,s);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $a(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ou(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ou(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Pi(t.type)&&Di(),Ga(t),null;case 3:return r=t.stateNode,io(),xi(Ai),xi(Ii),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(au(ss),ss=null))),Da(e,t),Ga(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Fr.length;i++)Ur(Fr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Fr.length;i++)Ur(Fr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ur("scroll",e):null!=c&&_(e,o,c,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)Fa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(xi(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(au(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Fl&&(Fl=3):mu())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return io(),Da(e,t),null===e&&Vr(t.stateNode.containerInfo),Ga(t),null;case 10:return ks(t.type._context),Ga(t),null;case 19:if(xi(ao),null===(o=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Wa(o,!1);else{if(0!==Fl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Wa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>ql&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ga(t),null}else 2*Xe()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ao.current,Ci(ao,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),xi(Ai),xi(Ii),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(xi(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(ao),null;case 4:return io(),null;case 10:return ks(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Ur("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Fa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Xa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xu(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){xu(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Xa&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xu(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,fl(e,t,n),Xa=r):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Au.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){xu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(m){xu(e,e.return,m)}try{rl(5,e,e.return)}catch(m){xu(e,e.return,m)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){xu(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),_e(l,a);var c=_e(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,c)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){xu(e,e.return,m)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){xu(e,e.return,m)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){xu(e,e.return,m)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Xe())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(c=Xa)||h,ml(t,e),Xa=c):ml(t,e),yl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){xu(r,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){kl(d);continue}}null!==p?(p.return=f,Za=p):kl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ge("display",a))}catch(m){xu(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){xu(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&gl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){xu(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Ya;var u=Xa;if(Ya=o,(Xa=l)&&!u)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Sl(i):null!==l?(l.return=o,Za=l):Sl(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,Ya=a,Xa=u}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):wl(e)}}function wl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ms(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ms(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ms(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(s(163))}Xa||512&t.flags&&sl(t)}catch(f){xu(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function kl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Sl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){xu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){xu(t,i,l)}}var s=t.return;try{sl(t)}catch(l){xu(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){xu(t,o,l)}}}catch(l){xu(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var El,xl=Math.ceil,Cl=b.ReactCurrentDispatcher,Tl=b.ReactCurrentOwner,Il=b.ReactCurrentBatchConfig,Al=0,Nl=null,Rl=null,Pl=0,Dl=0,Ol=Ei(0),Fl=0,Ll=null,jl=0,Ml=0,Ul=0,zl=null,Bl=null,Vl=0,ql=1/0,Hl=null,$l=!1,Wl=null,Gl=null,Kl=!1,Ql=null,Yl=0,Xl=0,Jl=null,Zl=-1,eu=0;function tu(){return 0!==(6&Al)?Xe():-1!==Zl?Zl:Zl=Xe()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==gs.transition?(0===eu&&(eu=gt()),eu):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function ru(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));vt(e,n,r),0!==(2&Al)&&e===Nl||(e===Nl&&(0===(2&Al)&&(Ml|=n),4===Fl&&lu(e,Pl)),iu(e,r),1===n&&0===Al&&0===(1&t.mode)&&(ql=Xe()+500,Ui&&Vi()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nl?Pl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(uu.bind(null,e)):Bi(uu.bind(null,e)),oi((function(){0===(6&Al)&&Vi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nu(n,su.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function su(e,t){if(Zl=-1,eu=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(Su()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vu(e,r);else{t=r;var i=Al;Al|=2;var o=gu();for(Nl===e&&Pl===t||(Hl=null,ql=Xe()+500,fu(e,t));;)try{_u();break}catch(l){pu(e,l)}ws(),Cl.current=o,Al=i,null!==Rl?t=0:(Nl=null,Pl=0,t=Fl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ou(e,i))),1===t)throw n=Ll,fu(e,0),lu(e,r),iu(e,Xe()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vu(e,r))&&(0!==(o=pt(e))&&(r=o,t=ou(e,o))),1===t))throw n=Ll,fu(e,0),lu(e,r),iu(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:ku(e,Bl,Hl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=Vl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(ku.bind(null,e,Bl,Hl),t);break}ku(e,Bl,Hl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=ri(ku.bind(null,e,Bl,Hl),r);break}ku(e,Bl,Hl);break;default:throw Error(s(329))}}}return iu(e,Xe()),e.callbackNode===n?su.bind(null,e):null}function ou(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=Bl,Bl=n,null!==t&&au(t)),e}function au(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lu(e,t){for(t&=~Ul,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Al))throw Error(s(327));Su();var t=dt(e,0);if(0===(1&t))return iu(e,Xe()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Ll,fu(e,0),lu(e,t),iu(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ku(e,Bl,Hl),iu(e,Xe()),null}function cu(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(ql=Xe()+500,Ui&&Vi())}}function hu(e){null!==Ql&&0===Ql.tag&&0===(6&Al)&&Su();var t=Al;Al|=1;var n=Il.transition,r=_t;try{if(Il.transition=null,_t=1,e)return e()}finally{_t=r,Il.transition=n,0===(6&(Al=t))&&Vi()}}function du(){Dl=Ol.current,xi(Ol)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),xi(Ai),xi(Ii),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:xi(ao);break;case 10:ks(r.type._context);break;case 22:case 23:du()}n=n.return}if(Nl=e,Rl=e=Ou(e.current,null),Pl=Dl=t,Fl=0,Ll=null,Ul=Ml=jl=0,Bl=zl=null,null!==Cs){for(t=0;t<Cs.length;t++)if(null!==(r=(n=Cs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Cs=null}return e}function pu(e,t){for(;;){var n=Rl;try{if(ws(),ho.current=oa,yo){for(var r=go.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,vo=mo=go=null,_o=!1,bo=0,Tl.current=null,null===n||null===n.return){Fl=1,Ll=t,Rl=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Pl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(o,c,t),u=c;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(u),t.updateQueue=m}else g.add(u);break e}if(0===(1&t)){ma(o,c,t),mu();break e}u=Error(s(426))}else if(is&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),ps(ca(u,l));break e}}o=u=ca(u,l),4!==Fl&&(Fl=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,pa(0,u,t));break e;case 1:l=u;var y=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Gl||!Gl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}wu(n)}catch(b){t=b,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function gu(){var e=Cl.current;return Cl.current=oa,null===e?oa:e}function mu(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Nl||0===(268435455&jl)&&0===(268435455&Ml)||lu(Nl,Pl)}function vu(e,t){var n=Al;Al|=2;var r=gu();for(Nl===e&&Pl===t||(Hl=null,fu(e,t));;)try{yu();break}catch(i){pu(e,i)}if(ws(),Al=n,Cl.current=r,null!==Rl)throw Error(s(261));return Nl=null,Pl=0,Fl}function yu(){for(;null!==Rl;)bu(Rl)}function _u(){for(;null!==Rl&&!Qe();)bu(Rl)}function bu(e){var t=El(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?wu(e):Rl=t,Tl.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Dl)))return void(Rl=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Fl=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Fl&&(Fl=5)}function ku(e,t,n){var r=_t,i=Il.transition;try{Il.transition=null,_t=1,function(e,t,n,r){do{Su()}while(null!==Ql);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Rl=Nl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Nu(tt,(function(){return Su(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Il.transition,Il.transition=null;var a=_t;_t=1;var l=Al;Al|=4,Tl.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===o&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ms(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){xu(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}g=nl,nl=!1}(e,n),vl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,_l(n,e,i),Ye(),Al=l,_t=a,Il.transition=o}else e.current=n;if(Kl&&(Kl=!1,Ql=e,Yl=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($l)throw $l=!1,e=Wl,Wl=null,e;0!==(1&Yl)&&0!==e.tag&&Su(),o=e.pendingLanes,0!==(1&o)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Vi()}(e,t,n,r)}finally{Il.transition=i,_t=r}return null}function Su(){if(null!==Ql){var e=bt(Yl),t=Il.transition,n=_t;try{if(Il.transition=null,_t=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&Al))throw Error(s(331));var i=Al;for(Al|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Za=c;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===c){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Za=y;break e}Za=o.return}}var _=e.current;for(Za=_;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=_;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(k){xu(l,l.return,k)}if(l===a){Za=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Za=w;break e}Za=l.return}}if(Al=i,Vi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{_t=n,Il.transition=t}}return!1}function Eu(e,t,n){e=Os(e,t=pa(0,t=ca(n,t),1),1),t=tu(),null!==e&&(vt(e,1,t),iu(e,t))}function xu(e,t,n){if(3===e.tag)Eu(e,e,n);else for(;null!==t;){if(3===t.tag){Eu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Os(t,e=ga(t,e=ca(n,e),1),1),e=tu(),null!==t&&(vt(t,1,e),iu(t,e));break}}t=t.return}}function Cu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Pl&n)===n&&(4===Fl||3===Fl&&(130023424&Pl)===Pl&&500>Xe()-Vl?fu(e,0):Ul|=n),iu(e,t)}function Tu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=As(e,t))&&(vt(e,t,n),iu(e,n))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function Au(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tu(e,n)}function Nu(e,t){return Ge(e,t)}function Ru(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Ru(e,t,n,r)}function Du(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ou(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fu(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Du(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Lu(n.children,i,o,t);case E:a=8,i|=8;break;case x:return(e=Pu(12,n,t,2|i)).elementType=x,e.lanes=o,e;case A:return(e=Pu(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Pu(19,n,t,i)).elementType=N,e.lanes=o,e;case D:return ju(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case T:a=9;break e;case I:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pu(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lu(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function ju(e,t,n,r){return(e=Pu(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Mu(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function Uu(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bu(e,t,n,r,i,s,o,a,l){return e=new zu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function Vu(e){if(!e)return Ti;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Fi(e,n,t)}return t}function qu(e,t,n,r,i,s,o,a,l){return(e=Bu(n,r,!0,e,0,s,0,a,l)).context=Vu(null),n=e.current,(s=Ds(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,vt(e,i,r),iu(e,r),e}function Hu(e,t,n,r){var i=t.current,s=tu(),o=nu(i);return n=Vu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ds(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(ru(e,i,o,s),Fs(e,i,o)),o}function $u(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gu(e,t){Wu(e,t),(e=e.alternate)&&Wu(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:so(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ma(e,t,n):(Ci(ao,1&ao.current),null!==(e=$a(e,t,n))?e.sibling:null);Ci(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,xa(e,t,n)}return $a(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Ri(t,Ii.current);Es(t,n),i=Eo(null,t,r,e,i,n);var o=xo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Rs(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,$s(t,r,e,n),t=Aa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Du(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=ms(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Ia(null,t,r,e,n);break e;case 11:t=ka(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,ms(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ps(e,t),js(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ui(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=$a(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&us(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ca(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&us(t),null;case 13:return Ma(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ys(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ci(vs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=$a(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Ds(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ss(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ss(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Es(t,n),r=r(i=xs(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=ms(r=t.type,t.pendingProps),Sa(e,t,r,i=ms(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ms(r,i),Ha(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Es(t,n),qs(t,r,i),$s(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return xa(e,t,n)}throw Error(s(156,t.tag))};var Ku="function"===typeof reportError?reportError:function(e){console.error(e)};function Qu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function ec(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=$u(o);a.call(e)}}Hu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=$u(o);s.call(e)}}var o=qu(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=o,e[pi]=o.current,Vr(8===e.nodeType?e.parentNode:e),hu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=$u(l);a.call(e)}}var l=Bu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[pi]=l.current,Vr(8===e.nodeType?e.parentNode:e),hu((function(){Hu(t,l,n,r)})),l}(n,t,e,i,r);return $u(o)}Yu.prototype.render=Qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hu(e,t,null,null)},Yu.prototype.unmount=Qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Hu(null,e,null,null)})),t[pi]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),iu(t,Xe()),0===(6&Al)&&(ql=Xe()+500,Vi()))}break;case 13:hu((function(){var t=As(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Gu(e,1)}},kt=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)ru(t,e,134217728,tu());Gu(e,134217728)}},St=function(e){if(13===e.tag){var t=nu(e),n=As(e,t);if(null!==n)ru(n,e,t,tu());Gu(e,t)}},Et=function(){return _t},xt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));G(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cu,Ae=hu;var tc={usingClientEntryPoint:!1,Events:[_i,bi,wi,Ce,Te,cu]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),st=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xu(e))throw Error(s(299));var n=!1,r="",i=Ku;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Qu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e){return hu(e)},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(s(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Ku;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yu(t)},t.render=function(e,t,n){if(!Ju(t))throw Error(s(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(s(40));return!!e._reactRootContainer&&(hu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ju(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:a.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=_.prototype=new y;b.constructor=_,g(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+I(l,0):s,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var u=0;u<e.length;u++){var c=s+I(a=e[u],u);l+=A(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,c=s+I(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:S};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)k.call(t,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(m=!1,b(e),!g)if(null!==r(u))g=!0,D(k);else{var t=r(c);null!==t&&O(w,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,y(C),C=-1),p=!0;var s=f;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&O(w,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,x=null,C=-1,T=5,I=-1;function A(){return!(t.unstable_now()-I<T)}function N(){if(null!==x){var e=t.unstable_now();I=e;var n=!0;try{n=x(!0,e)}finally{n?S():(E=!1,x=null)}}else E=!1}if("function"===typeof _)S=function(){_(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=N,S=function(){P.postMessage(null)}}else S=function(){v(N,0)};function D(e){x=e,E||(E=!0,S())}function O(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,D(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(m?(y(C),C=-1):m=!0,O(w,s-o))):(e.sortIndex=a,n(u,e),g||p||(g=!0,D(k))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{e.exports=n(234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".03f021ac.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="skincare:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],u=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)s=o[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkskincare=self.webpackChunkskincare||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{var e,t=n(43),r=n.t(t,2),i=n(391),s=n(950),o=n.t(s,2);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const l="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Tg){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(t,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,c=s.history,p=e.Pop,g=null,m=v();function v(){return(c.state||{idx:null}).idx}function y(){p=e.Pop;let t=v(),n=null==t?null:t-m;m=t,g&&g({action:p,location:b.location,delta:n})}function _(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:f(e);return u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,c.replaceState(a({},c.state,{idx:m}),""));let b={get action(){return p},get location(){return t(s,c)},listen(e){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener(l,y),g=e,()=>{s.removeEventListener(l,y),g=null}},createHref:e=>n(s,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let i=d(b.location,t,n);r&&r(i,t),m=v()+1;let a=h(i,m),l=b.createHref(i);try{c.pushState(a,"",l)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(l)}o&&g&&g({action:p,location:b.location,delta:1})},replace:function(t,n){p=e.Replace;let i=d(b.location,t,n);r&&r(i,t),m=v();let s=h(i,m),a=b.createHref(i);c.replaceState(s,"",a),o&&g&&g({action:p,location:b.location,delta:0})},go:e=>c.go(e)};return b}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){void 0===n&&(n="/");let r=R(("string"===typeof t?p(t):t).pathname||"/",n);if(null==r)return null;let i=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=I(i[o],N(r));return s}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=L([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),y(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:T(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of _(e.path))i(e,t,r);else i(e,t)})),t}function _(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=_(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:[\w-]+$/,w=3,k=2,S=1,E=10,x=-2,C=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=x),t&&(r+=k),n.filter((e=>!C(e))).reduce(((e,t)=>e+(b.test(t)?w:""===t?S:E)),r)}function I(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!u)return null;Object.assign(r,u.params);let c=e.route;s.push({params:r,pathname:L([i,u.pathname]),pathnameBase:j(L([i,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(i=L([i,u.pathnameBase]))}return s}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return c(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l||"",r),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function N(e){try{return decodeURI(e)}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function P(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function O(e,t){let n=D(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=p(e):(i=a({},e),u(!i.pathname||!i.pathname.includes("?"),P("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),P("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),P("#","search","hash",i)));let s,o=""===e||""===i.pathname,l=o?"/":i.pathname;if(null==l)s=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?p(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:M(r),hash:U(i)}}(i,s),h=l&&"/"!==l&&l.endsWith("/"),d=(o||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const L=e=>e.join("/").replace(/\/\/+/g,"/"),j=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],V=(new Set(B),["get",...B]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}const H=t.createContext(null);const $=t.createContext(null);const W=t.createContext(null);const G=t.createContext(null);const K=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=t.createContext(null);function Y(){return null!=t.useContext(G)}function X(){return Y()||u(!1),t.useContext(G).location}function J(e){t.useContext(W).static||t.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=t.useContext(K);return e?function(){let{router:e}=ue(ae.UseNavigateStable),n=he(le.UseNavigateStable),r=t.useRef(!1);J((()=>{r.current=!0}));let i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,q({fromRouteId:n},i)))}),[e,n]);return i}():function(){Y()||u(!1);let e=t.useContext(H),{basename:n,future:r,navigator:i}=t.useContext(W),{matches:s}=t.useContext(K),{pathname:o}=X(),a=JSON.stringify(O(s,r.v7_relativeSplatPath)),l=t.useRef(!1);return J((()=>{l.current=!0})),t.useCallback((function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void i.go(t);let s=F(t,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==n&&(s.pathname="/"===s.pathname?n:L([n,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[n,i,a,o,e])}()}function ee(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(W),{matches:s}=t.useContext(K),{pathname:o}=X(),a=JSON.stringify(O(s,i.v7_relativeSplatPath));return t.useMemo((()=>F(e,JSON.parse(a),o,"path"===r)),[e,a,o,r])}function te(n,r,i,s){Y()||u(!1);let{navigator:o}=t.useContext(W),{matches:a}=t.useContext(K),l=a[a.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=X();if(r){var g;let e="string"===typeof r?p(r):r;"/"===h||(null==(g=e.pathname)?void 0:g.startsWith(h))||u(!1),d=e}else d=f;let m=d.pathname||"/",y=v(n,{pathname:"/"===h?m:m.slice(h.length)||"/"});let _=oe(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:L([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:L([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return r&&_?t.createElement(G.Provider,{value:{location:q({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:e.Pop}},_):_}function ne(){let e=function(){var e;let n=t.useContext(Q),r=ce(le.UseRouteError),i=he(le.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:s},r):null,null)}const re=t.createElement(ne,null);class ie extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(K.Provider,{value:this.props.routeContext},t.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:n,match:r,children:i}=e,s=t.useContext(H);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(K.Provider,{value:n},i)}function oe(e,n,r,i){var s;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var o;if(null==(o=r)||!o.errors)return null;e=r.matches}let a=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,u=!1,d=null,f=null;var p;r&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||re,c&&(h<0&&0===s?(p="route-fallback",!1||de[p]||(de[p]=!0),u=!0,f=null):h===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let g=n.concat(a.slice(0,s+1)),m=()=>{let n;return n=o?d:u?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(se,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?t.createElement(ie,{location:r.location,revalidation:r.revalidation,component:d,error:o,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ue(e){let n=t.useContext(H);return n||u(!1),n}function ce(e){let n=t.useContext($);return n||u(!1),n}function he(e){let n=function(e){let n=t.useContext(K);return n||u(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||u(!1),r.route.id}const de={};r.startTransition;function fe(e){u(!1)}function pe(n){let{basename:r="/",children:i=null,location:s,navigationType:o=e.Pop,navigator:a,static:l=!1,future:c}=n;Y()&&u(!1);let h=r.replace(/^\/*/,"/"),d=t.useMemo((()=>({basename:h,navigator:a,static:l,future:q({v7_relativeSplatPath:!1},c)})),[h,c,a,l]);"string"===typeof s&&(s=p(s));let{pathname:f="/",search:g="",hash:m="",state:v=null,key:y="default"}=s,_=t.useMemo((()=>{let e=R(f,h);return null==e?null:{location:{pathname:e,search:g,hash:m,state:v,key:y},navigationType:o}}),[h,f,g,m,v,y,o]);return null==_?null:t.createElement(W.Provider,{value:d},t.createElement(G.Provider,{children:i,value:_}))}function ge(e){let{children:t,location:n}=e;return te(me(t),n)}new Promise((()=>{}));t.Component;function me(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let s=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,me(e.props.children,s));e.type!==fe&&u(!1),e.props.index&&e.props.children&&u(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=me(e.props.children,s)),r.push(o)})),r}function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(this,arguments)}function ye(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;const be=r.startTransition;o.flushSync,r.useId;function we(e){let{basename:n,children:r,future:i,window:s}=e,o=t.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=p(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),d("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:f(t))}),(function(e,t){c("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),a)));let l=o.current,[u,h]=t.useState({action:l.action,location:l.location}),{v7_startTransition:m}=i||{},v=t.useCallback((e=>{m&&be?be((()=>h(e))):h(e)}),[h,m]);return t.useLayoutEffect((()=>l.listen(v)),[l,v]),t.createElement(pe,{basename:n,children:r,location:u.location,navigationType:u.action,navigator:l,future:i})}const ke="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Se=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ee=t.forwardRef((function(e,n){let r,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:h,preventScrollReset:d,unstable_viewTransition:p}=e,g=ye(e,_e),{basename:m}=t.useContext(W),v=!1;if("string"===typeof h&&Se.test(h)&&(r=h,ke))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=R(t.pathname,m);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(Tg){}let y=function(e,n){let{relative:r}=void 0===n?{}:n;Y()||u(!1);let{basename:i,navigator:s}=t.useContext(W),{hash:o,pathname:a,search:l}=ee(e,{relative:r}),c=a;return"/"!==i&&(c="/"===a?i:L([i,a])),s.createHref({pathname:c,search:l,hash:o})}(h,{relative:s}),_=function(e,n){let{target:r,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===n?{}:n,u=Z(),c=X(),h=ee(e,{relative:a});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:f(c)===f(h);u(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[c,u,h,i,s,r,e,o,a,l])}(h,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,unstable_viewTransition:p});return t.createElement("a",ve({},g,{href:r||y,onClick:v||o?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:n,target:c}))}));var xe,Ce;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(xe||(xe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ce||(Ce={}));const Te=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Te(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Ae;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ne=function(e){return function(e){const t=Te(e);return Ie.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Re=function(e){try{return Ie.decodeString(e,!0)}catch(Tg){console.error("base64Decode failed: ",Tg)}return null};const Pe=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,De=()=>{try{return Pe()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Tg){return}const t=e&&Re(e[1]);return t&&JSON.parse(t)})()}catch(Tg){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Tg))}},Oe=e=>{const t=(e=>{var t,n;return null===(n=null===(t=De())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Fe=()=>{var e;return null===(e=De())||void 0===e?void 0:e.config};class Le{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function je(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Me(){return!function(){var e;const t=null===(e=De())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Tg){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ue(){try{return"object"===typeof indexedDB}catch(Tg){return!1}}class ze extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Be.prototype.create)}}class Be{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ve,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ze(n,s,t)}}const Ve=/\{\$([^}]+)}/g;function qe(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(He(n)&&He(s)){if(!qe(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function He(e){return null!==e&&"object"===typeof e}function $e(e){return e&&e._delegate?e._delegate:e}class We{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ge="[DEFAULT]";class Ke{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Le;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Tg){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Tg){if(r)return null;throw Tg}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ge})}catch(Tg){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Tg){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Ge?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;return this.component?this.component.multipleInstances?e:Ge:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Qe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ke(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ye=[];var Xe;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Xe||(Xe={}));const Je={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},Ze=Xe.INFO,et={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},tt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=et[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class nt{constructor(e){this.name=e,this._logLevel=Ze,this._logHandler=tt,this._userLogHandler=null,Ye.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Je[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...t),this._logHandler(this,Xe.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...t),this._logHandler(this,Xe.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...t),this._logHandler(this,Xe.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...t),this._logHandler(this,Xe.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...t),this._logHandler(this,Xe.ERROR,...t)}}const rt=(e,t)=>t.some((t=>e instanceof t));let it,st;const ot=new WeakMap,at=new WeakMap,lt=new WeakMap,ut=new WeakMap,ct=new WeakMap;let ht={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return at.get(e);if("objectStoreNames"===t)return e.objectStoreNames||lt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function dt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(st||(st=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(gt(this),n),pt(ot.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pt(e.apply(gt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(gt(this),t,...r);return lt.set(s,t.sort?t.sort():[t]),pt(s)}}function ft(e){return"function"===typeof e?dt(e):(e instanceof IDBTransaction&&function(e){if(at.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));at.set(e,t)}(e),rt(e,it||(it=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ht):e)}function pt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(pt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&ot.set(t,e)})).catch((()=>{})),ct.set(t,e),t}(e);if(ut.has(e))return ut.get(e);const t=ft(e);return t!==e&&(ut.set(e,t),ct.set(t,e)),t}const gt=e=>ct.get(e);const mt=["get","getKey","getAll","getAllKeys","count"],vt=["put","add","delete","clear"],yt=new Map;function _t(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(yt.get(t))return yt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=vt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!mt.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return yt.set(t,s),s}ht=(e=>({...e,get:(t,n,r)=>_t(t,n)||e.get(t,n,r),has:(t,n)=>!!_t(t,n)||e.has(t,n)}))(ht);class bt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const wt="@firebase/app",kt="0.10.2",St=new nt("@firebase/app"),Et="@firebase/app-compat",xt="@firebase/analytics-compat",Ct="@firebase/analytics",Tt="@firebase/app-check-compat",It="@firebase/app-check",At="@firebase/auth",Nt="@firebase/auth-compat",Rt="@firebase/database",Pt="@firebase/database-compat",Dt="@firebase/functions",Ot="@firebase/functions-compat",Ft="@firebase/installations",Lt="@firebase/installations-compat",jt="@firebase/messaging",Mt="@firebase/messaging-compat",Ut="@firebase/performance",zt="@firebase/performance-compat",Bt="@firebase/remote-config",Vt="@firebase/remote-config-compat",qt="@firebase/storage",Ht="@firebase/storage-compat",$t="@firebase/firestore",Wt="@firebase/firestore-compat",Gt="firebase",Kt="[DEFAULT]",Qt={[wt]:"fire-core",[Et]:"fire-core-compat",[Ct]:"fire-analytics",[xt]:"fire-analytics-compat",[It]:"fire-app-check",[Tt]:"fire-app-check-compat",[At]:"fire-auth",[Nt]:"fire-auth-compat",[Rt]:"fire-rtdb",[Pt]:"fire-rtdb-compat",[Dt]:"fire-fn",[Ot]:"fire-fn-compat",[Ft]:"fire-iid",[Lt]:"fire-iid-compat",[jt]:"fire-fcm",[Mt]:"fire-fcm-compat",[Ut]:"fire-perf",[zt]:"fire-perf-compat",[Bt]:"fire-rc",[Vt]:"fire-rc-compat",[qt]:"fire-gcs",[Ht]:"fire-gcs-compat",[$t]:"fire-fst",[Wt]:"fire-fst-compat","fire-js":"fire-js",[Gt]:"fire-js-all"},Yt=new Map,Xt=new Map,Jt=new Map;function Zt(e,t){try{e.container.addComponent(t)}catch(Tg){St.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Tg)}}function en(e){const t=e.name;if(Jt.has(t))return St.debug("There were multiple attempts to register component ".concat(t,".")),!1;Jt.set(t,e);for(const n of Yt.values())Zt(n,e);for(const n of Xt.values())Zt(n,e);return!0}function tn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const nn=new Be("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class rn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new We("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nn.create("app-deleted",{appName:this._name})}}function sn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw nn.create("bad-app-name",{appName:String(i)});if(n||(n=Fe()),!n)throw nn.create("no-options");const s=Yt.get(i);if(s){if(qe(n,s.options)&&qe(r,s.config))return s;throw nn.create("duplicate-app",{appName:i})}const o=new Qe(i);for(const l of Jt.values())o.addComponent(l);const a=new rn(n,r,o);return Yt.set(i,a),a}function on(e,t,n){var r;let i=null!==(r=Qt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void St.warn(e.join(" "))}en(new We("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const an="firebase-heartbeat-database",ln=1,un="firebase-heartbeat-store";let cn=null;function hn(){return cn||(cn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=pt(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(pt(o.result),e.oldVersion,e.newVersion,pt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(an,ln,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(un)}catch(Tg){console.warn(Tg)}}}).catch((e=>{throw nn.create("idb-open",{originalErrorMessage:e.message})}))),cn}async function dn(e,t){try{const n=(await hn()).transaction(un,"readwrite"),r=n.objectStore(un);await r.put(t,fn(e)),await n.done}catch(Tg){if(Tg instanceof ze)St.warn(Tg.message);else{const t=nn.create("idb-set",{originalErrorMessage:null===Tg||void 0===Tg?void 0:Tg.message});St.warn(t.message)}}}function fn(e){return"".concat(e.name,"!").concat(e.options.appId)}class pn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=gn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=gn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),vn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ne(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function gn(){return(new Date).toISOString().substring(0,10)}class mn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ue()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await hn()).transaction(un),n=await t.objectStore(un).get(fn(e));return await t.done,n}catch(Tg){if(Tg instanceof ze)St.warn(Tg.message);else{const t=nn.create("idb-get",{originalErrorMessage:null===Tg||void 0===Tg?void 0:Tg.message});St.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return dn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return dn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function vn(e){return Ne(JSON.stringify({version:2,heartbeats:e})).length}var yn;yn="",en(new We("platform-logger",(e=>new bt(e)),"PRIVATE")),en(new We("heartbeat",(e=>new pn(e)),"PRIVATE")),on(wt,kt,yn),on(wt,kt,"esm2017"),on("fire-js","");var _n,bn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},wn={},kn=kn||{},Sn=bn||self;function En(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function xn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Cn="closure_uid_"+(1e9*Math.random()>>>0),Tn=0;function In(e,t,n){return e.call.apply(e.bind,arguments)}function An(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Nn(e,t,n){return(Nn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?In:An).apply(null,arguments)}function Rn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Pn(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Dn(){this.s=this.s,this.o=this.o}Dn.prototype.s=!1,Dn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Cn)&&e[Cn]||(e[Cn]=++Tn)}(this)},Dn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const On=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Fn(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ln(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(En(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function jn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}jn.prototype.h=function(){this.defaultPrevented=!0};var Mn=function(){if(!Sn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Sn.addEventListener("test",e,t),Sn.removeEventListener("test",e,t)}catch(Lg){}return e}();function Un(e){return/^[\s\xa0]*$/.test(e)}function zn(){var e=Sn.navigator;return e&&(e=e.userAgent)?e:""}function Bn(e){return-1!=zn().indexOf(e)}function Vn(e){return Vn[" "](e),e}Vn[" "]=function(){};var qn,Hn,$n=Bn("Opera"),Wn=Bn("Trident")||Bn("MSIE"),Gn=Bn("Edge"),Kn=Gn||Wn,Qn=Bn("Gecko")&&!(-1!=zn().toLowerCase().indexOf("webkit")&&!Bn("Edge"))&&!(Bn("Trident")||Bn("MSIE"))&&!Bn("Edge"),Yn=-1!=zn().toLowerCase().indexOf("webkit")&&!Bn("Edge");function Xn(){var e=Sn.document;return e?e.documentMode:void 0}e:{var Jn="",Zn=function(){var e=zn();return Qn?/rv:([^\);]+)(\)|;)/.exec(e):Gn?/Edge\/([\d\.]+)/.exec(e):Wn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Yn?/WebKit\/(\S+)/.exec(e):$n?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Zn&&(Jn=Zn?Zn[1]:""),Wn){var er=Xn();if(null!=er&&er>parseFloat(Jn)){qn=String(er);break e}}qn=Jn}if(Sn.document&&Wn){var tr=Xn();Hn=tr||(parseInt(qn,10)||void 0)}else Hn=void 0;var nr=Hn;function rr(e,t){if(jn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Qn){e:{try{Vn(t.nodeName);var i=!0;break e}catch(Ug){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ir[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&rr.$.h.call(this)}}Pn(rr,jn);var ir={2:"touch",3:"pen",4:"mouse"};rr.prototype.h=function(){rr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var sr="closure_listenable_"+(1e6*Math.random()|0),or=0;function ar(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++or,this.fa=this.ia=!1}function lr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ur(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function cr(e){const t={};for(const n in e)t[n]=e[n];return t}const hr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dr(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<hr.length;t++)n=hr[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function fr(e){this.src=e,this.g={},this.h=0}function pr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=On(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(lr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function gr(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}fr.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=gr(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new ar(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var mr="closure_lm_"+(1e6*Math.random()|0),vr={};function yr(e,t,n,r,i){if(r&&r.once)return br(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)yr(e,t[s],n,r,i);return null}return n=Tr(n),e&&e[sr]?e.O(t,n,xn(r)?!!r.capture:!!r,i):_r(e,t,n,!1,r,i)}function _r(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=xn(i)?!!i.capture:!!i,a=xr(e);if(a||(e[mr]=a=new fr(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Er;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Mn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Sr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function br(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)br(e,t[s],n,r,i);return null}return n=Tr(n),e&&e[sr]?e.P(t,n,xn(r)?!!r.capture:!!r,i):_r(e,t,n,!0,r,i)}function wr(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)wr(e,t[s],n,r,i);else r=xn(r)?!!r.capture:!!r,n=Tr(n),e&&e[sr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=gr(s=e.g[t],n,r,i))&&(lr(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=xr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=gr(t,n,r,i)),(n=-1<e?t[e]:null)&&kr(n))}function kr(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[sr])pr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Sr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=xr(t))?(pr(n,e),0==n.h&&(n.src=null,t[mr]=null)):lr(e)}}}function Sr(e){return e in vr?vr[e]:vr[e]="on"+e}function Er(e,t){if(e.fa)e=!0;else{t=new rr(t,this);var n=e.listener,r=e.la||e.src;e.ia&&kr(e),e=n.call(r,t)}return e}function xr(e){return(e=e[mr])instanceof fr?e:null}var Cr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tr(e){return"function"===typeof e?e:(e[Cr]||(e[Cr]=function(t){return e.handleEvent(t)}),e[Cr])}function Ir(){Dn.call(this),this.i=new fr(this),this.S=this,this.J=null}function Ar(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new jn(t,e);else if(t instanceof jn)t.target=t.target||e;else{var i=t;dr(t=new jn(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Nr(o,r,!0,t)&&i}if(i=Nr(o=t.g=e,r,!0,t)&&i,i=Nr(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Nr(o=t.g=n[s],r,!1,t)&&i}function Nr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&pr(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Pn(Ir,Dn),Ir.prototype[sr]=!0,Ir.prototype.removeEventListener=function(e,t,n,r){wr(this,e,t,n,r)},Ir.prototype.N=function(){if(Ir.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)lr(n[r]);delete t.g[e],t.h--}}this.J=null},Ir.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ir.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Rr=Sn.JSON.stringify;function Pr(){var e=Ur;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Dr=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Or),(e=>e.reset()));class Or{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Fr(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Lr(e){Sn.setTimeout((()=>{throw e}),0)}let jr,Mr=!1,Ur=new class{constructor(){this.h=this.g=null}add(e,t){const n=Dr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},zr=()=>{const e=Sn.Promise.resolve(void 0);jr=()=>{e.then(Br)}};var Br=()=>{for(var e;e=Pr();){try{e.h.call(e.g)}catch(Lg){Lr(Lg)}var t=Dr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Mr=!1};function Vr(e,t){Ir.call(this),this.h=e||1,this.g=t||Sn,this.j=Nn(this.qb,this),this.l=Date.now()}function qr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Hr(e,t,n){if("function"===typeof e)n&&(e=Nn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Nn(e.handleEvent,e)}return 2147483647<Number(t)?-1:Sn.setTimeout(e,t||0)}function $r(e){e.g=Hr((()=>{e.g=null,e.i&&(e.i=!1,$r(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Pn(Vr,Ir),(_n=Vr.prototype).ga=!1,_n.T=null,_n.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ar(this,"tick"),this.ga&&(qr(this),this.start()))}},_n.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},_n.N=function(){Vr.$.N.call(this),qr(this),delete this.g};class Wr extends Dn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$r(this)}N(){super.N(),this.g&&(Sn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gr(e){Dn.call(this),this.h=e,this.g={}}Pn(Gr,Dn);var Kr=[];function Qr(e,t,n,r){Array.isArray(n)||(n&&(Kr[0]=n.toString()),n=Kr);for(var i=0;i<n.length;i++){var s=yr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Yr(e){ur(e.g,(function(e,t){this.g.hasOwnProperty(t)&&kr(e)}),e),e.g={}}function Xr(){this.g=!0}function Jr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Rr(n)}catch(Ag){return t}}(e,n)+(r?" "+r:"")}))}Gr.prototype.N=function(){Gr.$.N.call(this),Yr(this)},Gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xr.prototype.Ea=function(){this.g=!1},Xr.prototype.info=function(){};var Zr={},ei=null;function ti(){return ei=ei||new Ir}function ni(e){jn.call(this,Zr.Ta,e)}function ri(e){const t=ti();Ar(t,new ni(t))}function ii(e,t){jn.call(this,Zr.STAT_EVENT,e),this.stat=t}function si(e){const t=ti();Ar(t,new ii(t,e))}function oi(e,t){jn.call(this,Zr.Ua,e),this.size=t}function ai(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Sn.setTimeout((function(){e()}),t)}Zr.Ta="serverreachability",Pn(ni,jn),Zr.STAT_EVENT="statevent",Pn(ii,jn),Zr.Ua="timingevent",Pn(oi,jn);var li={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ui={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ci(){}function hi(e){return e.h||(e.h=e.i())}function di(){}ci.prototype.h=null;var fi,pi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function gi(){jn.call(this,"d")}function mi(){jn.call(this,"c")}function vi(){}function yi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Gr(this),this.P=bi,e=Kn?125:void 0,this.V=new Vr(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _i}function _i(){this.i=null,this.g="",this.h=!1}Pn(gi,jn),Pn(mi,jn),Pn(vi,ci),vi.prototype.g=function(){return new XMLHttpRequest},vi.prototype.i=function(){return{}},fi=new vi;var bi=45e3,wi={},ki={};function Si(e,t,n){e.L=1,e.A=Vi(ji(t)),e.u=n,e.S=!0,Ei(e,null)}function Ei(e,t){e.G=Date.now(),Ii(e),e.B=ji(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),ts(n.i,"t",r),e.o=0,n=e.l.J,e.h=new _i,e.g=to(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Wr(Nn(e.Pa,e,e.g),e.O)),Qr(e.U,e.g,"readystatechange",e.nb),t=e.I?cr(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),ri(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function xi(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Ci(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Ti(e,n),r==ki){4==t&&(e.s=4,si(14),i=!1),Jr(e.j,e.m,null,"[Incomplete Response]");break}if(r==wi){e.s=4,si(15),Jr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Jr(e.j,e.m,r,null),Di(e,r)}xi(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,si(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gs(t),t.M=!0,si(11))):(Jr(e.j,e.m,n,"[Invalid Chunked Response]"),Pi(e),Ri(e))}function Ti(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?ki:(n=Number(t.substring(n,r)),isNaN(n)?wi:(r+=1)+n>t.length?ki:(t=t.slice(r,r+n),e.o=r+n,t))}function Ii(e){e.Y=Date.now()+e.P,Ai(e,e.P)}function Ai(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=ai(Nn(e.lb,e),t)}function Ni(e){e.C&&(Sn.clearTimeout(e.C),e.C=null)}function Ri(e){0==e.l.H||e.J||Ys(e.l,e)}function Pi(e){Ni(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,qr(e.V),Yr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Di(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ls(n.i,e)))if(!e.K&&ls(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(Hg){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Qs(n),Us(n)}Ws(n),si(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ai(Nn(n.ib,n),6e3));if(1>=as(n.i)&&n.oa){try{n.oa()}catch(Hg){}n.oa=void 0}}else Js(n,11)}else if((e.K||n.g==e)&&Qs(n),!Un(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(us(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Bi(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=eo(r,r.J?r.pa:null,r.Y),o.K){cs(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Ni(a),Ii(a)),r.g=o}else $s(r);0<n.j.length&&Bs(n)}else"stop"!=u[0]&&"close"!=u[0]||Js(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Js(n,7):Ms(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}ri()}catch(Hg){}}function Oi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(En(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(En(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(En(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(_n=yi.prototype).setTimeout=function(e){this.P=e},_n.nb=function(e){e=e.target;const t=this.M;t&&3==Ps(e)?t.l():this.Pa(e)},_n.Pa=function(e){try{if(e==this.g)e:{const c=Ps(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||Kn||this.g&&(this.h.h||this.g.ja()||Ds(this.g)))){this.J||4!=c||7==t||ri(),Ni(this);var n=this.g.da();this.ca=n;t:if(xi(this)){var r=Ds(this.g);e="";var i=r.length,s=4==Ps(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Pi(this),Ri(this);var o="";break t}this.h.i=new Sn.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Un(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.s=3,si(12),Pi(this),Ri(this);break e}Jr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Di(this,n)}this.S?(Ci(this,c,o),Kn&&this.i&&3==c&&(Qr(this.U,this.V,"tick",this.mb),this.V.start())):(Jr(this.j,this.m,o,null),Di(this,o)),4==c&&Pi(this),this.i&&!this.J&&(4==c?Ys(this.l,this):(this.i=!1,Ii(this)))}else(function(e){const t={};e=(e.g&&2<=Ps(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Un(e[r]))continue;var n=Fr(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,si(12)):(this.s=0,si(13)),Pi(this),Ri(this)}}}catch(Og){}},_n.mb=function(){if(this.g){var e=Ps(this.g),t=this.g.ja();this.o<t.length&&(Ni(this),Ci(this,e,t),this.i&&4!=e&&Ii(this))}},_n.cancel=function(){this.J=!0,Pi(this)},_n.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(ri(),si(17)),Pi(this),this.s=2,Ri(this)):Ai(this,this.Y-e)};var Fi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Li(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Li){this.h=e.h,Mi(this,e.j),this.s=e.s,this.g=e.g,Ui(this,e.m),this.l=e.l;var t=e.i,n=new Xi;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),zi(this,n),this.o=e.o}else e&&(t=String(e).match(Fi))?(this.h=!1,Mi(this,t[1]||"",!0),this.s=qi(t[2]||""),this.g=qi(t[3]||"",!0),Ui(this,t[4]),this.l=qi(t[5]||"",!0),zi(this,t[6]||"",!0),this.o=qi(t[7]||"")):(this.h=!1,this.i=new Xi(null,this.h))}function ji(e){return new Li(e)}function Mi(e,t,n){e.j=n?qi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ui(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function zi(e,t,n){t instanceof Xi?(e.i=t,function(e,t){t&&!e.j&&(Ji(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Zi(this,t),ts(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Hi(t,Qi)),e.i=new Xi(t,e.h))}function Bi(e,t,n){e.i.set(t,n)}function Vi(e){return Bi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function qi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Hi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,$i),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function $i(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Li.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Hi(t,Wi,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Hi(t,Wi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Hi(n,"/"==n.charAt(0)?Ki:Gi,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Hi(n,Yi)),e.join("")};var Wi=/[#\/\?@]/g,Gi=/[#\?:]/g,Ki=/[#\?]/g,Qi=/[#\?@]/g,Yi=/#/g;function Xi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ji(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zi(e,t){Ji(e),t=ns(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function es(e,t){return Ji(e),t=ns(e,t),e.g.has(t)}function ts(e,t,n){Zi(e,t),0<n.length&&(e.i=null,e.g.set(ns(e,t),Fn(n)),e.h+=n.length)}function ns(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(_n=Xi.prototype).add=function(e,t){Ji(this),this.i=null,e=ns(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},_n.forEach=function(e,t){Ji(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},_n.ta=function(){Ji(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},_n.Z=function(e){Ji(this);let t=[];if("string"===typeof e)es(this,e)&&(t=t.concat(this.g.get(ns(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},_n.set=function(e,t){return Ji(this),this.i=null,es(this,e=ns(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},_n.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},_n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var rs=class{constructor(e,t){this.g=e,this.map=t}};function is(e){this.l=e||ss,Sn.PerformanceNavigationTiming?e=0<(e=Sn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Sn.g&&Sn.g.Ka&&Sn.g.Ka()&&Sn.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ss=10;function os(e){return!!e.h||!!e.g&&e.g.size>=e.j}function as(e){return e.h?1:e.g?e.g.size:0}function ls(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function us(e,t){e.g?e.g.add(t):e.h=t}function cs(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function hs(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Fn(e.i)}is.prototype.cancel=function(){if(this.i=hs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ds=class{stringify(e){return Sn.JSON.stringify(e,void 0)}parse(e){return Sn.JSON.parse(e,void 0)}};function fs(){this.g=new ds}function ps(e,t,n){const r=n||"";try{Oi(e,(function(e,n){let i=e;xn(e)&&(i=Rr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(Tg){throw t.push(r+"type="+encodeURIComponent("_badmap")),Tg}}function gs(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Ug){}}function ms(e){this.l=e.ec||null,this.j=e.ob||!1}function vs(e,t){Ir.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ys,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pn(ms,ci),ms.prototype.g=function(){return new vs(this.l,this.j)},ms.prototype.i=function(e){return function(){return e}}({}),Pn(vs,Ir);var ys=0;function _s(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function bs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ws(e)}function ws(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(_n=vs.prototype).open=function(e,t){if(this.readyState!=ys)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ws(this)},_n.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Sn).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},_n.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bs(this)),this.readyState=ys},_n.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ws(this)),this.g&&(this.readyState=3,ws(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Sn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_s(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},_n.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?bs(this):ws(this),3==this.readyState&&_s(this)}},_n.Za=function(e){this.g&&(this.response=this.responseText=e,bs(this))},_n.Ya=function(e){this.g&&(this.response=e,bs(this))},_n.ka=function(){this.g&&bs(this)},_n.setRequestHeader=function(e,t){this.v.append(e,t)},_n.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},_n.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ks=Sn.JSON.parse;function Ss(e){Ir.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Es,this.L=this.M=!1}Pn(Ss,Ir);var Es="",xs=/^https?$/i,Cs=["POST","PUT"];function Ts(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Is(e),Ns(e)}function Is(e){e.F||(e.F=!0,Ar(e,"complete"),Ar(e,"error"))}function As(e){if(e.h&&"undefined"!=typeof kn&&(!e.C[1]||4!=Ps(e)||2!=e.da()))if(e.v&&4==Ps(e))Hr(e.La,0,e);else if(Ar(e,"readystatechange"),4==Ps(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(Fi)[1]||null;!i&&Sn.self&&Sn.self.location&&(i=Sn.self.location.protocol.slice(0,-1)),r=!xs.test(i?i.toLowerCase():"")}n=r}if(n)Ar(e,"complete"),Ar(e,"success");else{e.m=6;try{var s=2<Ps(e)?e.g.statusText:""}catch(Ag){s=""}e.j=s+" ["+e.da()+"]",Is(e)}}finally{Ns(e)}}}function Ns(e,t){if(e.g){Rs(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ar(e,"ready");try{n.onreadystatechange=r}catch(Tg){}}}function Rs(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Sn.clearTimeout(e.A),e.A=null)}function Ps(e){return e.g?e.g.readyState:0}function Ds(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Es:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Bo){return null}}function Os(e){let t="";return ur(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Fs(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Os(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Bi(e,t,n))}function Ls(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function js(e){this.Ga=0,this.j=[],this.l=new Xr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ls("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ls("baseRetryDelayMs",5e3,e),this.hb=Ls("retryDelaySeedMs",1e4,e),this.eb=Ls("forwardChannelMaxRetries",2,e),this.xa=Ls("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new is(e&&e.concurrentRequestLimit),this.Ja=new fs,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ms(e){if(zs(e),3==e.H){var t=e.W++,n=ji(e.I);if(Bi(n,"SID",e.K),Bi(n,"RID",t),Bi(n,"TYPE","terminate"),qs(e,n),(t=new yi(e,e.l,t)).L=2,t.A=Vi(ji(n)),n=!1,Sn.navigator&&Sn.navigator.sendBeacon)try{n=Sn.navigator.sendBeacon(t.A.toString(),"")}catch(jg){}!n&&Sn.Image&&((new Image).src=t.A,n=!0),n||(t.g=to(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Ii(t)}Zs(e)}function Us(e){e.g&&(Gs(e),e.g.cancel(),e.g=null)}function zs(e){Us(e),e.u&&(Sn.clearTimeout(e.u),e.u=null),Qs(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Sn.clearTimeout(e.m),e.m=null)}function Bs(e){if(!os(e.i)&&!e.m){e.m=!0;var t=e.Na;jr||zr(),Mr||(jr(),Mr=!0),Ur.add(t,e),e.C=0}}function Vs(e,t){var n;n=t?t.m:e.W++;const r=ji(e.I);Bi(r,"SID",e.K),Bi(r,"RID",n),Bi(r,"AID",e.V),qs(e,r),e.o&&e.s&&Fs(r,e.o,e.s),n=new yi(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Hs(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),us(e.i,n),Si(n,r,t)}function qs(e,t){e.na&&ur(e.na,(function(e,n){Bi(t,n,e)})),e.h&&Oi({},(function(e,n){Bi(t,n,e)}))}function Hs(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Nn(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{ps(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function $s(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;jr||zr(),Mr||(jr(),Mr=!0),Ur.add(t,e),e.A=0}}function Ws(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ai(Nn(e.Ma,e),Xs(e,e.A)),e.A++,!0)}function Gs(e){null!=e.B&&(Sn.clearTimeout(e.B),e.B=null)}function Ks(e){e.g=new yi(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=ji(e.wa);Bi(t,"RID","rpc"),Bi(t,"SID",e.K),Bi(t,"AID",e.V),Bi(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Bi(t,"TO",e.qa),Bi(t,"TYPE","xmlhttp"),qs(e,t),e.o&&e.s&&Fs(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Vi(ji(t)),n.u=null,n.S=!0,Ei(n,e)}function Qs(e){null!=e.v&&(Sn.clearTimeout(e.v),e.v=null)}function Ys(e,t){var n=null;if(e.g==t){Qs(e),Gs(e),e.g=null;var r=2}else{if(!ls(e.i,t))return;n=t.F,cs(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Ar(r=ti(),new oi(r,n)),Bs(e)}else $s(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(as(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ai(Nn(e.Na,e,t),Xs(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ws(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Js(e,5);break;case 4:Js(e,10);break;case 3:Js(e,6);break;default:Js(e,2)}}function Xs(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Js(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Nn(e.pb,e);n||(n=new Li("//www.google.com/images/cleardot.gif"),Sn.location&&"http"==Sn.location.protocol||Mi(n,"https"),Vi(n)),function(e,t){const n=new Xr;if(Sn.Image){const r=new Image;r.onload=Rn(gs,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Rn(gs,n,r,"TestLoadImage: error",!1,t),r.onabort=Rn(gs,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Rn(gs,n,r,"TestLoadImage: timeout",!1,t),Sn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else si(2);e.H=0,e.h&&e.h.za(t),Zs(e),zs(e)}function Zs(e){if(e.H=0,e.ma=[],e.h){const t=hs(e.i);0==t.length&&0==e.j.length||(Ln(e.ma,t),Ln(e.ma,e.j),e.i.i.length=0,Fn(e.j),e.j.length=0),e.h.ya()}}function eo(e,t,n){var r=n instanceof Li?ji(n):new Li(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ui(r,r.m);else{var i=Sn.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Li(null);r&&Mi(s,r),t&&(s.g=t),i&&Ui(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Bi(r,n,t),Bi(r,"VER",e.ra),qs(e,r),r}function to(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Ss(new ms({ob:n})):new Ss(e.va)).Oa(e.J),t}function no(){}function ro(){if(Wn&&!(10<=Number(nr)))throw Error("Environmental error: no available transport.")}function io(e,t){Ir.call(this),this.g=new js(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Un(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Un(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ao(this)}function so(e){gi.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function oo(){mi.call(this),this.status=1}function ao(e){this.g=e}function lo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function uo(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function co(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(_n=Ss.prototype).Oa=function(e){this.M=e},_n.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fi.g(),this.C=this.u?hi(this.u):hi(fi),this.g.onreadystatechange=Nn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(Ug){return void Ts(this,Ug)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Sn.FormData&&e instanceof Sn.FormData,!(0<=On(Cs,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Rs(this),0<this.B&&((this.L=function(e){return Wn&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nn(this.ua,this)):this.A=Hr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(Ug){Ts(this,Ug)}},_n.ua=function(){"undefined"!=typeof kn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ar(this,"timeout"),this.abort(8))},_n.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ar(this,"complete"),Ar(this,"abort"),Ns(this))},_n.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ns(this,!0)),Ss.$.N.call(this)},_n.La=function(){this.s||(this.G||this.v||this.l?As(this):this.kb())},_n.kb=function(){As(this)},_n.isActive=function(){return!!this.g},_n.da=function(){try{return 2<Ps(this)?this.g.status:-1}catch(e){return-1}},_n.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},_n.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ks(t)}},_n.Ia=function(){return this.m},_n.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(_n=js.prototype).ra=8,_n.H=1,_n.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new yi(this,this.l,e);let s=this.s;if(this.U&&(s?(s=cr(s),dr(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Hs(this,i,t),Bi(n=ji(this.I),"RID",e),Bi(n,"CVER",22),this.F&&Bi(n,"X-HTTP-Session-Id",this.F),qs(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Os(s)))+"&"+t:this.o&&Fs(n,this.o,s)),us(this.i,i),this.bb&&Bi(n,"TYPE","init"),this.P?(Bi(n,"$req",t),Bi(n,"SID","null"),i.aa=!0,Si(i,n,null)):Si(i,n,t),this.H=2}}else 3==this.H&&(e?Vs(this,e):0==this.j.length||os(this.i)||Vs(this))},_n.Ma=function(){if(this.u=null,Ks(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ai(Nn(this.jb,this),e)}},_n.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,si(10),Us(this),Ks(this))},_n.ib=function(){null!=this.v&&(this.v=null,Us(this),Ws(this),si(19))},_n.pb=function(e){e?(this.l.info("Successfully pinged google.com"),si(2)):(this.l.info("Failed to ping google.com"),si(1))},_n.isActive=function(){return!!this.h&&this.h.isActive(this)},(_n=no.prototype).Ba=function(){},_n.Aa=function(){},_n.za=function(){},_n.ya=function(){},_n.isActive=function(){return!0},_n.Va=function(){},ro.prototype.g=function(e,t){return new io(e,t)},Pn(io,Ir),io.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;si(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=eo(e,null,e.Y),Bs(e)},io.prototype.close=function(){Ms(this.g)},io.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Rr(e),e=n);t.j.push(new rs(t.fb++,e)),3==t.H&&Bs(t)},io.prototype.N=function(){this.g.h=null,delete this.j,Ms(this.g),delete this.g,io.$.N.call(this)},Pn(so,gi),Pn(oo,mi),Pn(ao,no),ao.prototype.Ba=function(){Ar(this.g,"a")},ao.prototype.Aa=function(e){Ar(this.g,new so(e))},ao.prototype.za=function(e){Ar(this.g,new oo)},ao.prototype.ya=function(){Ar(this.g,"b")},Pn(lo,(function(){this.blockSize=-1})),lo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},lo.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)uo(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){uo(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){uo(this,r),i=0;break}}this.h=i,this.i+=t},lo.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var ho={};function fo(e){return-128<=e&&128>e?function(e,t){var n=ho;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new co([0|e],0>e?-1:0)})):new co([0|e],0>e?-1:0)}function po(e){if(isNaN(e)||!isFinite(e))return mo;if(0>e)return wo(po(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=go;return new co(t,0)}var go=4294967296,mo=fo(0),vo=fo(1),yo=fo(16777216);function _o(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function bo(e){return-1==e.h}function wo(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new co(n,~e.h).add(vo)}function ko(e,t){return e.add(wo(t))}function So(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Eo(e,t){this.g=e,this.h=t}function xo(e,t){if(_o(t))throw Error("division by zero");if(_o(e))return new Eo(mo,mo);if(bo(e))return t=xo(wo(e),t),new Eo(wo(t.g),wo(t.h));if(bo(t))return t=xo(e,wo(t)),new Eo(wo(t.g),t.h);if(30<e.g.length){if(bo(e)||bo(t))throw Error("slowDivide_ only works with positive integers.");for(var n=vo,r=t;0>=r.X(e);)n=Co(n),r=Co(r);var i=To(n,1),s=To(r,1);for(r=To(r,2),n=To(n,2);!_o(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=To(r,1),n=To(n,1)}return t=ko(e,i.R(t)),new Eo(i,t)}for(i=mo;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=po(n)).R(t);bo(o)||0<o.X(e);)o=(s=po(n-=r)).R(t);_o(s)&&(s=vo),i=i.add(s),e=ko(e,o)}return new Eo(i,e)}function Co(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new co(n,e.h)}function To(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new co(i,e.h)}(_n=co.prototype).ea=function(){if(bo(this))return-wo(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:go+r)*t,t*=go}return e},_n.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(_o(this))return"0";if(bo(this))return"-"+wo(this).toString(e);for(var t=po(Math.pow(e,6)),n=this,r="";;){var i=xo(n,t).g,s=((0<(n=ko(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(_o(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},_n.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},_n.X=function(e){return bo(e=ko(this,e))?-1:_o(e)?0:1},_n.abs=function(){return bo(this)?wo(this):this},_n.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new co(n,-2147483648&n[n.length-1]?-1:0)},_n.R=function(e){if(_o(this)||_o(e))return mo;if(bo(this))return bo(e)?wo(this).R(wo(e)):wo(wo(this).R(e));if(bo(e))return wo(this.R(wo(e)));if(0>this.X(yo)&&0>e.X(yo))return po(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,So(n,2*r+2*i),n[2*r+2*i+1]+=s*l,So(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,So(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,So(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new co(n,0)},_n.gb=function(e){return xo(this,e).h},_n.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new co(n,this.h&e.h)},_n.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new co(n,this.h|e.h)},_n.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new co(n,this.h^e.h)},ro.prototype.createWebChannel=ro.prototype.g,io.prototype.send=io.prototype.u,io.prototype.open=io.prototype.m,io.prototype.close=io.prototype.close,li.NO_ERROR=0,li.TIMEOUT=8,li.HTTP_ERROR=6,ui.COMPLETE="complete",di.EventType=pi,pi.OPEN="a",pi.CLOSE="b",pi.ERROR="c",pi.MESSAGE="d",Ir.prototype.listen=Ir.prototype.O,Ss.prototype.listenOnce=Ss.prototype.P,Ss.prototype.getLastError=Ss.prototype.Sa,Ss.prototype.getLastErrorCode=Ss.prototype.Ia,Ss.prototype.getStatus=Ss.prototype.da,Ss.prototype.getResponseJson=Ss.prototype.Wa,Ss.prototype.getResponseText=Ss.prototype.ja,Ss.prototype.send=Ss.prototype.ha,Ss.prototype.setWithCredentials=Ss.prototype.Oa,lo.prototype.digest=lo.prototype.l,lo.prototype.reset=lo.prototype.reset,lo.prototype.update=lo.prototype.j,co.prototype.add=co.prototype.add,co.prototype.multiply=co.prototype.R,co.prototype.modulo=co.prototype.gb,co.prototype.compare=co.prototype.X,co.prototype.toNumber=co.prototype.ea,co.prototype.toString=co.prototype.toString,co.prototype.getBits=co.prototype.D,co.fromNumber=po,co.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return wo(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=po(Math.pow(n,8)),i=mo,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=po(Math.pow(n,o)),i=i.R(o).add(po(a))):i=(i=i.R(r)).add(po(a))}return i};var Io=wn.createWebChannelTransport=function(){return new ro},Ao=wn.getStatEventTarget=function(){return ti()},No=wn.ErrorCode=li,Ro=wn.EventType=ui,Po=wn.Event=Zr,Do=wn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Oo=wn.FetchXmlHttpFactory=ms,Fo=wn.WebChannel=di,Lo=wn.XhrIo=Ss,jo=wn.Md5=lo,Mo=wn.Integer=co;const Uo="@firebase/firestore";class zo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zo.UNAUTHENTICATED=new zo(null),zo.GOOGLE_CREDENTIALS=new zo("google-credentials-uid"),zo.FIRST_PARTY=new zo("first-party-uid"),zo.MOCK_USER=new zo("mock-user");let Bo="10.11.1";const Vo=new nt("@firebase/firestore");function qo(){return Vo.logLevel}function Ho(e){if(Vo.logLevel<=Xe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Go);Vo.debug("Firestore (".concat(Bo,"): ").concat(e),...i)}}function $o(e){if(Vo.logLevel<=Xe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Go);Vo.error("Firestore (".concat(Bo,"): ").concat(e),...i)}}function Wo(e){if(Vo.logLevel<=Xe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Go);Vo.warn("Firestore (".concat(Bo,"): ").concat(e),...i)}}function Go(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Ig){return e}}function Ko(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Bo,") INTERNAL ASSERTION FAILED: ")+e;throw $o(t),new Error(t)}function Qo(e,t){e||Ko()}function Yo(e,t){return e}const Xo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jo extends ze{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Zo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ea{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class ta{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zo.UNAUTHENTICATED)))}shutdown(){}}class na{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ra{constructor(e){this.t=e,this.currentUser=zo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Zo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zo,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Ho("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ho("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zo)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ho("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Qo("string"==typeof t.accessToken),new ea(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Qo(null===e||"string"==typeof e),new zo(e)}}class ia{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=zo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sa{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new ia(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(zo.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class oa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aa{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Ho("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Ho("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ho("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ho("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Qo("string"==typeof e.token),this.R=e.token,new oa(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function la(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ua{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=la(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function ca(e,t){return e<t?-1:e>t?1:0}function ha(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class da{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Jo(Xo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Jo(Xo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Jo(Xo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Jo(Xo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return da.fromMillis(Date.now())}static fromDate(e){return da.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new da(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ca(this.nanoseconds,e.nanoseconds):ca(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fa{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fa(e)}static min(){return new fa(new da(0,0))}static max(){return new fa(new da(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class pa{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ko(),void 0===n?n=e.length-t:n>e.length-t&&Ko(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===pa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pa?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ga extends pa{construct(e,t,n){return new ga(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ga(e)}static emptyPath(){return new ga([])}}const ma=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class va extends pa{construct(e,t,n){return new va(e,t,n)}static isValidIdentifier(e){return ma.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),va.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new va(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Jo(Xo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Jo(Xo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Jo(Xo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new va(t)}static emptyPath(){return new va([])}}class ya{constructor(e){this.path=e}static fromPath(e){return new ya(ga.fromString(e))}static fromName(e){return new ya(ga.fromString(e).popFirst(5))}static empty(){return new ya(ga.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ga.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ga.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ya(new ga(e.slice()))}}class _a{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}_a.UNKNOWN_ID=-1;function ba(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=fa.fromTimestamp(1e9===r?new da(n+1,0):new da(n,r));return new ka(i,ya.empty(),t)}function wa(e){return new ka(e.readTime,e.key,-1)}class ka{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ka(fa.min(),ya.empty(),-1)}static max(){return new ka(fa.max(),ya.empty(),-1)}}function Sa(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ya.comparator(e.documentKey,t.documentKey),0!==n?n:ca(e.largestBatchId,t.largestBatchId))}const Ea="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ca(e){if(e.code!==Xo.FAILED_PRECONDITION||e.message!==Ea)throw e;Ho("LocalStore","Unexpectedly lost primary lease")}class Ta{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ko(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ta(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ta?t:Ta.resolve(t)}catch(e){return Ta.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ta.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ta.reject(t)}static resolve(e){return new Ta(((t,n)=>{t(e)}))}static reject(e){return new Ta(((t,n)=>{n(e)}))}static waitFor(e){return new Ta(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Ta.resolve(!1);for(const n of e)t=t.next((e=>e?Ta.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Ta(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Ta(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Ia(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Aa(e){return"IndexedDbTransactionError"===e.name}class Na{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Ra(e){return null==e}function Pa(e){return 0===e&&1/e==-1/0}function Da(e){return"number"==typeof e&&Number.isInteger(e)&&!Pa(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Na.oe=-1;const Oa=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fa=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],La=Fa;function ja(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ma(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ua(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class za{constructor(e,t){this.comparator=e,this.root=t||Va.EMPTY}insert(e,t){return new za(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Va.BLACK,null,null))}remove(e){return new za(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Va.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ba(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ba(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ba(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ba(this.root,e,this.comparator,!0)}}class Ba{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Va{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Va.RED,this.left=null!=r?r:Va.EMPTY,this.right=null!=i?i:Va.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Va(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Va.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Va.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Va.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Va.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ko();if(this.right.isRed())throw Ko();const e=this.left.check();if(e!==this.right.check())throw Ko();return e+(this.isRed()?0:1)}}Va.EMPTY=null,Va.RED=!0,Va.BLACK=!1,Va.EMPTY=new class{constructor(){this.size=0}get key(){throw Ko()}get value(){throw Ko()}get color(){throw Ko()}get left(){throw Ko()}get right(){throw Ko()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Va(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qa{constructor(e){this.comparator=e,this.data=new za(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ha(this.data.getIterator())}getIteratorFrom(e){return new Ha(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof qa))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new qa(this.comparator);return t.data=e,t}}class Ha{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class $a{constructor(e){this.fields=e,e.sort(va.comparator)}static empty(){return new $a([])}unionWith(e){let t=new qa(va.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new $a(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ha(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Wa extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ga{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Wa("Invalid base64 string: "+e):e}}(e);return new Ga(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ga(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ca(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ga.EMPTY_BYTE_STRING=new Ga("");const Ka=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qa(e){if(Qo(!!e),"string"==typeof e){let t=0;const n=Ka.exec(e);if(Qo(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ya(e.seconds),nanos:Ya(e.nanos)}}function Ya(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xa(e){return"string"==typeof e?Ga.fromBase64String(e):Ga.fromUint8Array(e)}function Ja(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Za(e){const t=e.mapValue.fields.__previous_value__;return Ja(t)?Za(t):t}function el(e){const t=Qa(e.mapValue.fields.__local_write_time__.timestampValue);return new da(t.seconds,t.nanos)}class tl{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class nl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nl&&e.projectId===this.projectId&&e.database===this.database}}const rl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function il(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ja(e)?4:vl(e)?9007199254740991:10:Ko()}function sl(e,t){if(e===t)return!0;const n=il(e);if(n!==il(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return el(e).isEqual(el(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Qa(e.timestampValue),r=Qa(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Xa(e.bytesValue).isEqual(Xa(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ya(e.geoPointValue.latitude)===Ya(t.geoPointValue.latitude)&&Ya(e.geoPointValue.longitude)===Ya(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ya(e.integerValue)===Ya(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ya(e.doubleValue),r=Ya(t.doubleValue);return n===r?Pa(n)===Pa(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ha(e.arrayValue.values||[],t.arrayValue.values||[],sl);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ja(n)!==ja(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!sl(n[i],r[i])))return!1;return!0}(e,t);default:return Ko()}}function ol(e,t){return void 0!==(e.values||[]).find((e=>sl(e,t)))}function al(e,t){if(e===t)return 0;const n=il(e),r=il(t);if(n!==r)return ca(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ca(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ya(e.integerValue||e.doubleValue),r=Ya(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ll(e.timestampValue,t.timestampValue);case 4:return ll(el(e),el(t));case 5:return ca(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Xa(e),r=Xa(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ca(n[i],r[i]);if(0!==e)return e}return ca(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ca(Ya(e.latitude),Ya(t.latitude));return 0!==n?n:ca(Ya(e.longitude),Ya(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=al(n[i],r[i]);if(e)return e}return ca(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===rl.mapValue&&t===rl.mapValue)return 0;if(e===rl.mapValue)return 1;if(t===rl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=ca(r[o],s[o]);if(0!==e)return e;const t=al(n[r[o]],i[s[o]]);if(0!==t)return t}return ca(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ko()}}function ll(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ca(e,t);const n=Qa(e),r=Qa(t),i=ca(n.seconds,r.seconds);return 0!==i?i:ca(n.nanos,r.nanos)}function ul(e){return cl(e)}function cl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Qa(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Xa(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ya.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=cl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(cl(e.fields[i]));return n+"}"}(e.mapValue):Ko()}function hl(e){return!!e&&"integerValue"in e}function dl(e){return!!e&&"arrayValue"in e}function fl(e){return!!e&&"nullValue"in e}function pl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function gl(e){return!!e&&"mapValue"in e}function ml(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ma(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ml(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ml(e.arrayValue.values[n]);return t}return Object.assign({},e)}function vl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class yl{constructor(e){this.value=e}static empty(){return new yl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!gl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ml(t)}setAll(e){let t=va.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ml(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());gl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];gl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ma(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new yl(ml(this.value))}}function _l(e){const t=[];return Ma(e.fields,((e,n)=>{const r=new va([e]);if(gl(n)){const e=_l(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new $a(t)}class bl{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new bl(e,0,fa.min(),fa.min(),fa.min(),yl.empty(),0)}static newFoundDocument(e,t,n,r){return new bl(e,1,t,fa.min(),n,r,0)}static newNoDocument(e,t){return new bl(e,2,t,fa.min(),fa.min(),yl.empty(),0)}static newUnknownDocument(e,t){return new bl(e,3,t,fa.min(),fa.min(),yl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fa.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fa.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class wl{constructor(e,t){this.position=e,this.inclusive=t}}function kl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ya.comparator(ya.fromName(o.referenceValue),n.key):al(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Sl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!sl(e.position[n],t.position[n]))return!1;return!0}class El{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function xl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Cl{}class Tl extends Cl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Fl(e,t,n):"array-contains"===t?new Ul(e,n):"in"===t?new zl(e,n):"not-in"===t?new Bl(e,n):"array-contains-any"===t?new Vl(e,n):new Tl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ll(e,n):new jl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(al(t,this.value)):null!==t&&il(this.value)===il(t)&&this.matchesComparison(al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ko()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Il extends Cl{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Il(e,t)}matches(e){return Al(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Al(e){return"and"===e.op}function Nl(e){return Rl(e)&&Al(e)}function Rl(e){for(const t of e.filters)if(t instanceof Il)return!1;return!0}function Pl(e){if(e instanceof Tl)return e.field.canonicalString()+e.op.toString()+ul(e.value);if(Nl(e))return e.filters.map((e=>Pl(e))).join(",");{const t=e.filters.map((e=>Pl(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Dl(e,t){return e instanceof Tl?function(e,t){return t instanceof Tl&&e.op===t.op&&e.field.isEqual(t.field)&&sl(e.value,t.value)}(e,t):e instanceof Il?function(e,t){return t instanceof Il&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Dl(n,t.filters[r])),!0)}(e,t):void Ko()}function Ol(e){return e instanceof Tl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ul(e.value))}(e):e instanceof Il?function(e){return e.op.toString()+" {"+e.getFilters().map(Ol).join(" ,")+"}"}(e):"Filter"}class Fl extends Tl{constructor(e,t,n){super(e,t,n),this.key=ya.fromName(n.referenceValue)}matches(e){const t=ya.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ll extends Tl{constructor(e,t){super(e,"in",t),this.keys=Ml("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jl extends Tl{constructor(e,t){super(e,"not-in",t),this.keys=Ml("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ml(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ya.fromName(e.referenceValue)))}class Ul extends Tl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dl(t)&&ol(t.arrayValue,this.value)}}class zl extends Tl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ol(this.value.arrayValue,t)}}class Bl extends Tl{constructor(e,t){super(e,"not-in",t)}matches(e){if(ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ol(this.value.arrayValue,t)}}class Vl extends Tl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>ol(this.value.arrayValue,e)))}}class ql{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Hl(e){return new ql(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function $l(e){const t=Yo(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Pl(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ra(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>ul(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>ul(e))).join(",")),t.ue=e}return t.ue}function Wl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!xl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Dl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Sl(e.startAt,t.startAt)&&Sl(e.endAt,t.endAt)}function Gl(e){return ya.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Kl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ql(e,t,n,r,i,s,o,a){return new Kl(e,t,n,r,i,s,o,a)}function Yl(e){return new Kl(e)}function Xl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Jl(e){return null!==e.collectionGroup}function Zl(e){const t=Yo(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new qa(va.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new El(r,n))})),e.has(va.keyField().canonicalString())||t.ce.push(new El(va.keyField(),n))}return t.ce}function eu(e){const t=Yo(e);return t.le||(t.le=tu(t,Zl(e))),t.le}function tu(e,t){if("F"===e.limitType)return Hl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new El(e.field,t)}));const n=e.endAt?new wl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new wl(e.startAt.position,e.startAt.inclusive):null;return Hl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function nu(e,t,n){return new Kl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ru(e,t){return Wl(eu(e),eu(t))&&e.limitType===t.limitType}function iu(e){return"".concat($l(eu(e)),"|lt:").concat(e.limitType)}function su(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Ol(e))).join(", "),"]")),Ra(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>ul(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>ul(e))).join(",")),"Target(".concat(t,")")}(eu(e)),"; limitType=").concat(e.limitType,")")}function ou(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ya.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Zl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=kl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Zl(e),t))&&!(e.endAt&&!function(e,t,n){const r=kl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Zl(e),t))}(e,t)}function au(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function lu(e){return(t,n)=>{let r=!1;for(const i of Zl(e)){const e=uu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function uu(e,t,n){const r=e.field.isKeyField()?ya.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?al(r,i):Ko()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ko()}}class cu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ma(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Ua(this.inner)}size(){return this.innerSize}}const hu=new za(ya.comparator);function du(){return hu}const fu=new za(ya.comparator);function pu(){let e=fu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function gu(e){let t=fu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function mu(){return yu()}function vu(){return yu()}function yu(){return new cu((e=>e.toString()),((e,t)=>e.isEqual(t)))}const _u=new za(ya.comparator),bu=new qa(ya.comparator);function wu(){let e=bu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const ku=new qa(ca);function Su(){return ku}function Eu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pa(t)?"-0":t}}function xu(e){return{integerValue:""+e}}function Cu(e,t){return Da(t)?xu(t):Eu(e,t)}class Tu{constructor(){this._=void 0}}function Iu(e,t,n){return e instanceof Ru?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ja(t)&&(t=Za(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Pu?Du(e,t):e instanceof Ou?Fu(e,t):function(e,t){const n=Nu(e,t),r=ju(n)+ju(e.Pe);return hl(n)&&hl(e.Pe)?xu(r):Eu(e.serializer,r)}(e,t)}function Au(e,t,n){return e instanceof Pu?Du(e,t):e instanceof Ou?Fu(e,t):n}function Nu(e,t){return e instanceof Lu?function(e){return hl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ru extends Tu{}class Pu extends Tu{constructor(e){super(),this.elements=e}}function Du(e,t){const n=Mu(t);for(const r of e.elements)n.some((e=>sl(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Ou extends Tu{constructor(e){super(),this.elements=e}}function Fu(e,t){let n=Mu(t);for(const r of e.elements)n=n.filter((e=>!sl(e,r)));return{arrayValue:{values:n}}}class Lu extends Tu{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ju(e){return Ya(e.integerValue||e.doubleValue)}function Mu(e){return dl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Uu{constructor(e,t){this.version=e,this.transformResults=t}}class zu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zu}static exists(e){return new zu(void 0,e)}static updateTime(e){return new zu(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Vu{}function qu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Zu(e.key,zu.none()):new Ku(e.key,e.data,zu.none());{const n=e.data,r=yl.empty();let i=new qa(va.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Qu(e.key,r,new $a(i.toArray()),zu.none())}}function Hu(e,t,n){e instanceof Ku?function(e,t,n){const r=e.value.clone(),i=Xu(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Qu?function(e,t,n){if(!Bu(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Xu(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Yu(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function $u(e,t,n,r){return e instanceof Ku?function(e,t,n,r){if(!Bu(e.precondition,t))return n;const i=e.value.clone(),s=Ju(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Qu?function(e,t,n,r){if(!Bu(e.precondition,t))return n;const i=Ju(e.fieldTransforms,r,t),s=t.data;return s.setAll(Yu(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Bu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Wu(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Nu(r.transform,e||null);null!=i&&(null===n&&(n=yl.empty()),n.set(r.field,i))}return n||null}function Gu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ha(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Pu&&t instanceof Pu||e instanceof Ou&&t instanceof Ou?ha(e.elements,t.elements,sl):e instanceof Lu&&t instanceof Lu?sl(e.Pe,t.Pe):e instanceof Ru&&t instanceof Ru}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ku extends Vu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Qu extends Vu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Yu(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Xu(e,t,n){const r=new Map;Qo(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Au(o,a,n[i]))}return r}function Ju(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Iu(e,s,t))}return r}class Zu extends Vu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ec extends Vu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Hu(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=$u(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=$u(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=vu();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=qu(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(fa.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),wu())}isEqual(e){return this.batchId===e.batchId&&ha(this.mutations,e.mutations,((e,t)=>Gu(e,t)))&&ha(this.baseMutations,e.baseMutations,((e,t)=>Gu(e,t)))}}class nc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Qo(e.mutations.length===n.length);let r=_u;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new nc(e,t,n,r)}}class rc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ic{constructor(e,t){this.count=e,this.unchangedNames=t}}var sc,oc;function ac(e){switch(e){default:return Ko();case Xo.CANCELLED:case Xo.UNKNOWN:case Xo.DEADLINE_EXCEEDED:case Xo.RESOURCE_EXHAUSTED:case Xo.INTERNAL:case Xo.UNAVAILABLE:case Xo.UNAUTHENTICATED:return!1;case Xo.INVALID_ARGUMENT:case Xo.NOT_FOUND:case Xo.ALREADY_EXISTS:case Xo.PERMISSION_DENIED:case Xo.FAILED_PRECONDITION:case Xo.ABORTED:case Xo.OUT_OF_RANGE:case Xo.UNIMPLEMENTED:case Xo.DATA_LOSS:return!0}}function lc(e){if(void 0===e)return $o("GRPC error has no .code"),Xo.UNKNOWN;switch(e){case sc.OK:return Xo.OK;case sc.CANCELLED:return Xo.CANCELLED;case sc.UNKNOWN:return Xo.UNKNOWN;case sc.DEADLINE_EXCEEDED:return Xo.DEADLINE_EXCEEDED;case sc.RESOURCE_EXHAUSTED:return Xo.RESOURCE_EXHAUSTED;case sc.INTERNAL:return Xo.INTERNAL;case sc.UNAVAILABLE:return Xo.UNAVAILABLE;case sc.UNAUTHENTICATED:return Xo.UNAUTHENTICATED;case sc.INVALID_ARGUMENT:return Xo.INVALID_ARGUMENT;case sc.NOT_FOUND:return Xo.NOT_FOUND;case sc.ALREADY_EXISTS:return Xo.ALREADY_EXISTS;case sc.PERMISSION_DENIED:return Xo.PERMISSION_DENIED;case sc.FAILED_PRECONDITION:return Xo.FAILED_PRECONDITION;case sc.ABORTED:return Xo.ABORTED;case sc.OUT_OF_RANGE:return Xo.OUT_OF_RANGE;case sc.UNIMPLEMENTED:return Xo.UNIMPLEMENTED;case sc.DATA_LOSS:return Xo.DATA_LOSS;default:return Ko()}}(oc=sc||(sc={}))[oc.OK=0]="OK",oc[oc.CANCELLED=1]="CANCELLED",oc[oc.UNKNOWN=2]="UNKNOWN",oc[oc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oc[oc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oc[oc.NOT_FOUND=5]="NOT_FOUND",oc[oc.ALREADY_EXISTS=6]="ALREADY_EXISTS",oc[oc.PERMISSION_DENIED=7]="PERMISSION_DENIED",oc[oc.UNAUTHENTICATED=16]="UNAUTHENTICATED",oc[oc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oc[oc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oc[oc.ABORTED=10]="ABORTED",oc[oc.OUT_OF_RANGE=11]="OUT_OF_RANGE",oc[oc.UNIMPLEMENTED=12]="UNIMPLEMENTED",oc[oc.INTERNAL=13]="INTERNAL",oc[oc.UNAVAILABLE=14]="UNAVAILABLE",oc[oc.DATA_LOSS=15]="DATA_LOSS";let uc=null;function cc(){return new TextEncoder}const hc=new Mo([4294967295,4294967295],0);function dc(e){const t=cc().encode(e),n=new jo;return n.update(t),new Uint8Array(n.digest())}function fc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Mo([n,r],0),new Mo([i,s],0)]}class pc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new gc("Invalid padding: ".concat(t));if(n<0)throw new gc("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new gc("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new gc("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Mo.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Mo.fromNumber(n)));return 1===r.compare(hc)&&(r=new Mo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=dc(e),[n,r]=fc(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new pc(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=dc(e),[n,r]=fc(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class mc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new mc(fa.min(),r,new za(ca),du(),wu())}}class vc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new vc(n,t,wu(),wu(),wu())}}class yc{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class _c{constructor(e,t){this.targetId=e,this.me=t}}class bc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ga.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class wc{constructor(){this.fe=0,this.ge=Ec(),this.pe=Ga.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=wu(),t=wu(),n=wu();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ko()}})),new vc(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=Ec()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qo(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kc{constructor(e){this.Le=e,this.Be=new Map,this.ke=du(),this.qe=Sc(),this.Qe=new za(ca)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Ko()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Gl(i))if(0===n){const e=new ya(i.path);this.Ue(t,e,bl.newNoDocument(e,fa.min()))}else Qo(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==uc||uc.et(function(e,t,n,r,i){var s,o,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Xa(n).toUint8Array()}catch(e){if(e instanceof Wa)return Wo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new pc(s,r,i)}catch(e){return Wo(e instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Gl(i.target)){const t=new ya(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,bl.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=wu();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new mc(e,t,this.Qe,this.ke,n);return this.ke=du(),this.qe=Sc(),this.Qe=new za(ca),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new wc,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new qa(ca),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ho("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new wc),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Sc(){return new za(ya.comparator)}function Ec(){return new za(ya.comparator)}const xc={asc:"ASCENDING",desc:"DESCENDING"},Cc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tc={and:"AND",or:"OR"};class Ic{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ac(e,t){return e.useProto3Json||Ra(t)?t:{value:t}}function Nc(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Pc(e,t){return Nc(e,t.toTimestamp())}function Dc(e){return Qo(!!e),fa.fromTimestamp(function(e){const t=Qa(e);return new da(t.seconds,t.nanos)}(e))}function Oc(e,t){return Fc(e,t).canonicalString()}function Fc(e,t){const n=function(e){return new ga(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Lc(e){const t=ga.fromString(e);return Qo(nh(t)),t}function jc(e,t){return Oc(e.databaseId,t.path)}function Mc(e,t){const n=Lc(t);if(n.get(1)!==e.databaseId.projectId)throw new Jo(Xo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Jo(Xo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ya(Vc(n))}function Uc(e,t){return Oc(e.databaseId,t)}function zc(e){const t=Lc(e);return 4===t.length?ga.emptyPath():Vc(t)}function Bc(e){return new ga(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Vc(e){return Qo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function qc(e,t,n){return{name:jc(e,t),fields:n.value.mapValue.fields}}function Hc(e,t){let n;if(t instanceof Ku)n={update:qc(e,t.key,t.value)};else if(t instanceof Zu)n={delete:jc(e,t.key)};else if(t instanceof Qu)n={update:qc(e,t.key,t.data),updateMask:th(t.fieldMask)};else{if(!(t instanceof ec))return Ko();n={verify:jc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ru)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Pu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ou)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Lu)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Ko()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Pc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ko()}(e,t.precondition)),n}function $c(e,t){return{documents:[Uc(e,t.path)]}}function Wc(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Uc(e,i);const s=function(e){if(0!==e.length)return eh(Il.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Jc(e.field),direction:Qc(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ac(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Gc(e){let t=zc(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qo(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Kc(e);return t instanceof Il&&Nl(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new El(Zc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ra(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new wl(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new wl(n,t)}(n.endAt)),Ql(t,i,o,s,a,"F",l,u)}function Kc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Zc(e.unaryFilter.field);return Tl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Zc(e.unaryFilter.field);return Tl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Zc(e.unaryFilter.field);return Tl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Zc(e.unaryFilter.field);return Tl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ko()}}(e):void 0!==e.fieldFilter?function(e){return Tl.create(Zc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ko()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Il.create(e.compositeFilter.filters.map((e=>Kc(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ko()}}(e.compositeFilter.op))}(e):Ko()}function Qc(e){return xc[e]}function Yc(e){return Cc[e]}function Xc(e){return Tc[e]}function Jc(e){return{fieldPath:e.canonicalString()}}function Zc(e){return va.fromServerFormat(e.fieldPath)}function eh(e){return e instanceof Tl?function(e){if("=="===e.op){if(pl(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NAN"}};if(fl(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(pl(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NOT_NAN"}};if(fl(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jc(e.field),op:Yc(e.op),value:e.value}}}(e):e instanceof Il?function(e){const t=e.getFilters().map((e=>eh(e)));return 1===t.length?t[0]:{compositeFilter:{op:Xc(e.op),filters:t}}}(e):Ko()}function th(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function nh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class rh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fa.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:fa.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ga.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new rh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new rh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ih{constructor(e){this.ut=e}}function sh(e){const t=Gc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?nu(t,t.limit,"L"):t}class oh{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Ya(e.integerValue));else if("doubleValue"in e){const n=Ya(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Pa(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Tt(t,20),"string"==typeof n&&(n=Qa(n)),t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Xa(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?vl(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Ko()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),ya.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}oh.St=new oh;class ah{constructor(){this.on=new lh}addToCollectionParentIndex(e,t){return this.on.add(t),Ta.resolve()}getCollectionParents(e,t){return Ta.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return Ta.resolve()}deleteFieldIndex(e,t){return Ta.resolve()}deleteAllFieldIndexes(e){return Ta.resolve()}createTargetIndexes(e,t){return Ta.resolve()}getDocumentsMatchingTarget(e,t){return Ta.resolve(null)}getIndexType(e,t){return Ta.resolve(0)}getFieldIndexes(e,t){return Ta.resolve([])}getNextCollectionGroupToUpdate(e){return Ta.resolve(null)}getMinOffset(e,t){return Ta.resolve(ka.min())}getMinOffsetFromCollectionGroup(e,t){return Ta.resolve(ka.min())}updateCollectionGroup(e,t,n){return Ta.resolve()}updateIndexEntries(e,t){return Ta.resolve()}}class lh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new qa(ga.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new qa(ga.comparator)).toArray()}}new Uint8Array(0);class uh{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new uh(e,uh.DEFAULT_COLLECTION_PERCENTILE,uh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}uh.DEFAULT_COLLECTION_PERCENTILE=10,uh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,uh.DEFAULT=new uh(41943040,uh.DEFAULT_COLLECTION_PERCENTILE,uh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),uh.DISABLED=new uh(-1,0,0);class ch{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new ch(0)}static Nn(){return new ch(-1)}}class hh{constructor(){this.changes=new cu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ta.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&$u(n.mutation,e,$a.empty(),da.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,wu()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wu();const r=mu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=pu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=mu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,wu())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=du();const s=yu(),o=yu();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Qu)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),$u(o.mutation,t,o.mutation.getFieldMask(),da.now())):s.set(t.key,$a.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new dh(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=yu();let r=new za(((e,t)=>e-t)),i=wu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||$a.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||wu()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=vu();l.forEach((e=>{if(!i.has(e)){const r=qu(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return Ta.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ya.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ta.resolve(mu());let o=-1,a=i;return s.next((t=>Ta.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Ta.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,wu()))).next((e=>({batchId:o,changes:gu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ya(t)).next((e=>{let t=pu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=pu();return this.indexManager.getCollectionParents(e,i).next((o=>Ta.forEach(o,(o=>{const a=function(e,t){return new Kl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,bl.newInvalidDocument(r)))}));let n=pu();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&$u(s.mutation,r,$a.empty(),da.now()),ou(t,r)&&(n=n.insert(e,r))})),n}))}}class ph{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return Ta.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Dc(e.createTime)}}(t)),Ta.resolve()}getNamedQuery(e,t){return Ta.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:sh(e.bundledQuery),readTime:Dc(e.readTime)}}(t)),Ta.resolve()}}class gh{constructor(){this.overlays=new za(ya.comparator),this.lr=new Map}getOverlay(e,t){return Ta.resolve(this.overlays.get(t))}getOverlays(e,t){const n=mu();return Ta.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),Ta.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),Ta.resolve()}getOverlaysForCollection(e,t,n){const r=mu(),i=t.length+1,s=new ya(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ta.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new za(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=mu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=mu(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Ta.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new rc(t,n));let i=this.lr.get(t);void 0===i&&(i=wu(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class mh{constructor(){this.hr=new qa(vh.Pr),this.Ir=new qa(vh.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new vh(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new vh(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new ya(new ga([])),n=new vh(t,e),r=new vh(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new ya(new ga([])),n=new vh(t,e),r=new vh(t,e+1);let i=wu();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new vh(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class vh{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return ya.comparator(e.key,t.key)||ca(e.gr,t.gr)}static Tr(e,t){return ca(e.gr,t.gr)||ya.comparator(e.key,t.key)}}class yh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new qa(vh.Pr)}checkEmpty(e){return Ta.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new tc(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new vh(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ta.resolve(s)}lookupMutationBatch(e,t){return Ta.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return Ta.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ta.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return Ta.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new vh(t,0),r=new vh(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),Ta.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new qa(ca);return t.forEach((e=>{const t=new vh(e,0),r=new vh(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),Ta.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ya.isDocumentKey(i)||(i=i.child(""));const s=new vh(new ya(i),0);let o=new qa(ca);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),Ta.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Qo(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return Ta.forEach(t.mutations,(r=>{const i=new vh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new vh(t,0),r=this.yr.firstAfterOrEqual(n);return Ta.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ta.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class _h{constructor(e){this.Cr=e,this.docs=new za(ya.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ta.resolve(n?n.document.mutableCopy():bl.newInvalidDocument(t))}getEntries(e,t){let n=du();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():bl.newInvalidDocument(e))})),Ta.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=du();const s=t.path,o=new ya(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Sa(wa(o),n)<=0||(r.has(o.key)||ou(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Ta.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ko()}vr(e,t){return Ta.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new bh(this)}getSize(e){return Ta.resolve(this.size)}}class bh extends hh{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),Ta.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class wh{constructor(e){this.persistence=e,this.Fr=new cu((e=>$l(e)),Wl),this.lastRemoteSnapshotVersion=fa.min(),this.highestTargetId=0,this.Mr=0,this.Or=new mh,this.targetCount=0,this.Nr=ch.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),Ta.resolve()}getLastRemoteSnapshotVersion(e){return Ta.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ta.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Ta.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),Ta.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new ch(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,Ta.resolve()}updateTargetData(e,t){return this.kn(t),Ta.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,Ta.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Ta.waitFor(i).next((()=>r))}getTargetCount(e){return Ta.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return Ta.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),Ta.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Ta.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),Ta.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return Ta.resolve(n)}containsKey(e,t){return Ta.resolve(this.Or.containsKey(t))}}class kh{constructor(e,t){this.Lr={},this.overlays={},this.Br=new Na(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new wh(this),this.indexManager=new ah,this.remoteDocumentCache=function(e){return new _h(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new ih(t),this.Kr=new ph(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new yh(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Ho("MemoryPersistence","Starting transaction:",e);const r=new Sh(this.Br.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return Ta.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class Sh extends xa{constructor(e){super(),this.currentSequenceNumber=e}}class Eh{constructor(e){this.persistence=e,this.Gr=new mh,this.zr=null}static jr(e){return new Eh(e)}get Hr(){if(this.zr)return this.zr;throw Ko()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),Ta.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),Ta.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),Ta.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ta.forEach(this.Hr,(n=>{const r=ya.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,fa.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return Ta.or([()=>Ta.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class xh{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=wu(),r=wu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new xh(e,t.fromCache,n,r)}}class Ch{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Th{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=Me()?8:Ia(je())>0?6:4}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Ch;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(qo()<=Xe.DEBUG&&Ho("QueryEngine","SDK will not create cache indexes for query:",su(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Ta.resolve()):(qo()<=Xe.DEBUG&&Ho("QueryEngine","Query:",su(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(qo()<=Xe.DEBUG&&Ho("QueryEngine","The SDK decides to create cache indexes for query:",su(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,eu(t))):Ta.resolve())}zi(e,t){if(Xl(t))return Ta.resolve(null);let n=eu(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=nu(t,null,"F"),n=eu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=wu(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,nu(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return Xl(t)||r.isEqual(fa.min())?Ta.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?Ta.resolve(null):(qo()<=Xe.DEBUG&&Ho("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),su(t)),this.Xi(e,s,t,ba(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new qa(lu(e));return t.forEach(((t,r)=>{ou(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return qo()<=Xe.DEBUG&&Ho("QueryEngine","Using full collection scan to execute query:",su(t)),this.Gi.getDocumentsMatchingQuery(e,t,ka.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Ih{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new za(ca),this.ns=new cu((e=>$l(e)),Wl),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fh(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function Ah(e,t,n,r){return new Ih(e,t,n,r)}async function Nh(e,t){const n=Yo(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=wu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Rh(e){const t=Yo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function Ph(e,t,n){let r=wu(),i=wu();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=du();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(fa.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ho("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}function Dh(e,t){const n=Yo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Oh(e,t){const n=Yo(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,Ta.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new rh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function Fh(e,t,n){const r=Yo(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Aa(e))throw e;Ho("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function Lh(e,t,n){const r=Yo(e);let i=fa.min(),s=wu();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Yo(e),i=r.ns.get(n);return void 0!==i?Ta.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,eu(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:fa.min(),n?s:wu()))).next((e=>(jh(r,au(t),e),{documents:e,ls:s})))))}function jh(e,t,n){let r=e.rs.get(t)||fa.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}class Mh{constructor(){this.activeTargetIds=Su()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uh{constructor(){this.eo=new Mh,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Mh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zh{ro(e){}shutdown(){}}class Bh{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Ho("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Ho("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Vh=null;function qh(){return null===Vh?Vh=268435456+Math.round(2147483648*Math.random()):Vh++,"0x"+Vh.toString(16)}const Hh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $h{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}}const Wh="WebChannelConnection";class Gh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.yo=t+"://"+e.host,this.wo="projects/".concat(n,"/databases/").concat(r),this.So="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get bo(){return!1}Do(e,t,n,r,i){const s=qh(),o=this.Co(e,t.toUriEncodedString());Ho("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(a,r,i),this.Fo(e,o,a,n).then((t=>(Ho("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Wo("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Mo(e,t,n,r,i,s){return this.Do(e,t,n,r,i)}vo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Co(e,t){const n=Hh[e];return"".concat(this.yo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,t,n,r){const i=qh();return new Promise(((s,o)=>{const a=new Lo;a.setWithCredentials(!0),a.listenOnce(Ro.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case No.NO_ERROR:const t=a.getResponseJson();Ho(Wh,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case No.TIMEOUT:Ho(Wh,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Jo(Xo.DEADLINE_EXCEEDED,"Request time out"));break;case No.HTTP_ERROR:const n=a.getStatus();if(Ho(Wh,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Xo).indexOf(t)>=0?t:Xo.UNKNOWN}(t.status);o(new Jo(e,t.message))}else o(new Jo(Xo.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Jo(Xo.UNAVAILABLE,"Connection failed."));break;default:Ko()}}finally{Ho(Wh,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Ho(Wh,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}xo(e,t,n){const r=qh(),i=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Io(),o=Ao(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Oo({})),this.vo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Ho(Wh,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new $h({co:t=>{d?Ho(Wh,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Ho(Wh,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),h=!0),Ho(Wh,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},lo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,Fo.EventType.OPEN,(()=>{d||(Ho(Wh,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.Vo())})),p(c,Fo.EventType.CLOSE,(()=>{d||(d=!0,Ho(Wh,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.fo())})),p(c,Fo.EventType.ERROR,(t=>{d||(d=!0,Wo(Wh,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.fo(new Jo(Xo.UNAVAILABLE,"The operation could not be completed")))})),p(c,Fo.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Qo(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ho(Wh,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=sc[e];if(void 0!==t)return lc(t)}(t),i=o.message;void 0===n&&(n=Xo.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.fo(new Jo(n,i)),c.close()}else Ho(Wh,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.po(i)}})),p(o,Po.STAT_EVENT,(t=>{t.stat===Do.PROXY?Ho(Wh,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Do.NOPROXY&&Ho(Wh,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.mo()}),0),f}}function Kh(){return"undefined"!=typeof document?document:null}function Qh(e){return new Ic(e,!0)}class Yh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Oo=n,this.No=r,this.Lo=i,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();const t=Math.floor(this.Bo+this.$o()),n=Math.max(0,Date.now()-this.qo),r=Math.max(0,t-n);r>0&&Ho("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Bo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.ko=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.qo=Date.now(),e()))),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){null!==this.ko&&(this.ko.skipDelay(),this.ko=null)}cancel(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}}class Xh{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Wo=n,this.Go=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new Yh(e,t)}Yo(){return 1===this.state||5===this.state||this.Zo()}Zo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Xo()}async stop(){this.Yo()&&await this.close(0)}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&null===this.jo&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,(()=>this.n_())))}r_(e){this.i_(),this.stream.send(e)}async n_(){if(this.Zo())return this.close(0)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}async close(e,t){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,4!==e?this.Jo.reset():t&&t.code===Xo.RESOURCE_EXHAUSTED?($o(t.toString()),$o("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):t&&t.code===Xo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(t)}o_(){}auth(){this.state=1;const e=this.__(this.zo),t=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.zo===t&&this.a_(n,r)}),(t=>{e((()=>{const e=new Jo(Xo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.u_(e)}))}))}a_(e,t){const n=this.__(this.zo);this.stream=this.c_(e,t),this.stream.ho((()=>{n((()=>this.listener.ho()))})),this.stream.Io((()=>{n((()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,(()=>(this.Zo()&&(this.state=3),Promise.resolve()))),this.listener.Io())))})),this.stream.Eo((e=>{n((()=>this.u_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Xo(){this.state=5,this.Jo.Ko((async()=>{this.state=0,this.start()}))}u_(e){return Ho("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}__(e){return t=>{this.si.enqueueAndForget((()=>this.zo===e?t():(Ho("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Jh extends Xh{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}c_(e,t){return this.connection.xo("Listen",e,t)}onMessage(e){this.Jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ko()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Qo(void 0===t||"string"==typeof t),Ga.fromBase64String(t||"")):(Qo(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Ga.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Xo.UNKNOWN:lc(e.code);return new Jo(t,e.message||"")}(o);n=new bc(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Mc(e,r.document.name),s=Dc(r.document.updateTime),o=r.document.createTime?Dc(r.document.createTime):fa.min(),a=new yl({mapValue:{fields:r.document.fields}}),l=bl.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new yc(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Mc(e,r.document),s=r.readTime?Dc(r.readTime):fa.min(),o=bl.newNoDocument(i,s),a=r.removedTargetIds||[];n=new yc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Mc(e,r.document),s=r.removedTargetIds||[];n=new yc([],s,i,null)}else{if(!("filter"in t))return Ko();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new ic(r,i),o=e.targetId;n=new _c(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return fa.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?fa.min():t.readTime?Dc(t.readTime):fa.min()}(e);return this.listener.l_(t,n)}h_(e){const t={};t.database=Bc(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Gl(r)?{documents:$c(e,r)}:{query:Wc(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Rc(e,t.resumeToken);const r=Ac(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(fa.min())>0){n.readTime=Nc(e,t.snapshotVersion.toTimestamp());const r=Ac(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ko()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.r_(t)}P_(e){const t={};t.database=Bc(this.serializer),t.removeTarget=e,this.r_(t)}}class Zh extends Xh{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,t){return this.connection.xo("Write",e,t)}onMessage(e){if(Qo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();const t=function(e,t){return e&&e.length>0?(Qo(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Dc(e.updateTime):Dc(t);return n.isEqual(fa.min())&&(n=Dc(t)),new Uu(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Dc(e.commitTime);return this.listener.d_(n,t)}return Qo(!e.writeResults||0===e.writeResults.length),this.I_=!0,this.listener.A_()}R_(){const e={};e.database=Bc(this.serializer),this.r_(e)}E_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Hc(this.serializer,e)))};this.r_(t)}}class ed extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.V_=!1}m_(){if(this.V_)throw new Jo(Xo.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,t,n,r){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Do(e,Fc(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Xo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Jo(Xo.UNKNOWN,e.toString())}))}Mo(e,t,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Mo(e,Fc(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Xo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Jo(Xo.UNKNOWN,e.toString())}))}terminate(){this.V_=!0,this.connection.terminate()}}class td{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?($o(t),this.y_=!1):Ho("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class nd{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.ro((e=>{n.enqueueAndForget((async()=>{hd(this)&&(Ho("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Yo(e);t.M_.add(4),await id(t),t.N_.set("Unknown"),t.M_.delete(4),await rd(t)}(this))}))})),this.N_=new td(n,r)}}async function rd(e){if(hd(e))for(const t of e.x_)await t(!0)}async function id(e){for(const t of e.x_)await t(!1)}function sd(e,t){const n=Yo(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),cd(n)?ud(n):Nd(n).Zo()&&ad(n,t))}function od(e,t){const n=Yo(e),r=Nd(n);n.F_.delete(t),r.Zo()&&ld(n,t),0===n.F_.size&&(r.Zo()?r.t_():hd(n)&&n.N_.set("Unknown"))}function ad(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(fa.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Nd(e).h_(t)}function ld(e,t){e.L_.xe(t),Nd(e).P_(t)}function ud(e){e.L_=new kc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Nd(e).start(),e.N_.w_()}function cd(e){return hd(e)&&!Nd(e).Yo()&&e.F_.size>0}function hd(e){return 0===Yo(e).M_.size}function dd(e){e.L_=void 0}async function fd(e){e.N_.set("Online")}async function pd(e){e.F_.forEach(((t,n)=>{ad(e,t)}))}async function gd(e,t){dd(e),cd(e)?(e.N_.D_(t),ud(e)):e.N_.set("Unknown")}async function md(e,t,n){if(e.N_.set("Online"),t instanceof bc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){Ho("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await vd(e,n)}else if(t instanceof yc?e.L_.Ke(t):t instanceof _c?e.L_.He(t):e.L_.We(t),!n.isEqual(fa.min()))try{const t=await Rh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(Ga.EMPTY_BYTE_STRING,r.snapshotVersion)),ld(e,t);const i=new rh(r.target,t,n,r.sequenceNumber);ad(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ho("RemoteStore","Failed to raise snapshot:",t),await vd(e,t)}}async function vd(e,t,n){if(!Aa(t))throw t;e.M_.add(1),await id(e),e.N_.set("Offline"),n||(n=()=>Rh(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ho("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await rd(e)}))}function yd(e,t){return t().catch((n=>vd(e,n,t)))}async function _d(e){const t=Yo(e),n=Rd(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;bd(t);)try{const e=await Dh(t.localStore,r);if(null===e){0===t.v_.length&&n.t_();break}r=e.batchId,wd(t,e)}catch(e){await vd(t,e)}kd(t)&&Sd(t)}function bd(e){return hd(e)&&e.v_.length<10}function wd(e,t){e.v_.push(t);const n=Rd(e);n.Zo()&&n.T_&&n.E_(t.mutations)}function kd(e){return hd(e)&&!Rd(e).Yo()&&e.v_.length>0}function Sd(e){Rd(e).start()}async function Ed(e){Rd(e).R_()}async function xd(e){const t=Rd(e);for(const n of e.v_)t.E_(n.mutations)}async function Cd(e,t,n){const r=e.v_.shift(),i=nc.from(r,t,n);await yd(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await _d(e)}async function Td(e,t){t&&Rd(e).T_&&await async function(e,t){if(function(e){return ac(e)&&e!==Xo.ABORTED}(t.code)){const n=e.v_.shift();Rd(e).e_(),await yd(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await _d(e)}}(e,t),kd(e)&&Sd(e)}async function Id(e,t){const n=Yo(e);n.asyncQueue.verifyOperationInProgress(),Ho("RemoteStore","RemoteStore received new credentials");const r=hd(n);n.M_.add(3),await id(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await rd(n)}async function Ad(e,t){const n=Yo(e);t?(n.M_.delete(2),await rd(n)):t||(n.M_.add(2),await id(n),n.N_.set("Unknown"))}function Nd(e){return e.B_||(e.B_=function(e,t,n){const r=Yo(e);return r.m_(),new Jh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:fd.bind(null,e),Io:pd.bind(null,e),Eo:gd.bind(null,e),l_:md.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.e_(),cd(e)?ud(e):e.N_.set("Unknown")):(await e.B_.stop(),dd(e))}))),e.B_}function Rd(e){return e.k_||(e.k_=function(e,t,n){const r=Yo(e);return r.m_(),new Zh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:()=>Promise.resolve(),Io:Ed.bind(null,e),Eo:Td.bind(null,e),A_:xd.bind(null,e),d_:Cd.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.e_(),await _d(e)):(await e.k_.stop(),e.v_.length>0&&(Ho("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class Pd{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Pd(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jo(Xo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dd(e,t){if($o("AsyncQueue","".concat(t,": ").concat(e)),Aa(e))return new Jo(Xo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Od{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ya.comparator(t.key,n.key):(e,t)=>ya.comparator(e.key,t.key),this.keyedMap=pu(),this.sortedSet=new za(this.comparator)}static emptySet(e){return new Od(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Od))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Od;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Fd{constructor(){this.q_=new za(ya.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Ko():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ld{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Ld(e,t,Od.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class jd{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class Md{constructor(){this.queries=new cu((e=>iu(e)),ru),this.onlineState="Unknown",this.z_=new Set}}async function Ud(e,t){const n=Yo(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new jd,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Dd(e,"Initialization of query '".concat(su(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&qd(n)}async function zd(e,t){const n=Yo(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Bd(e,t){const n=Yo(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&qd(n)}function Vd(e,t,n){const r=Yo(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function qd(e){e.z_.forEach((e=>{e.next()}))}var Hd,$d;($d=Hd||(Hd={})).J_="default",$d.Cache="cache";class Wd{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ld(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=Ld.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Hd.Cache}}class Gd{constructor(e){this.key=e}}class Kd{constructor(e){this.key=e}}class Qd{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=wu(),this.mutatedKeys=wu(),this.Ia=lu(e),this.Ta=new Od(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new Fd,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=ou(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Ra(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.Ia(c,a)>0||l&&this.Ia(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Zi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ko()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,l=a!==this.ha;return this.ha=a,0!==s.length||l?{snapshot:new Ld(this.query,e.Ta,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Fd,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=wu(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new Kd(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new Gd(n))})),t}pa(e){this.la=e.ls,this.Pa=wu();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Ld.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Yd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Xd{constructor(e){this.key=e,this.wa=!1}}class Jd{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new cu((e=>iu(e)),ru),this.Da=new Map,this.Ca=new Set,this.va=new za(ya.comparator),this.Fa=new Map,this.Ma=new mh,this.xa={},this.Oa=new Map,this.Na=ch.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function Zd(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=wf(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await tf(r,t,n,!0),i}async function ef(e,t){const n=wf(e);await tf(n,t,!0,!1)}async function tf(e,t,n,r){const i=await Oh(e.localStore,eu(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await nf(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&sd(e.remoteStore,i),a}async function nf(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Zi&&(i=await Lh(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return gf(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await Lh(e.localStore,t,!0),o=new Qd(t,s.ls),a=o.da(s.documents),l=vc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);gf(e,n,u.fa);const c=new Yd(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),u.snapshot}async function rf(e,t,n){const r=Yo(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!ru(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Fh(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&od(r.remoteStore,i.targetId),ff(r,i.targetId)})).catch(Ca)):(ff(r,i.targetId),await Fh(r.localStore,i.targetId,!0))}async function sf(e,t){const n=Yo(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),od(n.remoteStore,r.targetId))}async function of(e,t){const n=Yo(e);try{const e=await function(e,t){const n=Yo(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Ga.EMPTY_BYTE_STRING,fa.min()).withLastLimboFreeSnapshotVersion(fa.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.qr.updateTargetData(e,u))}));let a=du(),l=wu();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ph(e,s,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(fa.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Ta.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(Qo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Qo(r.wa):e.removedDocuments.size>0&&(Qo(r.wa),r.wa=!1))})),await yf(n,e,t)}catch(e){await Ca(e)}}function af(e,t,n){const r=Yo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Yo(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&qd(n)}(r.eventManager,t),e.length&&r.Sa.l_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function lf(e,t,n){const r=Yo(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new za(ya.comparator);e=e.insert(s,bl.newNoDocument(s,fa.min()));const n=wu().add(s),i=new mc(fa.min(),new Map,new za(ca),e,n);await of(r,i),r.va=r.va.remove(s),r.Fa.delete(t),vf(r)}else await Fh(r.localStore,t,!1).then((()=>ff(r,t,n))).catch(Ca)}async function uf(e,t){const n=Yo(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Yo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Ta.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Qo(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=wu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);df(n,r,null),hf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yf(n,e)}catch(e){await Ca(e)}}async function cf(e,t,n){const r=Yo(e);try{const e=await function(e,t){const n=Yo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Qo(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);df(r,t,n),hf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await yf(r,e)}catch(n){await Ca(n)}}function hf(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function df(e,t,n){const r=Yo(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function ff(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Rr(t).forEach((t=>{e.Ma.containsKey(t)||pf(e,t)}))}function pf(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(od(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),vf(e))}function gf(e,t,n){for(const r of n)r instanceof Gd?(e.Ma.addReference(r.key,t),mf(e,r)):r instanceof Kd?(Ho("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||pf(e,r.key)):Ko()}function mf(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Ho("SyncEngine","New document in limbo: "+n),e.Ca.add(r),vf(e))}function vf(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new ya(ga.fromString(t)),r=e.Na.next();e.Fa.set(r,new Xd(n)),e.va=e.va.insert(n,r),sd(e.remoteStore,new rh(eu(Yl(n.path)),r,"TargetPurposeLimboResolution",Na.oe))}}async function yf(e,t,n){const r=Yo(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=xh.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.l_(i),await async function(e,t){const n=Yo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Ta.forEach(t,(t=>Ta.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Ta.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Aa(e))throw e;Ho("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function _f(e,t){const n=Yo(e);if(!n.currentUser.isEqual(t)){Ho("SyncEngine","User change. New user:",t.toKey());const e=await Nh(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new Jo(Xo.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await yf(n,e._s)}}function bf(e,t){const n=Yo(e),r=n.Fa.get(t);if(r&&r.wa)return wu().add(r.key);{let e=wu();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}function wf(e){const t=Yo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=of.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=bf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lf.bind(null,t),t.Sa.l_=Bd.bind(null,t.eventManager),t.Sa.ka=Vd.bind(null,t.eventManager),t}function kf(e){const t=Yo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=uf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=cf.bind(null,t),t}class Sf{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Qh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Ah(this.persistence,new Th,e.initialUser,this.serializer)}createPersistence(e){return new kh(Eh.jr,this.serializer)}createSharedClientState(e){return new Uh}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Ef{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>af(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=_f.bind(null,this.syncEngine),await Ad(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Md}createDatastore(e){const t=Qh(e.databaseInfo.databaseId),n=function(e){return new Gh(e)}(e.databaseInfo);return function(e,t,n,r){return new ed(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new nd(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>af(this.syncEngine,e,0)),Bh.D()?new Bh:new zh)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Jd(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Yo(e);Ho("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await id(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class xf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):$o("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Cf{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=zo.UNAUTHENTICATED,this.clientId=ua.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ho("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ho("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Jo(Xo.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Ig){const n=Dd(Ig,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Tf(e,t){e.asyncQueue.verifyOperationInProgress(),Ho("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Nh(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function If(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Nf(e);Ho("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Id(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Id(t.remoteStore,n))),e._onlineComponents=t}function Af(e){return"FirebaseError"===e.name?e.code===Xo.FAILED_PRECONDITION||e.code===Xo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Nf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ho("FirestoreClient","Using user provided OfflineComponentProvider");try{await Tf(e,e._uninitializedComponentsProvider._offline)}catch(Ig){const n=Ig;if(!Af(n))throw n;Wo("Error using user provided cache. Falling back to memory cache: "+n),await Tf(e,new Sf)}}else Ho("FirestoreClient","Using default OfflineComponentProvider"),await Tf(e,new Sf);return e._offlineComponents}async function Rf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ho("FirestoreClient","Using user provided OnlineComponentProvider"),await If(e,e._uninitializedComponentsProvider._online)):(Ho("FirestoreClient","Using default OnlineComponentProvider"),await If(e,new Ef))),e._onlineComponents}function Pf(e){return Rf(e).then((e=>e.syncEngine))}async function Df(e){const t=await Rf(e),n=t.eventManager;return n.onListen=Zd.bind(null,t.syncEngine),n.onUnlisten=rf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ef.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=sf.bind(null,t.syncEngine),n}function Of(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Zo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new xf({next:s=>{t.enqueueAndForget((()=>zd(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Jo(Xo.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Jo(Xo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Wd(Yl(n.path),s,{includeMetadataChanges:!0,ra:!0});return Ud(e,o)}(await Df(e),e.asyncQueue,t,n,r))),r.promise}function Ff(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Lf=new Map;function jf(e,t,n){if(!n)throw new Jo(Xo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Mf(e){if(!ya.isDocumentKey(e))throw new Jo(Xo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Uf(e){if(ya.isDocumentKey(e))throw new Jo(Xo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function zf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ko()}function Bf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Jo(Xo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zf(e);throw new Jo(Xo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Vf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Jo(Xo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Jo(Xo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Jo(Xo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ff(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Jo(Xo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Jo(Xo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Jo(Xo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Jo(Xo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Jo(Xo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vf(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ta;switch(e.type){case"firstParty":return new sa(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Jo(Xo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Lf.get(e);t&&(Ho("ComponentProvider","Removing Datastore"),Lf.delete(e),t.terminate())}(this),Promise.resolve()}}function Hf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Bf(e,qf))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=zo.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ne(JSON.stringify({alg:"none",type:"JWT"})),Ne(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Jo(Xo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new zo(s)}e._authCredentials=new na(new ea(t,n))}}class $f{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $f(this.firestore,e,this._query)}}class Wf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wf(this.firestore,e,this._key)}}class Gf extends $f{constructor(e,t,n){super(e,t,Yl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wf(this.firestore,null,new ya(e))}withConverter(e){return new Gf(this.firestore,e,this._path)}}function Kf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$e(e),jf("collection","path",t),e instanceof qf){const n=ga.fromString(t,...r);return Uf(n),new Gf(e,null,n)}{if(!(e instanceof Wf||e instanceof Gf))throw new Jo(Xo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ga.fromString(t,...r));return Uf(n),new Gf(e.firestore,null,n)}}function Qf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$e(e),1===arguments.length&&(t=ua.newId()),jf("doc","path",t),e instanceof qf){const n=ga.fromString(t,...r);return Mf(n),new Wf(e,null,new ya(n))}{if(!(e instanceof Wf||e instanceof Gf))throw new Jo(Xo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ga.fromString(t,...r));return Mf(n),new Wf(e.firestore,e instanceof Gf?e.converter:null,new ya(n))}}class Yf{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new Yh(this,"async_queue_retry"),this.hu=()=>{const e=Kh();e&&Ho("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Jo.Uo()};const e=Kh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=Kh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new Zo;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Jo.reset()}catch(Tg){if(!Aa(Tg))throw Tg;Ho("AsyncQueue","Operation failed with retryable error: "+Tg)}this.su.length>0&&this.Jo.Ko((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw $o("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=Pd.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&Ko()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}class Xf extends qf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Yf,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Zf(this),this._firestoreClient.terminate()}}function Jf(e){return e._firestoreClient||Zf(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Zf(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new tl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ff(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Cf(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class ep{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ep(Ga.fromBase64String(e))}catch(e){throw new Jo(Xo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ep(Ga.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class tp{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new va(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class np{constructor(e){this._methodName=e}}class rp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Jo(Xo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Jo(Xo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ca(this._lat,e._lat)||ca(this._long,e._long)}}const ip=/^__.*__$/;class sp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Qu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ku(e,this.data,t,this.fieldTransforms)}}class op{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Qu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ap(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ko()}}class lp{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new lp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return kp(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(ap(this.fu)&&ip.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class up{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Qh(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new lp({fu:e,methodName:t,vu:n,path:va.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cp(e){const t=e._freezeSettings(),n=Qh(e._databaseId);return new up(e._databaseId,!!t.ignoreUndefinedProperties,n)}function hp(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);yp("Data must be an object, but it was:",o,r);const a=mp(r,o);let l,u;if(s.merge)l=new $a(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=_p(t,r,n);if(!o.contains(i))throw new Jo(Xo.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Sp(e,i)||e.push(i)}l=new $a(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new sp(new yl(a),l,u)}class dp extends np{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dp}}function fp(e,t,n,r){const i=e.Fu(1,t,n);yp("Data must be an object, but it was:",i,r);const s=[],o=yl.empty();Ma(r,((e,r)=>{const a=wp(t,e,n);r=$e(r);const l=i.Su(a);if(r instanceof dp)s.push(a);else{const e=gp(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new $a(s);return new op(o,a,i.fieldTransforms)}function pp(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[_p(t,r,n)],l=[i];if(s.length%2!=0)throw new Jo(Xo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(_p(t,s[d])),l.push(s[d+1]);const u=[],c=yl.empty();for(let d=a.length-1;d>=0;--d)if(!Sp(u,a[d])){const e=a[d];let t=l[d];t=$e(t);const n=o.Su(e);if(t instanceof dp)u.push(e);else{const r=gp(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new $a(u);return new op(c,h,o.fieldTransforms)}function gp(e,t){if(vp(e=$e(e)))return yp("Unsupported field value:",t,e),mp(e,t);if(e instanceof np)return function(e,t){if(!ap(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=gp(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=$e(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Cu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=da.fromDate(e);return{timestampValue:Nc(t.serializer,n)}}if(e instanceof da){const n=new da(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Nc(t.serializer,n)}}if(e instanceof rp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ep)return{bytesValue:Rc(t.serializer,e._byteString)};if(e instanceof Wf){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Oc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(zf(e)))}(e,t)}function mp(e,t){const n={};return Ua(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ma(e,((e,r)=>{const i=gp(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function vp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof da||e instanceof rp||e instanceof ep||e instanceof Wf||e instanceof np)}function yp(e,t,n){if(!vp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=zf(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function _p(e,t,n){if((t=$e(t))instanceof tp)return t._internalPath;if("string"==typeof t)return wp(e,t);throw kp("Field path arguments must be of type string or ",e,!1,void 0,n)}const bp=new RegExp("[~\\*/\\[\\]]");function wp(e,t,n){if(t.search(bp)>=0)throw kp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new tp(...t.split("."))._internalPath}catch(Pn){throw kp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function kp(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Jo(Xo.INVALID_ARGUMENT,a+e+l)}function Sp(e,t){return e.some((e=>e.isEqual(t)))}class Ep{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xp extends Ep{data(){return super.data()}}function Cp(e,t){return"string"==typeof t?wp(e,t):t instanceof tp?t._internalPath:t._delegate._internalPath}class Tp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(il(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ya(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ko()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ma(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new rp(Ya(e.latitude),Ya(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Za(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(el(e));default:return null}}convertTimestamp(e){const t=Qa(e);return new da(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ga.fromString(e);Qo(nh(n));const r=new nl(n.get(1),n.get(3)),i=new ya(n.popFirst(5));return r.isEqual(t)||$o("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Ip(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ap{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Np extends Ep{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Rp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Cp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Rp extends Np{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}function Pp(e){e=Bf(e,Wf);const t=Bf(e.firestore,Xf);return Of(Jf(t),e._key).then((n=>Mp(t,e,n)))}class Dp extends Tp{constructor(e){super(),this.firestore=e}convertBytes(e){return new ep(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wf(this.firestore,null,t)}}function Op(e,t,n){e=Bf(e,Wf);const r=Bf(e.firestore,Xf),i=Ip(e.converter,t,n);return jp(r,[hp(cp(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,zu.none())])}function Fp(e,t,n){e=Bf(e,Wf);const r=Bf(e.firestore,Xf),i=cp(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=$e(t))||t instanceof tp?pp(i,"updateDoc",e._key,t,n,a):fp(i,"updateDoc",e._key,t),jp(r,[s.toMutation(e._key,zu.exists(!0))])}function Lp(e,t){const n=Bf(e.firestore,Xf),r=Qf(e),i=Ip(e.converter,t);return jp(n,[hp(cp(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,zu.exists(!1))]).then((()=>r))}function jp(e,t){return function(e,t){const n=new Zo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=kf(e);try{const e=await function(e,t){const n=Yo(e),r=da.now(),i=t.reduce(((e,t)=>e.add(t.key)),wu());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=du(),l=wu();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Wu(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Qu(e.key,t,_l(t.value.mapValue),zu.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:gu(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new za(ca)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await yf(r,e.changes),await _d(r.remoteStore)}catch(e){const t=Dd(e,"Failed to persist write");n.reject(t)}}(await Pf(e),t,n))),n.promise}(Jf(e),t)}function Mp(e,t,n){const r=n.docs.get(t._key),i=new Dp(e);return new Np(e,i,t._key,r,new Ap(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Bo=e}("10.11.1"),en(new We("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Xf(new ra(e.getProvider("auth-internal")),new aa(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Jo(Xo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),on(Uo,"4.6.1",e),on(Uo,"4.6.1","esm2017")}();on("firebase","10.11.1","app");const Up=function(e,t){const n="object"==typeof e?e:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt;const t=Yt.get(e);if(!t&&e===Kt&&Fe())return sn();if(!t)throw nn.create("no-app",{appName:e});return t}(),r="string"==typeof e?e:t||"(default)",i=tn(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=Oe("firestore");e&&Hf(i,...e)}return i}(sn({apiKey:"AIzaSyD-XWrjMOmhRPjjRz-MOA1ARZN_RVwTcbc",authDomain:"skincare-recipe-tool.firebaseapp.com",projectId:"skincare-recipe-tool",storageBucket:"skincare-recipe-tool.appspot.com",messagingSenderId:"1053752399193",appId:"1:1053752399193:web:caf58158f655ca8e0f2848"})),zp=e=>{const t=e+"=",n=document.cookie.split(";");for(let r=0;r<n.length;r++){let e=n[r];for(;" "===e.charAt(0);)e=e.substring(1);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},Bp=async()=>{const e=zp("sessionId");if(e)try{const t=Qf(Up,"sessions",e);await Fp(t,{lastDateTime:new Date}),console.log("Session lastDateTime updated in Firestore")}catch(t){console.error("Error updating document: ",t)}else{const e=navigator.userAgent,{innerWidth:n,innerHeight:r}=window;try{const t=await Lp(Kf(Up,"sessions"),{firstDatetime:new Date,lastDateTime:new Date,userAgent:e,resolution:"".concat(n,"x").concat(r)});console.log("Session info added to Firestore with ID: ",t.id),((e,t)=>{let n="";const r=new Date;r.setTime(r.getTime()+31536e6),n="; expires="+r.toUTCString(),document.cookie=e+"="+(t||"")+n+"; path=/"})("sessionId",t.id)}catch(t){console.error("Error adding document: ",t)}}},Vp=async e=>{const t=zp("sessionId");if(!t)return void console.error("Session ID cookie not found.");const n={...e,lastDateTime:new Date};try{const e=Qf(Up,"sessions",t);await Fp(e,n),console.log("Session updated successfully")}catch(r){console.error("Error updating session: ",r)}};var qp=n(579);const Hp=e=>{let{children:t,title:n,handleSubmit:r,isSubmitDisabled:i,buttonText:s,whyDisabled:o}=e;return s||(s="Next"),o||(o="Please make a selection"),(0,qp.jsxs)("div",{className:"layout",children:[(0,qp.jsxs)("div",{className:"body-container",children:[(0,qp.jsx)("h2",{children:n}),(0,qp.jsxs)("div",{className:"scroller",children:[t," "]})]}),(0,qp.jsxs)("div",{className:"button-footer",children:[(0,qp.jsx)("button",{className:"footer-submit"+(i?" disabled":""),type:"submit",onClick:r,children:s}),i&&(0,qp.jsx)("p",{className:"why-disabled",children:o})]})]})},$p=(0,t.createContext)(),Wp={goalsData:[],productData:"",includeFragrance:"no",selectedMoods:[]},Gp=(e,t)=>{switch(t.type){case"SET_PRODUCT_DATA":return{...e,productData:t.payload};case"SET_GOALS_DATA":return{...e,goalsData:t.payload};case"SET_INCLUDE_FRAGRANCE":return{...e,includeFragrance:t.payload};case"SET_SELECTED_MOODS":return{...e,selectedMoods:t.payload};case"RESET_RECIPE":return Wp;default:return e}},Kp=e=>{let{children:n}=e;const[r,i]=(0,t.useReducer)(Gp,Wp);return(0,t.useEffect)((()=>{console.log(r),(async e=>{const t=Qf(Up,"recipes","yourRecipeId");await Op(t,e,{merge:!0})})(r)}),[r]),(0,qp.jsx)($p.Provider,{value:{state:r,dispatch:i},children:n})},Qp=()=>(0,t.useContext)($p);const Yp=function(){const{state:e,dispatch:n}=Qp(),r=Z(),[i,s]=(0,t.useState)([]),[o,a]=(0,t.useState)("no"),[l,u]=(0,t.useState)([]);var c=[];c="Hair and Scalp Oil"===e.productData?["Dry scalp","Hair growth","Hair shine","Hair strength"]:"Body Moisturizing Cream or Body Butter"===e.productData?["Dry skin","Sensitive Skin","Sun Protection","Calloused Skin","Stretch marks","Eczema","Aging or age spots"]:["Adult acne","Dry skin","Sensitive Skin","Wrinkles","Puffiness","Redness","Sun Protection","Aging or age spots","Large pores","Eczema"],console.log(0===i.length,o,l);const h=e=>l.includes(e);return(0,qp.jsx)(Hp,{title:"Select Your Skincare Goals/Concerns",isSubmitDisabled:0===i.length||"yes"===o&&0===l.length,handleSubmit:e=>{e.preventDefault();Vp({selectedOptions:i,includeFragrance:o,selectedMoods:l}).then((()=>{n({type:"SET_GOALS_DATA",payload:i}),n({type:"SET_INCLUDE_FRAGRANCE",payload:o}),(e=>{n({type:"SET_SELECTED_MOODS",payload:e})})(l),r("/summary")}))},buttonText:"Next",children:(0,qp.jsxs)("form",{children:[c.map(((e,t)=>{return(0,qp.jsx)("button",{type:"button",onClick:()=>(e=>{const t=i.includes(e)?i.filter((t=>t!==e)):[...i,e];s(t)})(e),className:"goals-button ".concat((n=e,i.includes(n)?"selected":"")),children:e},t);var n})),(0,qp.jsxs)("div",{children:[(0,qp.jsx)("h3",{children:"Include natural fragrances?"}),(0,qp.jsx)("button",{type:"button",onClick:()=>a("yes"),className:"goals-button ".concat("yes"===o?"selected":""),children:"Yes"}),(0,qp.jsx)("button",{type:"button",onClick:()=>a("no"),className:"goals-button ".concat("no"===o?"selected":""),children:"No"})]}),"yes"===o&&(0,qp.jsxs)("div",{children:[(0,qp.jsx)("h3",{children:"How do you want the fragrance to make you feel?"}),["Fresh","Relaxing","Invigorated","Pampered","Focused","Beautiful","Confident","Rejuvenated","Empowered"].map(((e,t)=>(0,qp.jsx)("button",{type:"button",onClick:()=>(e=>{const t=l.includes(e)?l.filter((t=>t!==e)):[...l,e];u(t)})(e),className:"goals-button ".concat(h(e)?"selected":""),children:e},t)))]})]})})},Xp={"Sunflower Oil":{phase:"oil",type:"carrier",hlb:0,description:"Moisturizer, rich in Vitamin E, non-comedogenic, suitable for sensitive skin.",good_for:["Sensitive Skin","Dry skin"],bad_for:[],cost:"$20/half gallon",density:.92,cost_per_g:.01148,light_heavy:4,penetrating_occlusive:4,soothing_stimulating:2,gentle_active:5},"Jojoba Oil":{phase:"oil",type:"carrier",hlb:0,description:"Moisturizer, mimics natural skin oils, balances sebum production, good for acne-prone skin.",good_for:["Adult acne","Dry skin","Sensitive Skin"],bad_for:[],cost:"$9.99/8oz",density:.87,cost_per_g:.0485,light_heavy:4,penetrating_occlusive:3,soothing_stimulating:2,gentle_active:5},"Argan Oil":{phase:"oil",type:"carrier",hlb:11,description:"Rich in antioxidants and Vitamin E, moisturizes, reduces signs of aging, improves skin elasticity and enhances hair shine.",good_for:["Aging or age spots","Dry skin","Wrinkles"],bad_for:[],cost:"$54.99/32oz",density:.91,cost_per_g:.0639,buy_again_url:"https://www.organicpureoil.com/product/pure-1-oz-organic-argan-oil-extra-virgin-unrefined-cold-pressed/",light_heavy:4,penetrating_occlusive:3,soothing_stimulating:3,gentle_active:3},"Castor Oil":{phase:"oil",type:"carrier",hlb:0,description:"Thick, viscous oil; promotes hair growth, deeply hydrating, natural humectant drawing moisture to the skin.",good_for:["Dry scalp","Dry skin","Thickening hair"],bad_for:[],cost:"$15/16oz",density:.96,cost_per_g:.0289,light_heavy:7,penetrating_occlusive:2,soothing_stimulating:2,gentle_active:5},"Sweet Almond Oil":{phase:"oil",type:"carrier",hlb:6,description:"Lightweight, moisturizing oil that easily absorbs into the skin, rich in Vitamin E, helps improve skin tone and texture, ideal for sensitive skin.",good_for:["Sensitive skin","Dry skin","Eczema"],bad_for:[],cost:"$12.99/16oz",density:.91,cost_per_g:.0391,light_heavy:3,penetrating_occlusive:4,soothing_stimulating:5,gentle_active:5},"Shea Butter":{phase:"oil",type:"carrier",hlb:8,description:"Moisturizer, rich in fatty acids and vitamins, anti-inflammatory, helps with skin healing.",good_for:["Dry skin","Atopic dermatitis"],bad_for:["Adult acne"],cost:"$9.99/16oz",density:.927,cost_per_g:.0228,light_heavy:7,penetrating_occlusive:7,soothing_stimulating:5,gentle_active:3},"Cocoa Butter":{phase:"oil",type:"carrier",hlb:8,description:"Moisturizer, high in fatty acids, helps to hydrate and nourish the skin, reduces the appearance of scars.",good_for:["Dry skin","Wrinkles"],bad_for:["Adult acne"],cost:"$1/oz",cost_per_g:.0338,buy_again_url:"https://simply-ingredients.com/collections/butters-waxes/products/fair-trade-cocoa-butter?variant=37889946484922",light_heavy:8,penetrating_occlusive:8,soothing_stimulating:5,gentle_active:3},"Coconut Oil":{phase:"oil",type:"carrier",hlb:8,description:"Moisturizes skin and hair, rich in fatty acids and antioxidants. Can be comedogenic (acne-causing) for some.",good_for:["Dry skin"],bad_for:["Adult acne"],cost:"$6.96/15oz",density:.924,cost_per_g:.017,light_heavy:7,penetrating_occlusive:4,soothing_stimulating:4,gentle_active:4},"Pecan Oil":{phase:"oil",type:"carrier",hlb:0,description:"Moisturizer, rich in antioxidants, promotes skin and hair health, hydrating properties.",good_for:["Dry skin"],bad_for:[],cost:"$17/8oz",density:.95,cost_per_g:.0756,light_heavy:6,penetrating_occlusive:5,soothing_stimulating:4,gentle_active:3},"Pumpkin Seed Oil":{phase:"oil",type:"carrier",hlb:0,description:"Rich in zinc and vitamins, improves skin tone, fights acne, and soothes sensitive skin.",good_for:["Adult acne","Sensitive Skin"],bad_for:[],cost:"$3/2oz",density:.95,cost_per_g:.0534,light_heavy:5,penetrating_occlusive:4,soothing_stimulating:4,gentle_active:4},"Rosehip Seed Oil":{phase:"oil",type:"carrier",hlb:0,max_percent:10,default_percent:2,description:"Rosehip Seed Oil is rich in essential fatty acids and antioxidants. It's renowned for its skin-regenerative properties, aiding in reducing scars and fine lines. High in vitamins A and C, it helps in evening out skin tone and improving hydration.",good_for:["Wrinkles","Dry skin","Sun Protection","Aging or age spots"],bad_for:[],density:.92,cost_per_g:.19,light_heavy:3,penetrating_occlusive:3,soothing_stimulating:4,gentle_active:4},"Olive Oil":{phase:"oil",type:"carrier",hlb:0,description:"Moisturizer, rich in vitamins and antioxidants, promotes skin and hair health, but can be comedogenic (acne-causing) for some.",good_for:["Dry skin"],bad_for:["Adult acne"],cost:"$18.99/68oz",density:.9,cost_per_g:.0105,light_heavy:6,penetrating_occlusive:5,soothing_stimulating:3,gentle_active:6,nourishing_acnefighting:3},"Distilled Water":{phase:"aqueous",type:"aqueous",hlb:20,description:"Hydrates and serves as a base for water-soluble ingredients.",good_for:[],bad_for:[],cost_per_g:1e-4,endogenous:!0,light_heavy:1,penetrating_occlusive:1,soothing_stimulating:2,gentle_active:1},"Aloe Vera Gel":{phase:"aqueous",type:"aqueous",hlb:20,description:"Soothes skin irritations, hydrates, promotes healing, good for sunburns and inflammation",good_for:["Sensitive Skin","Sun Protection","Redness"],bad_for:[],cost:"9.99/300ml",density:1.2,cost_per_g:.02775,light_heavy:2,penetrating_occlusive:2,soothing_stimulating:1,gentle_active:2},Glycerin:{phase:"aqueous",type:"aqueous",hlb:20,description:"Humectant, draws moisture into the skin, suitable for all skin types, enhances skin hydration.",good_for:["Dry skin"],bad_for:[],cost:"3.66/4oz",density:1.26,cost_per_g:.0246,endogenous:!0,light_heavy:3,penetrating_occlusive:2,soothing_stimulating:2,gentle_active:3},Honey:{phase:"aqueous",type:"aqueous",hlb:20,description:"Natural humectant, antibacterial, great for acne treatment and hydration, soothing for the skin.",good_for:["Dry skin","Adult acne"],bad_for:[],light_heavy:6,penetrating_occlusive:3,soothing_stimulating:2,gentle_active:4},"Cucumber Juice":{phase:"aqueous",type:"aqueous",hlb:20,description:" Hydrating, soothing, rich in vitamins and minerals, good for puffiness and calming irritated skin.",good_for:["Puffiness","Sensitive Skin"],bad_for:[],light_heavy:2,penetrating_occlusive:2,soothing_stimulating:1,gentle_active:2},"Oat Milk":{phase:"aqueous",type:"aqueous",hlb:20,description:"Contains lipids and water-absorbing substances, providing moisturizing and soothing benefits. Helps in reducing inflammation",good_for:["Dry skin","Sensitive Skin"],bad_for:[],cost_per_g:8e-4,light_heavy:3,penetrating_occlusive:2,soothing_stimulating:1,gentle_active:3},Beeswax:{phase:"emulsifier",type:"emulsifier",hlb:12,description:" Emulsifier and stabilizer in formulations, creates a protective barrier on the skin, retains moisture.",good_for:["Dry skin"],bad_for:[],cost_per_g:.1706,light_heavy:9,penetrating_occlusive:9,soothing_stimulating:3,gentle_active:4},Lecithin:{phase:"emulsifier",type:"emulsifier",hlb:8,description:"Natural stabilizer, thickens formulas and creates protective barrier on skin.",good_for:[],bad_for:[],cost_per_g:.0884,endogenous:!0,light_heavy:6,penetrating_occlusive:5,soothing_stimulating:4,gentle_active:5},"Cetearyl Alcohol":{phase:"emulsifier",type:"emulsifier",hlb:16,description:"A waxy fatty alcohol used as an emulsifier, thickener and stabilizer in creams and lotions. Extracted from Coconut and Palm Kernel oils",good_for:[],bad_for:["Sensitive Skin"],cost_per_g:.0439,light_heavy:7,penetrating_occlusive:6,soothing_stimulating:2,gentle_active:3},"Zinc Oxide":{phase:"additive",type:"active",hlb:20,max_percent:25,default_percent:10,description:"Sunscreen agent, provides broad-spectrum UV protection, also known for its soothing and astringent properties.",good_for:["Sun Protection"],bad_for:[],cost_per_g:.0958,light_heavy:7,penetrating_occlusive:8,soothing_stimulating:1,gentle_active:2},"Hyaluronic Acid":{phase:"additive",type:"active",hlb:20,max_percent:2,default_percent:.5,description:"Powerful humectant, helps to hydrate and plump the skin by retaining moisture, reduces the appearance of fine lines and wrinkles.",good_for:["Dry skin","Wrinkles","Aging or age spots"],bad_for:[],cost_per_g:.4639,endogenous:!0,light_heavy:2,penetrating_occlusive:1,soothing_stimulating:1,gentle_active:2},Retinol:{phase:"additive",type:"active",hlb:0,max_percent:1,default_percent:.1,description:"Retinyl Palmitate is an ester of Retinol (Vitamin A) and Palmitic Acid.  It is a powerful antioxidant that may help boosts collagen in the skin, minimizes fine lines and wrinkles, as well as smooths the texture of the skin. Should be used intermittently until skin aclimates to it. Sun sensitizing, so should only be used at night.",good_for:["Wrinkles","Aging or age spots"],bad_for:["Sensitive Skin"],cost_per_g:.4282,deprecated:!0,light_heavy:4,penetrating_occlusive:3,soothing_stimulating:7,gentle_active:6},"Retinyl Palmitate":{phase:"additive",type:"active",hlb:0,max_percent:1,default_percent:.1,description:"An ester of Retinol (Vitamin A) and Palmitic Acid, it is the weakest form of Retinol. It is a powerful antioxidant that may help boosts collagen in the skin, minimizes fine lines and wrinkles, as well as smooths the texture of the skin. Should be used intermittently until skin aclimates to it. Sun sensitizing, so should only be used at night.",good_for:["Wrinkles","Aging or age spots"],bad_for:["Sensitive Skin"],cost_per_g:.4282,endogenous:!0,light_heavy:4,penetrating_occlusive:3,soothing_stimulating:9,gentle_active:9},"Vitamin C":{phase:"additive",type:"active",hlb:20,max_percent:20,default_percent:5,description:"Antioxidant, aids in skin repair and regeneration, can help in reducing pigmentation and promoting collagen production.",good_for:["Aging or age spots","Sun Protection"],bad_for:[],cost_per_g:.0288,endogenous:!0,light_heavy:3,penetrating_occlusive:2,soothing_stimulating:7,gentle_active:7,deprecated:!0},"Vitamin E":{phase:"additive",type:"active",hlb:0,max_percent:1,default_percent:.5,description:"Antioxidant, helps in protecting the skin from environmental damage, moisturizes, and heals. Extends shelf life of oils.",good_for:["Sun Protection","Aging or age spots"],bad_for:[],density:.95,cost_per_g:.3505,endogenous:!0,light_heavy:4,penetrating_occlusive:3,soothing_stimulating:3,gentle_active:4},"Niacinamide (Vitamin B3)":{phase:"additive",type:"active",hlb:20,max_percent:5,default_percent:2,description:"Improves appearance of enlarged pores, uneven skin tone, fine lines. Reduces redness and irritation.",good_for:["Large pores","Wrinkles","Redness"],bad_for:[],cost_per_g:.3567,endogenous:!0,light_heavy:2,penetrating_occlusive:1,soothing_stimulating:6,gentle_active:6},"Lavender Oil":{phase:"additive",type:"fragrance",hlb:0,max_percent:1,default_percent:.5,description:"Calming and relaxing, and can be used to soothe irritated skin. Anti-inflammatory and antimicrobial properties.",good_for:["Sensitive Skin","Redness"],bad_for:[],density:.885,cost_per_g:1.1578,light_heavy:5,penetrating_occlusive:4,soothing_stimulating:6,gentle_active:5},"Rosemary Oil":{phase:"additive",type:"fragrance",hlb:0,max_percent:2,default_percent:1,description:"Rejuvenates skin, improves hair growth and scalp health, and has antioxidant properties. Improves circulation and can help with puffiness.",good_for:["Aging or age spots"],bad_for:["Sensitive Skin"],density:.895,cost_per_g:.1214,light_heavy:5,penetrating_occlusive:4,soothing_stimulating:7,gentle_active:6},"Tea Tree Oil":{phase:"additive",type:"fragrance",hlb:0,max_percent:2,default_percent:1,description:"Antimicrobial and anti-inflammatory, very effective against acne, helps in cleansing the skin.",good_for:["Adult acne"],bad_for:["Dry skin"],density:.878,cost_per_g:.3792,light_heavy:4,penetrating_occlusive:4,soothing_stimulating:8,gentle_active:7},"Jasmine Oil":{phase:"additive",type:"fragrance",hlb:0,max_percent:1,default_percent:.5,description:"Moisturizes, soothes, often used for its fragrance and hydrating properties.",good_for:["Dry skin"],bad_for:[],density:.947,cost_per_g:2.7434,light_heavy:4,penetrating_occlusive:4,soothing_stimulating:5,gentle_active:5},"Eucalyptus Oil":{phase:"additive",type:"fragrance",hlb:0,max_percent:2,default_percent:1,description:"Antiseptic and anti-inflammatory properties, good for healing. Refreshing scent.",good_for:["Adult acne"],bad_for:["Sensitive Skin","Dry skin"],densitY:.914,cost_per_g:.153,light_heavy:4,penetrating_occlusive:4,soothing_stimulating:7,gentle_active:6},"Peppermint Oil":{phase:"additive",type:"fragrance",hlb:0,max_percent:1,default_percent:.5,description:"Cooling sensation and refreshing scent. It has antiseptic and antimicrobial properties. Can help with acne and oily skin, but can be irritating.",good_for:["Adult acne","Puffiness"],bad_for:["Sensitive Skin","Redness"],density:.898,cost_per_g:.0942,light_heavy:4,penetrating_occlusive:4,soothing_stimulating:8,gentle_active:6},"Pine Oil":{phase:"additive",type:"fragrance",hlb:0,max_percent:1,default_percent:.5,description:"Known for its invigorating and refreshing scent, has antimicrobial and anti-inflammatory properties. It's often used in skincare for its soothing effects on the skin and its ability to help with respiratory issues.",good_for:["Atopic dermatitis","Adult acne"],bad_for:["Sensitive Skin"],cost_per_g:1.155,light_heavy:4,penetrating_occlusive:4,soothing_stimulating:8,gentle_active:7},"Cedar Oil":{phase:"additive",type:"fragrance",hlb:0,max_percent:1,default_percent:.5,description:"With its woodsy aroma, is known for its calming and grounding effects. It has antiseptic, anti-inflammatory, and astringent properties, making it beneficial for skin conditions like acne and aiding in soothing irritated skin.",good_for:["Adult acne","Atopic dermatitis"],bad_for:["Sensitive Skin"],density:.952,cost_per_g:1.7507,light_heavy:5,penetrating_occlusive:5,soothing_stimulating:7,gentle_active:6},"Geranium Oil":{phase:"additive",type:"fragrance",hlb:0,max_percent:2,default_percent:.5,description:"Geranium Oil, known for its floral scent, is used for its astringent, antiseptic, and anti-inflammatory properties. It helps in balancing sebum production, enhancing skin elasticity, and promoting the healing of scars and spots.",good_for:["Adult acne","Large pores","Wrinkles"],bad_for:["Sensitive Skin"],density:.887,cost_per_g:1.5031,light_heavy:4,penetrating_occlusive:4,soothing_stimulating:6,gentle_active:5},"Carrot Seed Oil":{phase:"additive",type:"fragrance",hlb:0,max_percent:5,default_percent:1,description:"Carrot Seed Oil is valued for its antioxidant properties and high vitamin A content. It's considered excellent for sun protection, rejuvenating aged skin, and promoting skin healing. Also known for its ability to rejuvenate and regenerate skin tissues.",good_for:["Aging or age spots","Sun Protection","Wrinkles"],bad_for:["Sensitive Skin"],density:.92,cost_per_g:1.5942,light_heavy:5,penetrating_occlusive:4,soothing_stimulating:4,gentle_active:5},Phenoxyethanol:{phase:"preservative",type:"preservative",hlb:20,max_percent:1,default_percent:.5,description:"Broad-spectrum preservative, effective against bacteria, yeast, and mold. It is used in concentrations of 0.5% to 1%.",cost_per_g:.0712,good_for:[],bad_for:[],light_heavy:1,penetrating_occlusive:1,soothing_stimulating:1,gentle_active:1},"AntiMicro Banana":{phase:"preservative",type:"preservative",hlb:20,max_percent:4,default_percent:2,description:"Broad-spectrum preservative, 100% plant derived - made of parts of the banana tree that would go to waste. Water soluble, concentrated plant extract.",good_for:[],bad_for:[],light_heavy:1,penetrating_occlusive:1,soothing_stimulating:1,gentle_active:1},"AntiMicro Root Blend":{phase:"preservative",type:"preservative",hlb:20,max_percent:2,default_percent:1,description:"Unique blend of garlic, ginger & wasabi extracts dissolved in hydrating glycols providing effective microbial growth prevention.",good_for:[],bad_for:[],light_heavy:1,penetrating_occlusive:1,soothing_stimulating:1,gentle_active:1}},Jp=e=>Object.keys(Xp).filter((t=>!tg[e].bannedIngredients.includes(t))).filter((e=>!0!==Xp[e].deprecated)).reduce(((e,t)=>(e[t]=Xp[t],e)),{}),Zp=Xp,eg=()=>{const e=[];return Object.entries(Zp).forEach((t=>{let[n,r]=t;r.hlb>16&&e.push(n)})),e},tg={"Daytime Face Moisturizing Cream with SPF":{description:"An invigorating morning cream that hydrates your skin while providing sun protection with natural zinc oxide, perfect for applying after your morning cleanse to keep your skin soft and shielded throughout the day.",bannedIngredients:["Retinyl Palmitate"],mustIncludeIngredients:["Zinc Oxide"],typeOrder:["carrier","aqueous","emulsifier","active","fragrance","preservative"]},"AM/PM Face Moisturizing Cream (No SPF)":{description:"Ideal for night-time nourishment or for daytime use under your preferred sunscreen, design a cream that will deeply moisturizes your skin, leaving it feeling smooth and refreshed",bannedIngredients:["Retinyl Palmitate"],mustIncludeIngredients:[],typeOrder:["carrier","aqueous","emulsifier","active","fragrance","preservative"]},"Before Bed Face Moisturizing Cream":{description:"A deeply nourishing cream that will hydrate your skin while you sleep, leaving it feeling soft and refreshed in the morning.",bannedIngredients:[],mustIncludeIngredients:[],typeOrder:["carrier","aqueous","emulsifier","active","fragrance","preservative"]},"Body Moisturizing Cream or Body Butter":{description:"Build a deeply hydrading and nourishing to lock in moisture and rejuvenate the skin. Body moisturizers are typically richer and thicker in texture than facial moisturizers, designed to hydrate the less sensitive, more robust skin of the body.",bannedIngredients:[],mustIncludeIngredients:[],typeOrder:["carrier","aqueous","emulsifier","active","fragrance","preservative"]},"Face Oil":{description:"Formulate an oil to deeply nourish and rejuvenate your skin, best used in combination with a separate SPF product during the day to ensure full sun protection while maintaining radiant skin.",bannedIngredients:eg(),mustIncludeIngredients:[],typeOrder:["carrier","fragrance","preservative"]},"Hair and Scalp Oil":{description:"Formulate a soothing and revitalizing hair and scalp oil to nourish your scalp, strengthen hair roots, and add a healthy shine to your hair.  Use as a pre-shampoo treatment or as a leave-in conditioner.",bannedIngredients:eg(),mustIncludeIngredients:[],typeOrder:["carrier","fragrance","preservative"]}};const ng=function(){const{dispatch:e}=Qp(),n=Z(),[r,i]=(0,t.useState)(""),s=t=>{t.preventDefault(),e({type:"SET_PRODUCT_DATA",payload:r}),Vp({selectedProduct:r}).then((()=>{n("/goals")}))};return(0,qp.jsx)(Hp,{title:"Select a Skincare Product Type",handleSubmit:s,isSubmitDisabled:!r,buttonText:"Next",children:(0,qp.jsx)("div",{className:"product-container",children:(0,qp.jsx)("form",{onSubmit:s,children:Object.entries(tg).map((e=>{let[t,n]=e;return(0,qp.jsxs)("div",{children:[(0,qp.jsx)("button",{type:"button",onClick:()=>{i(t)},className:r===t?"selected":"",children:t.charAt(0).toUpperCase()+t.slice(1)}),(0,qp.jsx)("p",{className:r===t?"selected":"",children:n.description})]},t)}))})})})},rg=(0,t.createContext)();function ig(e){let{children:n}=e;const[r,i]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e="true"===localStorage.getItem("devFeature");i(e)}),[]);return(0,qp.jsx)(rg.Provider,{value:{isDevFeatureEnabled:r,toggleFeature:()=>{localStorage.setItem("devFeature",!r),i(!r)}},children:n})}const sg=["AI is preparing a recipe for you...","Considering which ingredients will work best for your concerns...","Balancing proportions to ensure proper texture...","Optimizing for your skin type...","Finalizing the perfect skincare formula...","Almost there, just adding the finishing touches..."];const og=function(){const{isDevFeatureEnabled:e}=(0,t.useContext)(rg),{state:n}=Qp(),r=Z(),[i,s]=(0,t.useState)(!1),[o,a]=(0,t.useState)(sg[0]);function l(e){let t="";return Object.keys(e).forEach(((n,r,i)=>{t+=n,(e[n].hasOwnProperty("default_percent")||e[n].hasOwnProperty("max_percent"))&&(t+=" (",e[n].hasOwnProperty("default_percent")&&(t+="default: ".concat(e[n].default_percent),e[n].hasOwnProperty("max_percent")&&(t+=", ")),e[n].hasOwnProperty("max_percent")&&(t+="max: ".concat(e[n].max_percent)),t+=")"),r<i.length-1&&(t+=", ")})),t}return(0,t.useEffect)((()=>{if(i){const e=setInterval((()=>{a((e=>{const t=(sg.indexOf(e)+1)%sg.length;return sg[t]}))}),4e3);return()=>clearInterval(e)}}),[i]),(0,qp.jsxs)(Hp,{title:"Your Selections",handleSubmit:()=>{if(e)return void r("/phase-choices");s(!0),a(sg[0]);const t=n.goalsData.join(", "),i=n.productData,o="yes"===n.includeFragrance?"Essential oils should be added that will make me feel  ".concat(n.selectedMoods.join(" and ")," ."):"It should not have fragrance added.",u={text:"Hello, I am trying to formulate a ".concat(i," for ").concat(t,". ").concat(o," Please suggest a recipe?"),ingredients:l(Zp)};"Daytime Face Moisturizing Cream with SPF"===n.productData&&(u.text+=" I would like to include Zinc Oxide for SPF in the formulation."),console.log("Sending OpenAI request: ",u.text,u.ingredients),fetch("https://us-central1-skincare-recipe-tool.cloudfunctions.net/getInitialRecipe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then((e=>e.json())).then((e=>{s(!1),console.log("Success:",e);const t=e.reply.choices[0].message.content,n=JSON.parse(t);console.log(n),Vp({aiRecipeResponse:n}).then((()=>{r("/recipe-builder",{state:{recipe:n}})}))})).catch((e=>{s(!1),console.error("Error:",e)}))},buttonText:"Generate a Formulation with AI",isSubmitDisabled:i,whyDisabled:"Loading...",children:[(0,qp.jsx)("h3",{children:"Selected Skincare Product:"}),(0,qp.jsx)("ul",{children:(0,qp.jsx)("li",{children:n.productData.charAt(0).toUpperCase()+n.productData.slice(1)})}),(0,qp.jsx)("h3",{children:"Skincare Goals/Concerns:"}),(0,qp.jsx)("ul",{children:n.goalsData.map(((e,t)=>(0,qp.jsx)("li",{children:e},t)))}),(0,qp.jsx)("h3",{children:"Include Fragrance: "}),(0,qp.jsx)("ul",{children:(0,qp.jsx)("li",{children:n.includeFragrance.charAt(0).toUpperCase()+n.includeFragrance.slice(1)})}),"yes"===n.includeFragrance&&(0,qp.jsxs)(qp.Fragment,{children:[(0,qp.jsx)("h3",{children:"Selected Moods:"}),(0,qp.jsx)("ul",{children:n.selectedMoods.map(((e,t)=>(0,qp.jsx)("li",{children:e},t)))})]}),e?(0,qp.jsx)("div",{children:"Dev Feature Enabled Content Here"}):(0,qp.jsx)("span",{}),i?(0,qp.jsxs)("div",{className:"loading-container",children:[(0,qp.jsx)("div",{className:"loader"}),(0,qp.jsx)("p",{className:"loading-message",children:o})]}):(0,qp.jsx)(qp.Fragment,{})]})};const ag=function(){var e;const{state:n}=Qp(),r=Z(),[i,s]=(0,t.useState)([]),[o,a]=(0,t.useState)({}),[l,u]=(0,t.useState)("selectIngredients"),[c,h]=(0,t.useState)(""),[d,f]=(0,t.useState)(""),p=Jp(n.productData),g=null===(e=X().state)||void 0===e?void 0:e.recipe,m=()=>{u("adjustProportions")},v=(e,t)=>{let n=100-Object.keys(o).filter((e=>b(e))).reduce(((e,t)=>e+o[t]),0);const r=i.filter((e=>!b(e))),s={...o,[e]:t};n-=t;const l=r.filter((t=>t!==e)).reduce(((e,t)=>e+s[t]),0);if(l>0){const t=n/l;r.forEach((n=>{if(n!==e){let e=s[n]*t;s[n]=e<0?0:e}}))}else r.forEach((t=>{t!==e&&(s[t]=0)}));a(s)},[y,_]=(0,t.useState)({}),b=e=>{const t=p[e];return!!t&&"additive"===t.phase},w=()=>{const e={...o};let t=0;Object.keys(e).forEach((n=>{b(n)||(e[n]=Math.round(e[n])),t+=e[n]}));const n=100-t,r=Object.keys(e).filter((e=>!b(e))),i=n/r.length;r.forEach((t=>{e[t]+=i}));let s=0;if(r.forEach((t=>{e[t]<0&&(s+=e[t],e[t]=0)})),s<0){const t=r.filter((t=>e[t]>=.01)),n=Math.abs(s)/t.length;t.forEach((t=>{e[t]+=n}))}const l=Object.values(e).reduce(((e,t)=>e+t),0);if(l>100){const t=l-100,n=r.filter((t=>e[t]>0)),i=t/n.length;n.forEach((t=>{e[t]-=i}))}a(e)},k=()=>{setTimeout((()=>{w()}),10)},S={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"};(0,t.useEffect)((()=>{const e={};i.forEach((t=>{b(t)?e[t]=1:e[t]=10})),a((t=>Object.keys(t).filter((e=>i.includes(e))).reduce(((e,n)=>(e[n]=t[n],e)),e)))}),[i]);const E=Object.values(o).reduce(((e,t)=>e+t),0),x={color:Math.abs(E-100)<.01?"black":"red"};return(0,t.useEffect)((()=>{if(console.log("useeffectinitialRecipe",g),g){const e={},t=[];Object.keys(g).forEach((n=>{"commentary"===n?h(g.commentary):"shelfLifeEstimate"===n?f(g.shelfLifeEstimate):p[n]&&(e[n]=g[n],t.push(n))})),console.log("ingredientsfromresponse",e),a(e),s(t),m()}}),[g]),(0,qp.jsxs)("div",{children:["selectIngredients"===l&&(0,qp.jsx)("div",{children:(0,qp.jsxs)("div",{children:[(0,qp.jsxs)("div",{style:S,children:[(0,qp.jsx)("h3",{children:"Available Ingredients:"}),(0,qp.jsx)("button",{onClick:m,children:"Adjust Proportions"}),(0,qp.jsx)("span",{})]}),Object.entries(p).map((e=>{let[t,n]=e;return(0,qp.jsxs)("div",{className:(r=t,(i.includes(r)?"selected":"")+" ingredient-row"),onClick:()=>(e=>{if(i.includes(e)){s(i.filter((t=>t!==e)));const t={...o};delete t[e],a(t)}else s([...i,e]),a({...o,[e]:"additive"===p[e].phase?p[e].default_percent:10})})(t),children:[(0,qp.jsx)("strong",{children:t}),(0,qp.jsx)("small",{children:n.description})]},t);var r}))]})}),"adjustProportions"===l&&(0,qp.jsxs)("div",{className:"recipe-builder-container",children:[(0,qp.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[(0,qp.jsx)("button",{onClick:()=>{u("selectIngredients")},children:"Back to Ingredients"}),(0,qp.jsx)("h3",{children:"Proportions:"}),(0,qp.jsxs)("span",{style:x,onClick:w,children:[E.toFixed(2),"%"]})]}),(0,qp.jsxs)("div",{className:"scrollable-content",children:[(0,qp.jsx)("table",{style:{width:"95%",borderCollapse:"collapse"},children:(0,qp.jsx)("tbody",{children:i.map((e=>{var n;return(0,qp.jsxs)(t.Fragment,{children:[(0,qp.jsxs)("tr",{children:[(0,qp.jsx)("td",{children:e}),(0,qp.jsxs)("td",{children:[o[e].toFixed(2),"%"]})]}),(0,qp.jsx)("tr",{children:(0,qp.jsx)("td",{colSpan:"2",children:b(e)?(0,qp.jsxs)("div",{style:{position:"relative"},children:[(0,qp.jsx)("input",{type:"text",value:null!==(n=y[e])&&void 0!==n?n:o[e],onChange:t=>((e,t)=>{_({...y,[e]:t});const n=parseFloat(t),r=p[e].max_percent||100;if(!isNaN(n)&&t.match(/^\d+(\.\d+)?$/)){const t=n>r?r:n,i={...o,[e]:t};a(i),v(e,n)}})(e,t.target.value),onBlur:t=>(e=>{const t=y[e],n=t?parseFloat(t):0,r=p[e].max_percent||100,i=n>r?r:n;if(!isNaN(i)){const t={...o,[e]:i};a(t),v(e,i),n>r&&_({...y,[e]:r})}})(e,t.target.value),style:{width:"100%",borderColor:o[e]===p[e].max_percent?"red":"initial"}}),o[e]===p[e].max_percent&&(0,qp.jsx)("span",{style:{position:"absolute",right:0,top:0,color:"red"},children:"Max"})]}):(0,qp.jsx)("input",{type:"range",min:"0",max:"100",step:"0.01",value:o[e],onChange:t=>((e,t)=>{const n=parseFloat(t);v(e,n)})(e,t.target.value),onMouseUp:k,onTouchEnd:k,style:{width:"100%"}})})})]},e)}))})}),c&&(0,qp.jsxs)("div",{className:"commentary",children:[(0,qp.jsxs)("div",{style:S,children:[(0,qp.jsx)("h3",{children:"Commentary:"}),(0,qp.jsx)("button",{onClick:()=>{console.log("boop")},children:"Get Recipe Advice (Coming Soon!)"})]}),(0,qp.jsx)("p",{children:c}),(0,qp.jsxs)("p",{children:["Estimated Shelf Life: ",d]})]})]}),(0,qp.jsx)("button",{className:"submit",onClick:()=>{w(),r("/finalize-recipe",{state:{recipe:o,commentary:c}})},children:"Finalize Recipe"})]})]})};const lg=function(){var e,n;const[r,i]=(0,t.useState)(""),s=X(),o=Z(),a=null===(e=s.state)||void 0===e?void 0:e.recipe,l=null===(n=s.state)||void 0===n?void 0:n.commentary,u=r.trim().length>0;return(0,qp.jsxs)(Hp,{title:"Name Your Custom Skincare Recipe",isSubmitDisabled:!u,whyDisabled:"Please enter a recipe name.",handleSubmit:async()=>{try{const e=r.toLowerCase().replace(/[^a-z0-9]/gi,"").replace(/ /g,"-")+"-"+(new Date).getTime();console.log(e),console.log(s.state),await Op(Qf(Up,"formulations",e),{name:r,ingredients:a,commentary:l,createdAt:new Date}),console.log("Document written with ID: ",e),await Vp({recipeId:e}),o("/saved-recipe",{state:{recipeId:e}})}catch(Tg){console.error("Error adding document: ",Tg)}},children:[(0,qp.jsx)("input",{type:"text",placeholder:"Enter recipe name",value:r,onChange:e=>i(e.target.value)}),(0,qp.jsx)("h2",{children:"Your Base Recipe"}),(0,qp.jsx)("div",{className:"recipe",children:a&&Object.keys(a).map(((e,t)=>(0,qp.jsxs)("div",{className:"recipe-row",children:[(0,qp.jsxs)("strong",{children:[e,":"]})," ",(0,qp.jsxs)("span",{className:"align-right",children:[a[e].toFixed(2),"%"]})]},t)))}),(0,qp.jsxs)("div",{className:"actions",children:[(0,qp.jsx)("button",{onClick:()=>{o("/change-ingredients")},children:"Change Ingredients"}),(0,qp.jsx)("button",{onClick:()=>{o("/recipe-builder")},children:"Change Proportions"})]})]})};const ug=function(){var e;const[n,r]=(0,t.useState)(null),i=X(),s=Z(),o=null===(e=i.state)||void 0===e?void 0:e.recipeId,[a,l]=(0,t.useState)("Share this Recipe");return(0,t.useEffect)((()=>{const e=new URLSearchParams(i.search).get("recipeId");if(e){(async()=>{const t=Qf(Up,"formulations",e),n=await Pp(t);n.exists()?r(n.data()):console.log("No such document!")})()}else if(o){(async()=>{const e=Qf(Up,"formulations",o),t=await Pp(e);t.exists()?r(t.data()):console.log("No such document!")})()}}),[o,i.search]),n?(0,qp.jsxs)("div",{children:[(0,qp.jsx)("h2",{children:n.name}),(0,qp.jsx)("div",{className:"recipe",children:Object.keys(n.ingredients).map(((e,t)=>(0,qp.jsxs)("div",{className:"recipe-row",children:[(0,qp.jsxs)("strong",{children:[e,":"]})," ",(0,qp.jsx)("span",{className:"align-right",children:n.ingredients[e].toFixed(2)})]},t)))}),(0,qp.jsx)("button",{onClick:()=>{const e=window.location.href,t="".concat(e,"?recipeId=").concat(o);navigator.clipboard.writeText(t).then((()=>{console.log("Recipe URL copied to clipboard!"),l("Copied!"),setTimeout((()=>{l("Share this Recipe")}),3e3)})).catch((()=>{console.log("Error copying to clipboard")}))},children:a}),(0,qp.jsx)("button",{onClick:()=>{s("/order-formulation",{state:{recipeId:o}})},children:"Order Formulation of this Recipe"})]}):(0,qp.jsx)("div",{children:"Loading..."})};const cg=function(){var e;const n=Z(),[r,i]=(0,t.useState)(null),[s,o]=(0,t.useState)(""),[a,l]=(0,t.useState)(""),[u,c]=(0,t.useState)(!0),[h,d]=(0,t.useState)(!0),[f,p]=(0,t.useState)({street1:"",street2:"",zip:""}),[g,m]=(0,t.useState)(""),[v,y]=(0,t.useState)(""),_=null===(e=X().state)||void 0===e?void 0:e.recipeId,[b,w]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{if(_){(async()=>{const e=Qf(Up,"formulations",_),t=await Pp(e);t.exists()?i(t.data()):console.log("No such document!")})()}}),[_]),r?(0,qp.jsxs)("div",{className:"body-container",children:[(0,qp.jsx)("h2",{children:r.name}),(0,qp.jsxs)("div",{className:"scrollable-content",children:[(0,qp.jsx)("div",{className:"recipe",children:Object.keys(r.ingredients).map(((e,t)=>(0,qp.jsxs)("div",{children:[(0,qp.jsx)("strong",{children:e}),": ",r.ingredients[e]]},t)))}),(0,qp.jsx)("p",{children:"While this service is in development, formulations are free to people located in Seattle! We only ask that you please provide a review of your product and feedback about your experience using the service. (We'll send you a way to access that after we deliver your formulation)."}),(0,qp.jsxs)("form",{onSubmit:async e=>{w(!1),e.preventDefault();try{const e=(new Date).getTime()+"-"+_;await Op(Qf(Up,"orders",e),{name:s,recipeId:_,phoneNumber:a,pickup:h,address:h?null:f,createdAt:new Date,waitlist:!u,location:v,note:g}),console.log("Order submitted"),await Vp({orderId:e}),n("/order-success")}catch(e){console.error("Error submitting order: ",e),w(!0)}},className:"contact-us-form",children:[(0,qp.jsxs)("div",{children:[(0,qp.jsx)("label",{children:"Your Name:"}),(0,qp.jsx)("br",{}),(0,qp.jsx)("input",{type:"text",value:s,onChange:e=>o(e.target.value)})]}),(0,qp.jsxs)("div",{children:[(0,qp.jsx)("label",{children:"Mobile phone number (We'll text with you to coordinate delivery):"}),(0,qp.jsx)("br",{}),(0,qp.jsx)("input",{type:"tel",value:a,onChange:e=>l(e.target.value)})]}),(0,qp.jsxs)("div",{children:[(0,qp.jsx)("label",{children:"Do you live in the Seattle area?"}),(0,qp.jsx)("br",{}),(0,qp.jsxs)("select",{value:u,onChange:e=>c("true"===e.target.value),children:[(0,qp.jsx)("option",{value:"true",children:"Yes"}),(0,qp.jsx)("option",{value:"false",children:"No"})]})]}),u?(0,qp.jsxs)("div",{children:[(0,qp.jsx)("label",{children:"Do you want to pick it up from Chris Koss's house (South Beacon Hill)?"}),(0,qp.jsx)("br",{}),(0,qp.jsxs)("select",{value:h,onChange:e=>d("true"===e.target.value),children:[(0,qp.jsx)("option",{value:"true",children:"Yes"}),(0,qp.jsx)("option",{value:"false",children:"No"})]}),!h&&(0,qp.jsxs)("div",{children:[(0,qp.jsx)("label",{children:"Delivery Address:"}),(0,qp.jsx)("br",{}),(0,qp.jsx)("input",{type:"text",placeholder:"Street 1",value:f.street1,onChange:e=>p({...f,street1:e.target.value})}),(0,qp.jsx)("br",{}),(0,qp.jsx)("input",{type:"text",placeholder:"Street 2",value:f.street2,onChange:e=>p({...f,street2:e.target.value})}),(0,qp.jsx)("br",{}),(0,qp.jsx)("input",{type:"text",value:"Seattle",readOnly:!0}),(0,qp.jsx)("br",{}),(0,qp.jsx)("input",{type:"text",value:"WA",readOnly:!0}),(0,qp.jsx)("br",{}),(0,qp.jsx)("input",{type:"text",placeholder:"Zip Code",value:f.zip,onChange:e=>p({...f,zip:e.target.value})})]})]}):(0,qp.jsxs)("div",{children:[(0,qp.jsx)("p",{children:"We are currently only fulfilling orders within the Seattle area. You'll be added to the waitlist and we'll contact you when we start shipping orders."}),(0,qp.jsx)("label",{children:"Where are you located?"}),(0,qp.jsx)("br",{}),(0,qp.jsx)("input",{type:"text",placeholder:"Your Location",onChange:e=>{y(e.target.value)}})]}),(0,qp.jsx)("label",{children:"Note:"}),(0,qp.jsx)("br",{}),(0,qp.jsx)("textarea",{placeholder:"Enter your note here",value:g,onChange:e=>m(e.target.value)}),(0,qp.jsx)("button",{type:"submit",className:"submit",children:"Submit Order"})]})]}),(0,qp.jsx)("div",{className:"bottom-spacer"}),(0,qp.jsx)("div",{className:"bottom-spacer"}),b&&(0,qp.jsx)("p",{className:"why-disabled",children:"Something went wrong submitting... please try again"})]}):(0,qp.jsx)("div",{children:"Loading..."})};const hg=function(){return(0,qp.jsxs)("div",{className:"order-success body-container",children:[(0,qp.jsx)("h2",{children:"Order Submitted Successfully!"}),(0,qp.jsx)("p",{children:"Your information has been successfully submitted. Please look out for a text message from Chris."}),(0,qp.jsx)("p",{children:"We will coordinate the mixing time with you, ensuring that your formulation is mixed within 24 hours of when you receive it for maximum freshness."}),(0,qp.jsx)("p",{children:"Thank you for using our service!"}),(0,qp.jsx)(Ee,{to:"/",children:"Back to Home"})]})},dg=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,o]=(0,t.useState)(!1);return s?(0,qp.jsxs)("div",{children:[(0,qp.jsxs)("h1",{children:["Thanks for contacting us! ",(0,qp.jsx)("br",{})," We'll get back to you soon!"]}),(0,qp.jsx)("a",{href:"/",children:"Back to home"})]}):(0,qp.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{await Lp(Kf(Up,"contact-form-submissions"),{phoneNumber:e,message:r,createdAt:new Date}),o(!0)}catch(n){console.error("Error adding document: ",n)}},className:"contact-us-form",children:[(0,qp.jsx)("h2",{children:"Contact Us"}),(0,qp.jsxs)("label",{children:[(0,qp.jsx)("strong",{children:"Phone number"})," (if you'd like us to text you a response): ",(0,qp.jsx)("br",{}),(0,qp.jsx)("input",{type:"text",value:e,onChange:e=>n(e.target.value)})]}),(0,qp.jsx)("br",{}),(0,qp.jsxs)("label",{children:[(0,qp.jsx)("strong",{children:"Message:"}),(0,qp.jsx)("br",{}),(0,qp.jsx)("textarea",{value:r,onChange:e=>i(e.target.value)})]}),(0,qp.jsx)("button",{type:"submit",children:"Submit"})]})};const fg=function(){const e=X(),[n,r]=(0,t.useState)(null),[i,s]=(0,t.useState)(60),[o,a]=(0,t.useState)([]),[l,u]=(0,t.useState)(""),c=o.reduce(((e,t)=>e+t.grams),0),h=o.reduce(((e,t)=>e+t.cost),0),d=Object.values((null===n||void 0===n?void 0:n.ingredients)||{}).reduce(((e,t)=>e+t),0);(0,t.useEffect)((()=>{const t=new URLSearchParams(e.search);t.get("recipeId")&&(async()=>{const e=Qf(Up,"formulations",t.get("recipeId")),n=await Pp(e);n.exists()?r(n.data()):console.log("No such document!")})()}),[e.search]),(0,t.useEffect)((()=>{if(n&&d>0){const e=Object.entries(n.ingredients).sort(((e,t)=>t[1]-e[1])).map((e=>{let[t,n]=e;const r=n/d*100;return"".concat(t," (").concat(r,"%)")})).join(", ");u("Base Recipe Ingredients: ".concat(e))}}),[n,d]);const f=(0,t.useCallback)((()=>{if(n){const e=Object.values(n.ingredients).reduce(((e,t)=>e+t),0),t=Object.entries(n.ingredients).map((t=>{let[n,r]=t;const s=i/e*r;return{name:n,parts:r,grams:s,cost:Zp[n].cost_per_g?Zp[n].cost_per_g*s:"N/A"}}));a(t)}}),[n,i]);return(0,t.useEffect)((()=>{n&&i>0&&f()}),[n,i,f]),(0,qp.jsxs)("div",{className:"order-pricing",children:[(0,qp.jsx)("h1",{children:"Order Pricing"}),(0,qp.jsx)("input",{type:"number",value:i,onChange:e=>s(e.target.value),placeholder:"Target Grams"}),(0,qp.jsxs)("table",{children:[(0,qp.jsx)("thead",{children:(0,qp.jsxs)("tr",{children:[(0,qp.jsx)("th",{children:"Ingredient"}),(0,qp.jsx)("th",{children:"Parts"}),(0,qp.jsx)("th",{children:"Grams"}),(0,qp.jsx)("th",{children:"Cost"})]})}),(0,qp.jsxs)("tbody",{children:[o.map(((e,t)=>(0,qp.jsxs)("tr",{children:[(0,qp.jsx)("td",{children:e.name}),(0,qp.jsx)("td",{children:e.parts}),(0,qp.jsx)("td",{children:e.grams.toFixed(3)}),(0,qp.jsxs)("td",{children:["$",e.cost.toFixed(2)]})]},t))),(0,qp.jsxs)("tr",{children:[(0,qp.jsx)("td",{children:(0,qp.jsx)("strong",{children:"Total"})}),(0,qp.jsx)("td",{children:d}),(0,qp.jsx)("td",{children:c.toFixed(3)}),(0,qp.jsxs)("td",{children:["$",h.toFixed(2)]})]})]})]}),(0,qp.jsx)("p",{children:l})]})};const pg=function(){const e=X(),[n,r]=(0,t.useState)([]),[i,s]=(0,t.useState)(new Set),[o,a]=(0,t.useState)(!0),[l,u]=(0,t.useState)(null);(0,t.useEffect)((()=>{a(!0);const t=new URLSearchParams(e.search).get("recipeId");if(t){(async()=>{const e=Qf(Up,"formulations",t),n=await Pp(e);n.exists()?(u(n.data()),console.log("Document data:",n.data())):(console.log("No such document!"),a(!1))})()}}),[e.search]),(0,t.useEffect)((()=>{if(l){(async()=>{a(!0);try{const e=(()=>{let e="";return Object.keys(Xp).forEach(((t,n,r)=>{e+=t,(Xp[t].hasOwnProperty("default_percent")||Xp[t].hasOwnProperty("max_percent"))&&(e+=" (",Xp[t].hasOwnProperty("default_percent")&&(e+="default: ".concat(Xp[t].default_percent),Xp[t].hasOwnProperty("max_percent")&&(e+=", ")),Xp[t].hasOwnProperty("max_percent")&&(e+="max: ".concat(Xp[t].max_percent)),e+=")"),n<r.length-1&&(e+=", ")})),e})();console.log("Ingredients:",e);const t=await fetch("https://us-central1-skincare-recipe-tool.cloudfunctions.net/getRecipeVariations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipe:l,ingredients:e})});if(console.log("Response:",t),!t.ok)throw new Error("Network response was not ok");const n=await t.json();console.log("Data:",n.reply.choices[0].message.content);const i=n.reply.choices[0].message.content;r(JSON.parse(i))}catch(e){console.error("Error fetching variations:",e)}finally{console.log("Variations fetched:",n),a(!1)}})()}}),[l]),(0,t.useEffect)((()=>{console.log("Variations updated:",n)}),[n]);const c=e=>{const t=new Set(i);t.has(e)?t.delete(e):t.add(e),s(t)};return(0,qp.jsxs)("div",{className:"variation-selection",children:[(0,qp.jsx)("h2",{children:"Select Your Desired Recipe Variations"}),o?(0,qp.jsxs)("div",{className:"loading",children:[(0,qp.jsx)("div",{className:"spinner"}),(0,qp.jsx)("p",{children:"Loading variations..."})]}):(0,qp.jsxs)("div",{children:[(0,qp.jsx)("button",{onClick:()=>c("original"),children:"Original Recipe"}),n.filter((e=>0===Object.keys(e).filter((e=>"tagline"!==e&&"description"!==e)).reduce(((t,n)=>t+e[n]),0))).map(((e,t)=>(0,qp.jsxs)("div",{onClick:()=>c(t),style:{marginBottom:"20px",cursor:"pointer"},children:[(0,qp.jsx)("h3",{children:e.tagline}),(0,qp.jsx)("p",{children:e.description}),(0,qp.jsx)("ul",{children:Object.keys(e).filter((t=>"tagline"!==t&&"description"!==t&&0!==e[t])).map((t=>(0,qp.jsx)("li",{children:"".concat(t,": ").concat(e[t]>0?"+":"").concat(e[t])},t)))})]},t)))]}),(0,qp.jsx)("button",{onClick:()=>{console.log("Selected variations:",[...i])},disabled:2!==i.size,children:"Submit"})]})},gg=JSON.parse('[{"section":"Introduction","content":"Thank you trying Skincremental! Your feedback is crucial for us to improve and tailor our products more closely to your needs. Please take a few moments to share your thoughts with us.","type":"text"},{"section":"Product Usage","questions":[{"id":"product_frequency","question":"Roughly how many times have you used the product since you recieved it?","type":"open_text"},{"id":"overall_satisfaction_rating","question":"On a scale of 1-5, how satisfied are you with the products you received?","type":"rating","scale":5}]},{"section":"Product Experience Feedback","questions":[{"id":"can_tell_difference","question":"How easily were you able to tell the difference between the two variations?","type":"choice","options":["Very easily","Somewhat","Not much"]},{"id":"variation_preference","question":"Which product variation did you prefer, A or B?","type":"choice","options":["A","B"]},{"id":"variation_preference_why","question":"Why did you prefer that variation?","type":"open_text","optional":true}]},{"section":"Product Consistency","questions":[{"id":"consistency","question":"What do you think about your product\'s consistency/texture?  ","type":"choice","options":["Too thick","Too thin","Just right"]},{"id":"consistency_issues","question":"Have you noticed any signs of the product splitting or going bad?","type":"choice","options":["Yes","No"]},{"id":"consistency_comments","question":"Please share any thoughts about the product consistency","type":"open_text","optional":true}]},{"section":"AI Effectiveness","questions":[{"id":"ai_effectiveness_rating","question":"On a scale of 1-5, how effectively did our AI understand and address your skin concerns?","type":"rating","scale":5},{"id":"ai_effectiveness_comments","question":"Do you have any specific feedback or suggestions for our AI\'s functionality?  What would you like to see improved?","type":"open_text","optional":true}]},{"section":"Web Interface Feedback","questions":[{"id":"web_interface_improvement","question":"We\'re always looking to improve our website\'s usability. Do you have any suggestions for making our web interface more user-friendly?","type":"open_text"}]},{"section":"Pricing Feedback","questions":[{"id":"expected_price","question":"If we were to charge for our personalized skincare service, what price would you expect to pay for the experience and products you recieved?","type":"open_text"}]},{"section":"Future Orders","questions":[{"id":"repeat_order_interest","question":"Would you be interested in placing another order?","type":"choice","options":["Yes, I\'d like to evolve this recipe","Yes, but I\'d like to try a different recipe","Ask me later","No, I\'m not interested in ordering again"],"shouldAddLineBreak":true}]},{"section":"Next Order Recipe Request","content":"We are still working some kinks out of the AI integration for order variation.  We\'ll be in touch with you soon to build your next recipe.","questions":[{"id":"repeat_order_variation_amount","question":"How much do you want your variation to differ from your current preferred recipe?","type":"choice","options":["Subtle tweak","Moderate change","Significant change"],"shouldAddLineBreak":true},{"id":"repeat_order_interest_comments","question":"What are your goals for the next variations?  What qualities of your formula would you like to improve upon?","type":"open_text","optional":true}]},{"section":"General Comments","questions":[{"id":"z_closing_comments","question":"Is there anything else you\'d like to share about your experience with us?","type":"open_text","optional":true}]},{"section":"Submission","content":"Thank you for your feedback.  If you\'ve selected that you\'re interested in placing another order, we\'ll be in touch with you soon to build your next recipe, or you can build a new recipe from scratch using the homepage at your convenience.","type":"text"}]'),mg=()=>{const e=Z(),[n,r]=(0,t.useState)(0),i=gg[n],[s,o]=(0,t.useState)({}),a=X(),l=new URLSearchParams(a.search).get("orderId"),[u,c]=(0,t.useState)(""),[h,d]=(0,t.useState)({}),[f,p]=(0,t.useState)(!1),[g,m]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if(l){var e=new Date;c(e.getTime()+"-"+l)}}),[l]),(0,t.useEffect)((()=>{!1===f&&(async e=>{const t=Qf(Up,"orders",e),n=await Pp(t);n.exists()&&!f?(d(n.data()),p(!0)):console.log("No such document!")})(l)}),[l,f]),(0,t.useEffect)((()=>{!g&&f&&u&&(async()=>{if(u){const e=Qf(Up,"survey",u);await Op(e,{orderId:l,startTime:new Date,responses:{}}),m(!0)}})()}),[u,l,g,f]);const v=(e,t)=>{o({...s,[e]:t})},y=e=>{const t=s[e.id]||"";switch(e.type){case"choice":return(0,qp.jsx)("div",{children:e.options.map(((n,r)=>(0,qp.jsxs)("label",{children:[(0,qp.jsx)("input",{type:"radio",name:e.id,value:n,checked:t===n,onChange:t=>v(e.id,t.target.value)}),n,e.shouldAddLineBreak&&r!==e.options.length-1?(0,qp.jsx)("br",{}):null]},r)))});case"rating":return(0,qp.jsx)("div",{children:[...Array(e.scale).keys()].map((n=>(0,qp.jsxs)("label",{children:[(0,qp.jsx)("input",{type:"radio",name:e.id,value:n+1,checked:parseInt(t)===n+1,onChange:t=>v(e.id,t.target.value)}),n+1]},n)))});case"open_text":return(0,qp.jsx)("textarea",{name:e.id,value:t,onChange:t=>v(e.id,t.target.value),placeholder:"Your answer..."});case"yes_no":return(0,qp.jsxs)("div",{children:[(0,qp.jsxs)("label",{children:[(0,qp.jsx)("input",{type:"radio",name:e.id,value:"Yes",checked:"Yes"===t,onChange:t=>v(e.id,t.target.value)}),"Yes"]}),(0,qp.jsxs)("label",{children:[(0,qp.jsx)("input",{type:"radio",name:e.id,value:"No",checked:"No"===t,onChange:t=>v(e.id,t.target.value)}),"No"]})]});default:return null}};return(0,qp.jsx)("div",{className:"body-container survey",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:(0,qp.jsxs)("div",{style:{margin:"0 auto",textAlign:"center"},children:[(0,qp.jsx)("h2",{children:i.section}),(_=i,_.questions?_.questions.map(((e,t)=>(0,qp.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,qp.jsx)("p",{children:e.question}),y(e)]},t))):_.content?(0,qp.jsx)("p",{children:_.content}):void 0),(0,qp.jsx)("button",{onClick:async()=>{await(async()=>{const e=Qf(Up,"survey",u);await Fp(e,{responses:{...s},lastTime:new Date})})(),console.log([gg[n].section,h]),"Future Orders"===gg[n].section?"Yes, I'd like to evolve this recipe"===s.repeat_order_interest?r(n+1):r(n+2):"Product Experience Feedback"===gg[n].section&&"oil"===h.type?r(n+2):n<gg.length-1?r(n+1):e("/")},style:{marginTop:"20px"},children:n===gg.length-1?"Complete and Return Home":"Next"})]})});var _},vg=e=>{let{score:t}=e;const n=e=>{const n=Math.abs(e-5);let r="";return 5===t?5===e&&(r="highlighted"):t<5?e>=t&&e<=5&&(r="highlighted intensity-".concat(n)):t>5&&e<=t&&e>=5&&(r="highlighted intensity-".concat(n)),"segment ".concat(r)};return(0,qp.jsx)("div",{className:"score-bar",children:[...Array(9)].map(((e,t)=>(0,qp.jsx)("div",{className:n(t+1)},t)))})},yg=Jp("Before Bed Face Moisturizing Cream"),_g=()=>{const[e,n]=(0,t.useState)({key:null,direction:"ascending"}),r=(0,t.useMemo)((()=>{const t=Object.entries(yg).map((e=>{let[t,n]=e;return{name:t,...n}}));return null!==e.key&&t.sort(((t,n)=>t[e.key]<n[e.key]?"ascending"===e.direction?-1:1:t[e.key]>n[e.key]?"ascending"===e.direction?1:-1:0)),t}),[e]),i=t=>{let r="ascending";e.key===t&&"ascending"===e.direction&&(r="descending"),n({key:t,direction:r})};return(0,qp.jsx)("div",{children:(0,qp.jsxs)("table",{children:[(0,qp.jsx)("thead",{children:(0,qp.jsxs)("tr",{children:[(0,qp.jsx)("th",{onClick:()=>i("name"),children:"Ingredient Name"}),(0,qp.jsx)("th",{onClick:()=>i("phase"),children:"Phase"}),(0,qp.jsx)("th",{onClick:()=>i("cost_per_g"),children:"Cost per g"}),(0,qp.jsx)("th",{onClick:()=>i("light_heavy"),children:"Light/Heavy"}),(0,qp.jsx)("th",{onClick:()=>i("penetrating_occlusive"),children:"Penetrating/Occlusive"}),(0,qp.jsx)("th",{onClick:()=>i("soothing_stimulating"),children:"Soothing/Stimulating"}),(0,qp.jsx)("th",{onClick:()=>i("gentle_active"),children:"Gentle/Active"})]})}),(0,qp.jsx)("tbody",{children:r.map((e=>(0,qp.jsxs)("tr",{children:[(0,qp.jsx)("td",{children:e.name}),(0,qp.jsx)("td",{children:e.phase}),(0,qp.jsx)("td",{children:e.cost_per_g}),(0,qp.jsxs)("td",{children:[e.light_heavy," ",(0,qp.jsx)(vg,{score:e.light_heavy})]}),(0,qp.jsxs)("td",{children:[e.penetrating_occlusive,(0,qp.jsx)(vg,{score:e.penetrating_occlusive})]}),(0,qp.jsxs)("td",{children:[e.soothing_stimulating,(0,qp.jsx)(vg,{score:e.soothing_stimulating})]}),(0,qp.jsxs)("td",{children:[e.gentle_active,(0,qp.jsx)(vg,{score:e.gentle_active})]})]},e.name)))})]})})};const bg=function(e){let{currentPhase:t,phaseOrder:n,onNextPhase:r,onPrevPhase:i,setMode:s}=e;const o=n.indexOf(t),a=0===o,l=o===n.length-1;return(0,qp.jsxs)("div",{className:"phase-navigation-control",children:[(0,qp.jsx)("button",{onClick:i,disabled:a,children:"Previous Phase"}),(0,qp.jsx)("button",{onClick:r,disabled:l,children:"Next Phase"}),(0,qp.jsx)("button",{onClick:()=>s("review"),children:"Review"}),(0,qp.jsx)("button",{onClick:()=>s("changeIngredients"),children:"Change Ingredients"}),(0,qp.jsx)("button",{onClick:()=>s("changeProportions"),children:"Adjust Proportions"})]})};const wg=function(e){let{phaseData:t}=e;const{commentary:n,...r}=t;return(0,qp.jsxs)("div",{children:[(0,qp.jsx)("h4",{children:"Ingredients"}),(0,qp.jsx)("ul",{children:Object.entries(r).map((e=>{let[t,n]=e;return(0,qp.jsxs)("li",{children:[(0,qp.jsx)("strong",{children:t}),": ",n," Parts",(0,qp.jsx)("p",{children:Zp[t].description})]},t)}))}),(0,qp.jsx)("h4",{children:"Commentary"}),(0,qp.jsx)("p",{children:n})]})};const kg=function(e){let{ingredients:n,initialSelectedIngredients:r,updateRecipe:i,onSaveChanges:s}=e;const[o,a]=(0,t.useState)(r);return(0,qp.jsxs)("div",{children:[(0,qp.jsx)("h3",{children:"Available Ingredients:"}),(0,qp.jsx)("div",{className:"ingredients-list",children:Object.entries(n).map((e=>{let[t,n]=e;return(0,qp.jsxs)("div",{className:"ingredient-row ".concat(o[t]>0?"selected":""),onClick:()=>(e=>{const t=o[e],n={...o,[e]:t?void 0:5};Object.keys(n).forEach((e=>{void 0===n[e]&&delete n[e]})),a(n),n.commentary="Changed ingredients",i(n)})(t),children:[(0,qp.jsx)("strong",{children:t}),": ",(0,qp.jsx)("small",{children:n.description})]},t)}))}),(0,qp.jsx)("button",{onClick:()=>{s()},children:"Save Selection"})]})};const Sg=function(e){let{initialIngredients:n,updateRecipe:r,onSaveChanges:i}=e;const[s,o]=(0,t.useState)(n),[a,l]=(0,t.useState)(!1);return(0,qp.jsxs)("div",{className:"recipe-builder-container",children:[(0,qp.jsx)("h3",{children:"Adjust Proportions"}),(0,qp.jsx)("div",{className:"scrollable-content",children:Object.entries(s).map((e=>{let[t,n]=e;return(0,qp.jsx)("div",{children:(0,qp.jsxs)("label",{children:[t,": ",n.toFixed(0),(0,qp.jsx)("input",{type:"range",min:"0",max:"10",value:n,onChange:e=>((e,t)=>{const n=parseFloat(t);o((t=>{const i={...t,[e]:n};return r(i),i}))})(t,e.target.value)})]})},t)}))}),(0,qp.jsx)("button",{onClick:()=>{(async()=>{l(!0);try{const e=await fetch("https://us-central1-skincare-recipe-tool.cloudfunctions.net/getProportionSuggestion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phaseProportions:s})});if(console.log("Response:",e),!e.ok)throw new Error("Network response was not ok");const t=await e.json();console.log("Data:",t.reply.choices[0].message.content);t.reply.choices[0].message.content}catch(e){console.error("Error fetching variations:",e)}finally{l(!1)}})()},children:"Get AI Proportion Suggestion"}),(0,qp.jsx)("br",{}),(0,qp.jsx)("button",{onClick:()=>{i()},children:"Save Changes"})]})},Eg={carrier:{"Jojoba Oil":5,"Sunflower Oil":5,"Shea Butter":5,commentary:"Carrier oils serve as the base for the recipe, helping to dilute other concentrated ingredients. Jojoba Oil is chosen for its similarity to skin's natural oils, offering moisturizing properties. Sunflower Oil is rich in Vitamin E, promoting skin health. Shea Butter is included for its deep moisturizing and skin nourishing benefits."},aqueous:{"Aloe Vera Gel":5,"Distilled Water":5,commentary:"The aqueous phase adds water-based ingredients to the recipe, ensuring hydration. Aloe Vera is renowned for its soothing and healing properties, making it ideal for sensitive skin. Distilled Water serves as a pure, clean base, helping to blend the ingredients effectively."},emulsifier:{"Cetearyl Alcohol":5,commentary:"Emulsifiers are crucial for combining oil and water-based ingredients into a stable mixture. Cetearyl Alcohol, a fatty alcohol, is gentle on the skin and helps to create a creamy texture in the final product."},active:{"Niacinamide (Vitamin B3)":2,commentary:"Active ingredients target specific skin concerns. Niacinamide is chosen for its versatility; it helps to improve skin texture, brighten the complexion, and strengthen the skin barrier."},fragrance:{"Lavender Oil":1,"Geranium Oil":1,commentary:"Essential oils provide the product with natural fragrances and therapeutic benefits. Lavender Oil offers calming properties, making it ideal for use in skincare. Germanium Oil is known for its ability to reduce the appearance of wrinkles and fine lines, promoting a youthful glow."},preservative:{"AntiMicro Banana":2,commentary:"Preservatives ensure the longevity and safety of the skincare product by preventing microbial growth. AntiMicro Banana is a natural preservative option, offering effective protection against a broad spectrum of microbes."}};const xg=function(){const[e,n]=(0,t.useState)("carrier"),r=tg["Daytime Face Moisturizing Cream with SPF"].typeOrder,[i,s]=(0,t.useState)(Eg),[o,a]=(0,t.useState)("review");return(0,qp.jsxs)(Hp,{title:"Phase: "+e[0].toUpperCase()+e.slice(1),children:[(0,qp.jsx)(bg,{currentPhase:e,phaseOrder:r,onNextPhase:()=>{const t=r.indexOf(e)+1;t<r.length&&n(r[t])},onPrevPhase:()=>{const t=r.indexOf(e)-1;t>=0&&n(r[t])},setMode:a}),"review"===o&&(0,qp.jsx)(wg,{phaseData:i[e]}),"changeIngredients"===o&&(0,qp.jsx)(kg,{ingredients:(l=e,Object.keys(Xp).filter((e=>Xp[e].type===l)).reduce(((e,t)=>(e[t]=Xp[t],e)),{})),initialSelectedIngredients:i[e],updateRecipe:t=>{console.log("updatedIngredients",t),s({...i,[e]:t})},onSaveChanges:()=>a("changeProportions")}),"changeProportions"===o&&(0,qp.jsx)(Sg,{initialIngredients:(()=>{const{commentary:t,...n}=i[e];return n})(),updateRecipe:t=>{s((n=>({...n,[e]:{...n[e],...t}})))},onSaveChanges:()=>a("review")})]});var l};const Cg=function(){const[e,n]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{const e=setTimeout((()=>{n(!1)}),3e3);return()=>clearTimeout(e)}),[]),e?(0,qp.jsxs)("div",{style:{textAlign:"center"},children:[(0,qp.jsx)("div",{className:"loading-container",children:(0,qp.jsx)("div",{className:"loader"})}),"Loading..."]}):(0,qp.jsxs)(Hp,{title:"Choose Your Oil Phase",children:[(0,qp.jsxs)("div",{children:[(0,qp.jsx)("h2",{children:"Phase 1: Light Oils"}),(0,qp.jsx)("p",{children:"Ingredients: Coconut Oil, Jojoba Oil"}),(0,qp.jsx)("p",{children:"Description: Best for oily skin types, absorbs quickly without leaving a residue."}),(0,qp.jsx)("button",{children:"Choose Phase 1"})]}),(0,qp.jsxs)("div",{children:[(0,qp.jsx)("h2",{children:"Phase 2: Medium Oils"}),(0,qp.jsx)("p",{children:"Ingredients: Almond Oil, Argan Oil"}),(0,qp.jsx)("p",{children:"Description: A balanced blend that works for most skin types, providing hydration without heaviness."}),(0,qp.jsx)("button",{children:"Choose Phase 2"})]}),(0,qp.jsxs)("div",{children:[(0,qp.jsx)("h2",{children:"Phase 3: Heavy Oils"}),(0,qp.jsx)("p",{children:"Ingredients: Olive Oil, Shea Butter"}),(0,qp.jsx)("p",{children:"Description: Ideal for dry or mature skin, offering deep moisturization and protective benefits."}),(0,qp.jsx)("button",{children:"Choose Phase 3"})]})]})};function Tg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ig(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tg(Object(n),!0).forEach((function(t){Dg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ag(e){return Ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(e)}function Ng(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pg(e,t,n){return t&&Rg(e.prototype,t),n&&Rg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Og(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||Lg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fg(e){return function(e){if(Array.isArray(e))return jg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Lg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lg(e,t){if(e){if("string"==typeof e)return jg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jg(e,t):void 0}}function jg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mg(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Lg(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}var Ug={DEBUG:!1,LIB_VERSION:"1.130.2"},zg=Array.isArray,Bg=Object.prototype,Vg=Bg.hasOwnProperty,qg=Bg.toString,Hg=zg||function(e){return"[object Array]"===qg.call(e)},$g=function(e){return"function"==typeof e},Wg=function(e){return e===Object(e)&&!Hg(e)},Gg=function(e){if(Wg(e)){for(var t in e)if(Vg.call(e,t))return!1;return!0}return!1},Kg=function(e){return void 0===e},Qg=function(e){return"[object String]"==qg.call(e)},Yg=function(e){return null===e},Xg=function(e){return Kg(e)||Yg(e)},Jg=function(e){return"[object Number]"==qg.call(e)},Zg=function(e){return"[object Boolean]"===qg.call(e)},em=function(e){return e instanceof FormData},tm="undefined"!=typeof window?window:void 0,nm="undefined"!=typeof globalThis?globalThis:tm,rm=Array.prototype,im=rm.forEach,sm=rm.indexOf,om=null==nm?void 0:nm.navigator,am=null==nm?void 0:nm.document,lm=null==nm?void 0:nm.location,um=null==nm?void 0:nm.fetch,cm=null!=nm&&nm.XMLHttpRequest&&"withCredentials"in new nm.XMLHttpRequest?nm.XMLHttpRequest:void 0,hm=null==nm?void 0:nm.AbortController,dm=null==om?void 0:om.userAgent,fm=null!=tm?tm:{},pm="[PostHog.js]",gm={_log:function(e){if(tm&&(Ug.DEBUG||fm.POSTHOG_DEBUG)&&!Kg(tm.console)&&tm.console){for(var t=("__rrweb_original__"in tm.console[e]?tm.console[e].__rrweb_original__:tm.console[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.apply(void 0,[pm].concat(r))}},info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];gm._log.apply(gm,["log"].concat(t))},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];gm._log.apply(gm,["warn"].concat(t))},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];gm._log.apply(gm,["error"].concat(t))},critical:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,[pm].concat(n))},uninitializedWarning:function(e){gm.error("You must initialize PostHog before calling ".concat(e))}},mm={},vm=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function ym(e,t,n){if(Hg(e))if(im&&e.forEach===im)e.forEach(t,n);else if("length"in e&&e.length===+e.length)for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===mm)return}function _m(e,t,n){if(!Xg(e)){if(Hg(e))return ym(e,t,n);if(em(e)){var r,i=Mg(e.entries());try{for(i.s();!(r=i.n()).done;){var s=r.value;if(t.call(n,s[1],s[0])===mm)return}}catch(e){i.e(e)}finally{i.f()}}else for(var o in e)if(Vg.call(e,o)&&t.call(n,e[o],o)===mm)return}}var bm=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ym(n,(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])})),e};function wm(e,t){return-1!==e.indexOf(t)}function km(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}var Sm=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},Em=function(e){try{return e()}catch(e){return}},xm=function(e){return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}catch(e){gm.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),gm.critical(e)}}},Cm=function(e){var t={};return _m(e,(function(e,n){Qg(e)&&e.length>0&&(t[n]=e)})),t};var Tm,Im=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(t,n,r,i,s){if(t)if(t.addEventListener&&!i)t.addEventListener(n,r,!!s);else{var o="on"+n,a=t[o];t[o]=function(t,n,r){return function(i){if(i=i||e(null==tm?void 0:tm.event)){var s,o=!0;$g(r)&&(s=r(i));var a=n.call(t,i);return!1!==s&&!1!==a||(o=!1),o}}}(t,r,a)}else gm.error("No valid element provided to register_event")}}();function Am(e,t){var n=function(){if(!am)return t("document not found");var n=am.createElement("script");n.type="text/javascript",n.src=e,n.onload=function(e){return t(void 0,e)},n.onerror=function(e){return t(e)};var r,i=am.querySelectorAll("body > script");i.length>0?null===(r=i[0].parentNode)||void 0===r||r.insertBefore(n,i[0]):am.body.appendChild(n)};null!=am&&am.body?n():null==am||am.addEventListener("DOMContentLoaded",n)}!function(e){e.GZipJS="gzip-js",e.Base64="base64"}(Tm||(Tm={}));var Nm="$people_distinct_id",Rm="__alias",Pm="__timers",Dm="$autocapture_disabled_server_side",Om="$heatmaps_enabled_server_side",Fm="$session_recording_enabled_server_side",Lm="$console_log_recording_enabled_server_side",jm="$session_recording_network_payload_capture",Mm="$session_recording_canvas_recording",Um="$replay_sample_rate",zm="$replay_minimum_duration",Bm="$sesid",Vm="$session_is_sampled",qm="$enabled_feature_flags",Hm="$early_access_features",$m="$stored_person_properties",Wm="$stored_group_properties",Gm="$surveys",Km="$flag_call_reported",Qm="$user_state",Ym="$client_session_props",Xm="$capture_rate_limit",Jm="$initial_campaign_params",Zm="$initial_referrer_info",ev="$epp",tv=[Nm,Rm,"__cmpns",Pm,Fm,Om,Bm,qm,Qm,Hm,Wm,$m,Gm,Km,Ym,Xm,Jm,Zm,ev],nv="$active_feature_flags",rv="$override_feature_flags",iv="$feature_flag_payloads",sv=function(e){var t,n={},r=Mg(km(e||{}));try{for(r.s();!(t=r.n()).done;){var i=Og(t.value,2),s=i[0],o=i[1];o&&(n[s]=o)}}catch(e){r.e(e)}finally{r.f()}return n},ov=function(){function e(t){Ng(this,e),this.instance=t,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return Pg(e,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var e=this.instance.get_property(qm),t=this.instance.get_property(rv);if(!t)return e||{};for(var n=bm({},e),r=Object.keys(t),i=0;i<r.length;i++)n[r[i]]=t[r[i]];return this._override_warning||(gm.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:n}),this._override_warning=!0),n}},{key:"getFlagPayloads",value:function(){return this.instance.get_property(iv)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(e){this.$anon_distinct_id=e}},{key:"setReloadingPaused",value:function(e){this.reloadFeatureFlagsInAction=e}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var e=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout((function(){!e.reloadFeatureFlagsInAction&&e.reloadFeatureFlagsQueued&&(e.reloadFeatureFlagsQueued=!1,e._reloadFeatureFlagsRequest())}),5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var e=this;if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var t=this.instance.config.token,n=this.instance.get_property($m),r=this.instance.get_property(Wm),i={token:t,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:n,group_properties:r,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:i,compression:this.instance.config.disable_compression?void 0:Tm.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:function(t){var n;e.setReloadingPaused(!1);var r=!0;200===t.statusCode&&(e.$anon_distinct_id=void 0,r=!1),e.receivedFeatureFlags(null!==(n=t.json)&&void 0!==n?n:{},r),e._startReloadTimer()}})}}},{key:"getFeatureFlag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var n,r=this.getFlagVariants()[e],i="".concat(r),s=this.instance.get_property(Km)||{};return!t.send_event&&"send_event"in t||e in s&&s[e].includes(i)||(Hg(s[e])?s[e].push(i):s[e]=[i],null===(n=this.instance.persistence)||void 0===n||n.register(Dg({},Km,s)),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:r})),r}gm.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.")}},{key:"getFeatureFlagPayload",value:function(e){return this.getFlagPayloads()[e]}},{key:"isFeatureEnabled",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,t);gm.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}},{key:"addFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers.push(e)}},{key:"removeFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((function(t){return t!==e}))}},{key:"receivedFeatureFlags",value:function(e,t){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var n=this.getFlagVariants(),r=this.getFlagPayloads();!function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=e.featureFlags,o=e.featureFlagPayloads;if(s)if(Hg(s)){var a,l={};if(s)for(var u=0;u<s.length;u++)l[s[u]]=!0;t&&t.register((Dg(a={},nv,s),Dg(a,qm,l),a))}else{var c=s,h=o;e.errorsWhileComputingFlags&&(c=Ig(Ig({},r),c),h=Ig(Ig({},i),h)),t&&t.register((Dg(n={},nv,Object.keys(sv(c))),Dg(n,qm,c||{}),Dg(n,iv,h||{}),n))}}(e,this.instance.persistence,n,r),this._fireFeatureFlagsCallbacks(t)}}},{key:"override",value:function(e){if(!this.instance.__loaded||!this.instance.persistence)return gm.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=!1,!1===e)this.instance.persistence.unregister(rv);else if(Hg(e)){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;this.instance.persistence.register(Dg({},rv,t))}else this.instance.persistence.register(Dg({},rv,e))}},{key:"onFeatureFlags",value:function(e){var t=this;if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var n=this._prepareFeatureFlagsForCallbacks(),r=n.flags,i=n.flagVariants;e(r,i)}return function(){return t.removeFeatureFlagsHandler(e)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,t){var n,r,i=Dg({},"$feature_enrollment/".concat(e),t);this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:t,$set:i}),this.setPersonPropertiesForFlags(i,!1);var s=Ig(Ig({},this.getFlagVariants()),{},Dg({},e,t));null===(n=this.instance.persistence)||void 0===n||n.register((Dg(r={},nv,Object.keys(sv(s))),Dg(r,qm,s),r)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.instance.get_property(Hm);if(r&&!n)return e(r);this.instance._send_request({transport:"XHR",url:this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),method:"GET",callback:function(n){var r;if(n.json){var i=n.json.earlyAccessFeatures;return null===(r=t.instance.persistence)||void 0===r||r.register(Dg({},Hm,i)),e(i)}}})}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter((function(e){return t[e]})),flagVariants:Object.keys(t).filter((function(e){return t[e]})).reduce((function(e,n){return e[n]=t[n],e}),{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(e){var t=this._prepareFeatureFlagsForCallbacks(),n=t.flags,r=t.flagVariants;this.featureFlagEventHandlers.forEach((function(t){return t(n,r,{errorsLoading:e})}))}},{key:"setPersonPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.instance.get_property($m)||{};this.instance.register(Dg({},$m,Ig(Ig({},n),e))),t&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister($m)}},{key:"setGroupPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.instance.get_property(Wm)||{};0!==Object.keys(n).length&&Object.keys(n).forEach((function(t){n[t]=Ig(Ig({},n[t]),e[t]),delete e[t]})),this.instance.register(Dg({},Wm,Ig(Ig({},n),e))),t&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(e){if(e){var t=this.instance.get_property(Wm)||{};this.instance.register(Dg({},Wm,Ig(Ig({},t),{},Dg({},e,{}))))}else this.instance.unregister(Wm)}}]),e}();Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return Jg(e)&&isFinite(e)&&Math.floor(e)===e});var av="0123456789abcdef",lv=function(){function e(t){if(Ng(this,e),this.bytes=t,16!==t.length)throw new TypeError("not 128-bit length")}return Pg(e,[{key:"toString",value:function(){for(var e="",t=0;t<this.bytes.length;t++)e=e+av.charAt(this.bytes[t]>>>4)+av.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw new Error("Invalid UUIDv7 was generated");return e}},{key:"clone",value:function(){return new e(this.bytes.slice(0))}},{key:"equals",value:function(e){return 0===this.compareTo(e)}},{key:"compareTo",value:function(e){for(var t=0;t<16;t++){var n=this.bytes[t]-e.bytes[t];if(0!==n)return Math.sign(n)}return 0}}],[{key:"fromFieldsV7",value:function(t,n,r,i){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||t<0||n<0||r<0||i<0||t>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=t/Math.pow(2,40),s[1]=t/Math.pow(2,32),s[2]=t/Math.pow(2,24),s[3]=t/Math.pow(2,16),s[4]=t/Math.pow(2,8),s[5]=t,s[6]=112|n>>>8,s[7]=n,s[8]=128|r>>>24,s[9]=r>>>16,s[10]=r>>>8,s[11]=r,s[12]=i>>>24,s[13]=i>>>16,s[14]=i>>>8,s[15]=i,new e(s)}}]),e}(),uv=function(){function e(){Ng(this,e),Dg(this,"timestamp",0),Dg(this,"counter",0),Dg(this,"random",new dv)}return Pg(e,[{key:"generate",value:function(){var e=this.generateOrAbort();if(Kg(e)){this.timestamp=0;var t=this.generateOrAbort();if(Kg(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}},{key:"generateOrAbort",value:function(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return lv.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),e}(),cv=function(e){if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};tm&&!Kg(tm.crypto)&&crypto.getRandomValues&&(cv=function(e){return crypto.getRandomValues(e)});var hv,dv=function(){function e(){Ng(this,e),Dg(this,"buffer",new Uint32Array(8)),Dg(this,"cursor",1/0)}return Pg(e,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&(cv(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),e}(),fv=function(){return pv().toString()},pv=function(){return(hv||(hv=new uv)).generate()},gv="",mv=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;var vv,yv={is_supported:function(){return!!am},error:function(e){gm.error("cookieStore error: "+e)},get:function(e){if(am){try{for(var t=e+"=",n=am.cookie.split(";").filter((function(e){return e.length})),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}}catch(e){}return null}},parse:function(e){var t;try{t=JSON.parse(yv.get(e))||{}}catch(e){}return t},set:function(e,t,n,r,i){if(am)try{var s="",o="",a=function(e,t){if(t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:am;if(gv)return gv;if(!t)return"";if(["localhost","127.0.0.1"].includes(e))return"";for(var n=e.split("."),r=Math.min(n.length,8),i="dmn_chk_"+fv(),s=new RegExp("(^|;)\\s*"+i+"=1");!gv&&r--;){var o=n.slice(r).join("."),a=i+"=1;domain=."+o;t.cookie=a,s.test(t.cookie)&&(t.cookie=a+";expires=Thu, 01 Jan 1970 00:00:00 GMT",gv=o)}return gv}(e);if(!n){var r=function(e){var t=e.match(mv);return t?t[0]:""}(e);r!==n&&gm.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}(am.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}i&&(o="; secure");var u=e+"="+encodeURIComponent(JSON.stringify(t))+s+"; SameSite=Lax; path=/"+a+o;return u.length>3686.4&&gm.warn("cookieStore warning: large cookie, len="+u.length),am.cookie=u,u}catch(e){return}},remove:function(e,t){try{yv.set(e,"",-1,t)}catch(e){return}}},_v=null,bv={is_supported:function(){if(!Yg(_v))return _v;var e=!0;if(Kg(tm))e=!1;else try{var t="__mplssupport__";bv.set(t,"xyz"),'"xyz"'!==bv.get(t)&&(e=!1),bv.remove(t)}catch(t){e=!1}return e||gm.error("localStorage unsupported; falling back to cookie store"),_v=e,e},error:function(e){gm.error("localStorage error: "+e)},get:function(e){try{return null==tm?void 0:tm.localStorage.getItem(e)}catch(e){bv.error(e)}return null},parse:function(e){try{return JSON.parse(bv.get(e))||{}}catch(e){}return null},set:function(e,t){try{null==tm||tm.localStorage.setItem(e,JSON.stringify(t))}catch(e){bv.error(e)}},remove:function(e){try{null==tm||tm.localStorage.removeItem(e)}catch(e){bv.error(e)}}},wv=["distinct_id",Bm,Vm,ev],kv=Ig(Ig({},bv),{},{parse:function(e){try{var t={};try{t=yv.parse(e)||{}}catch(e){}var n=bm(t,JSON.parse(bv.get(e)||"{}"));return bv.set(e,n),n}catch(e){}return null},set:function(e,t,n,r,i){try{bv.set(e,t);var s={};wv.forEach((function(e){t[e]&&(s[e]=t[e])})),Object.keys(s).length&&yv.set(e,s,n,r,i)}catch(e){bv.error(e)}},remove:function(e,t){try{null==tm||tm.localStorage.removeItem(e),yv.remove(e,t)}catch(e){bv.error(e)}}}),Sv={},Ev={is_supported:function(){return!0},error:function(e){gm.error("memoryStorage error: "+e)},get:function(e){return Sv[e]||null},parse:function(e){return Sv[e]||null},set:function(e,t){Sv[e]=t},remove:function(e){delete Sv[e]}},xv=null,Cv={is_supported:function(){if(!Yg(xv))return xv;if(xv=!0,Kg(tm))xv=!1;else try{var e="__support__";Cv.set(e,"xyz"),'"xyz"'!==Cv.get(e)&&(xv=!1),Cv.remove(e)}catch(e){xv=!1}return xv},error:function(e){gm.error("sessionStorage error: ",e)},get:function(e){try{return null==tm?void 0:tm.sessionStorage.getItem(e)}catch(e){Cv.error(e)}return null},parse:function(e){try{return JSON.parse(Cv.get(e))||null}catch(e){}return null},set:function(e,t){try{null==tm||tm.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){Cv.error(e)}},remove:function(e){try{null==tm||tm.sessionStorage.removeItem(e)}catch(e){Cv.error(e)}}},Tv=["localhost","127.0.0.1"],Iv=function(e){var t=null==am?void 0:am.createElement("a");return Kg(t)?null:(t.href=e,t)},Av=function(e,t){for(var n,r=((e.split("#")[0]||"").split("?")[1]||"").split("&"),i=0;i<r.length;i++){var s=r[i].split("=");if(s[0]===t){n=s;break}}if(!Hg(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch(e){gm.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Nv=function(e,t){var n=e.match(new RegExp(t+"=([^&]*)"));return n?n[1]:null},Rv="Mobile",Pv="iOS",Dv="Android",Ov="Tablet",Fv=Dv+" "+Ov,Lv="iPad",jv="Apple",Mv=jv+" Watch",Uv="Safari",zv="BlackBerry",Bv="Samsung",Vv=Bv+"Browser",qv=Bv+" Internet",Hv="Chrome",$v=Hv+" OS",Wv=Hv+" "+Pv,Gv="Internet Explorer",Kv=Gv+" "+Rv,Qv="Opera",Yv=Qv+" Mini",Xv="Edge",Jv="Microsoft "+Xv,Zv="Firefox",ey=Zv+" "+Pv,ty="Nintendo",ny="PlayStation",ry="Xbox",iy=Dv+" "+Rv,sy=Rv+" "+Uv,oy="Windows",ay=oy+" Phone",ly="Nokia",uy="Ouya",cy="Generic",hy=cy+" "+Rv.toLowerCase(),dy=cy+" "+Ov.toLowerCase(),fy="Konqueror",py="(\\d+(\\.\\d+)?)",gy=new RegExp("Version/"+py),my=new RegExp(ry,"i"),vy=new RegExp(ny+" \\w+","i"),yy=new RegExp(ty+" \\w+","i"),_y=new RegExp(zv+"|PlayBook|BB10","i"),by={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},wy=function(e,t){return t=t||"",wm(e," OPR/")&&wm(e,"Mini")?Yv:wm(e," OPR/")?Qv:_y.test(e)?zv:wm(e,"IE"+Rv)||wm(e,"WPDesktop")?Kv:wm(e,Vv)?qv:wm(e,Xv)||wm(e,"Edg/")?Jv:wm(e,"FBIOS")?"Facebook "+Rv:wm(e,Hv)?Hv:wm(e,"CriOS")?Wv:wm(e,"UCWEB")||wm(e,"UCBrowser")?"UC Browser":wm(e,"FxiOS")?ey:wm(e,Dv)?iy:wm(e.toLowerCase(),fy.toLowerCase())?fy:function(e,t){return t&&wm(t,jv)||function(e){return wm(e,Uv)&&!wm(e,Hv)&&!wm(e,Dv)}(e)}(e,t)?wm(e,Rv)?sy:Uv:wm(e,Zv)?Zv:wm(e,"MSIE")||wm(e,"Trident/")?Gv:wm(e,"Gecko")?Zv:""},ky=(Dg(vv={},Kv,[new RegExp("rv:"+py)]),Dg(vv,Jv,[new RegExp(Xv+"?\\/"+py)]),Dg(vv,Hv,[new RegExp(Hv+"/"+py)]),Dg(vv,Wv,[new RegExp("CriOS\\/"+py)]),Dg(vv,"UC Browser",[new RegExp("(UCBrowser|UCWEB)\\/"+py)]),Dg(vv,Uv,[gy]),Dg(vv,sy,[gy]),Dg(vv,Qv,[new RegExp("(Opera|OPR)\\/"+py)]),Dg(vv,Zv,[new RegExp(Zv+"\\/"+py)]),Dg(vv,ey,[new RegExp("FxiOS\\/"+py)]),Dg(vv,fy,[new RegExp("Konqueror[:/]?"+py,"i")]),Dg(vv,zv,[new RegExp(zv+" "+py),gy]),Dg(vv,iy,[new RegExp("android\\s"+py)]),Dg(vv,qv,[new RegExp(Vv+"\\/"+py)]),Dg(vv,Gv,[new RegExp("(rv:|MSIE )"+py)]),Dg(vv,"Mozilla",[new RegExp("rv:"+py)]),vv),Sy=[[new RegExp(ry+"; "+ry+" (.*?)[);]","i"),function(e){return[ry,e&&e[1]||""]}],[new RegExp(ty,"i"),[ty,""]],[new RegExp(ny,"i"),[ny,""]],[_y,[zv,""]],[new RegExp(oy,"i"),function(e,t){if(/Phone/.test(t)||/WPDesktop/.test(t))return[ay,""];if(new RegExp(Rv).test(t)&&!/IEMobile\b/.test(t))return[oy+" "+Rv,""];var n=/Windows NT ([0-9.]+)/i.exec(t);if(n&&n[1]){var r=n[1],i=by[r]||"";return/arm/i.test(t)&&(i="RT"),[oy,i]}return[oy,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,function(e){if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[Pv,t.join(".")]}return[Pv,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,function(e){var t="";return e&&e.length>=3&&(t=Kg(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+Dv+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Dv+")","i"),function(e){if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[Dv,t.join(".")]}return[Dv,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,function(e){var t=["Mac OS X",""];if(e&&e[1]){var n=[e[1],e[2],e[3]||"0"];t[1]=n.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[$v,""]],[/Linux|debian/i,["Linux",""]]],Ey=function(e){return yy.test(e)?ty:vy.test(e)?ny:my.test(e)?ry:new RegExp(uy,"i").test(e)?uy:new RegExp("("+ay+"|WPDesktop)","i").test(e)?ay:/iPad/.test(e)?Lv:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?Mv:_y.test(e)?zv:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(ly,"i").test(e)?ly:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(Rv).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?Dv:Fv:Dv:new RegExp("(pda|"+Rv+")","i").test(e)?hy:new RegExp(Ov,"i").test(e)&&!new RegExp(Ov+" pc","i").test(e)?dy:""},xy="https?://(.*)",Cy=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid"],Ty={campaignParams:function(e){var t=Cy.concat(e||[]),n={};return _m(t,(function(e){var t=am?Av(am.URL,e):"";t.length&&(n[e]=t)})),n},searchEngine:function(){var e=null==am?void 0:am.referrer;return e?0===e.search(xy+"google.([^/?]*)")?"google":0===e.search(xy+"bing.com")?"bing":0===e.search(xy+"yahoo.com")?"yahoo":0===e.search(xy+"duckduckgo.com")?"duckduckgo":null:null},searchInfo:function(){var e=Ty.searchEngine(),t="yahoo"!=e?"q":"p",n={};if(!Yg(e)){n.$search_engine=e;var r=am?Av(am.referrer,t):"";r.length&&(n.ph_keyword=r)}return n},browser:wy,browserVersion:function(e,t){var n=wy(e,t),r=ky[n];if(Kg(r))return null;for(var i=0;i<r.length;i++){var s=r[i],o=e.match(s);if(o)return parseFloat(o[o.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(e){for(var t=0;t<Sy.length;t++){var n=Og(Sy[t],2),r=n[0],i=n[1],s=r.exec(e),o=s&&($g(i)?i(s,e):i);if(o)return o}return["",""]},device:Ey,deviceType:function(e){var t=Ey(e);return t===Lv||t===Fv||"Kobo"===t||"Kindle Fire"===t||t===dy?Ov:t===ty||t===ry||t===ny||t===uy?"Console":t===Mv?"Wearable":t?Rv:"Desktop"},referrer:function(){return(null==am?void 0:am.referrer)||"$direct"},referringDomain:function(){var e;return null!=am&&am.referrer&&(null===(e=Iv(am.referrer))||void 0===e?void 0:e.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},properties:function(){if(!dm)return{};var e=Og(Ty.os(dm),2),t=e[0],n=e[1];return bm(Cm({$os:t,$os_version:n,$browser:Ty.browser(dm,navigator.vendor),$device:Ty.device(dm),$device_type:Ty.deviceType(dm)}),{$current_url:null==lm?void 0:lm.href,$host:null==lm?void 0:lm.host,$pathname:null==lm?void 0:lm.pathname,$raw_user_agent:dm.length>1e3?dm.substring(0,997)+"...":dm,$browser_version:Ty.browserVersion(dm,navigator.vendor),$browser_language:Ty.browserLanguage(),$screen_height:null==tm?void 0:tm.screen.height,$screen_width:null==tm?void 0:tm.screen.width,$viewport_height:null==tm?void 0:tm.innerHeight,$viewport_width:null==tm?void 0:tm.innerWidth,$lib:"web",$lib_version:Ug.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Sm()/1e3})},people_properties:function(){if(!dm)return{};var e=Og(Ty.os(dm),2),t=e[0],n=e[1];return bm(Cm({$os:t,$os_version:n,$browser:Ty.browser(dm,navigator.vendor)}),{$browser_version:Ty.browserVersion(dm,navigator.vendor)})}},Iy=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],Ay=function(){function e(t){Ng(this,e),this.config=t,this.props={},this.campaign_params_saved=!1,this.name=function(e){var t="";return e.token&&(t=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),e.persistence_name?"ph_"+e.persistence_name:"ph_"+t+"_posthog"}(t),this.storage=this.buildStorage(t),this.load(),this.update_config(t,t),this.save()}return Pg(e,[{key:"buildStorage",value:function(e){-1===Iy.indexOf(e.persistence.toLowerCase())&&(gm.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=e.persistence.toLowerCase();return"localstorage"===t&&bv.is_supported()?bv:"localstorage+cookie"===t&&kv.is_supported()?kv:"sessionstorage"===t&&Cv.is_supported()?Cv:"memory"===t?Ev:"cookie"===t?yv:kv.is_supported()?kv:yv}},{key:"properties",value:function(){var e={};return _m(this.props,(function(t,n){if(n===qm&&Wg(t))for(var r=Object.keys(t),i=0;i<r.length;i++)e["$feature/".concat(r[i])]=t[r[i]];else o=n,a=!1,(Yg(s=tv)?a:sm&&s.indexOf===sm?-1!=s.indexOf(o):(_m(s,(function(e){if(a||(a=e===o))return mm})),a))||(e[n]=t);var s,o,a})),e}},{key:"load",value:function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=bm({},e))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(e,t,n){var r=this;if(Wg(e)){Kg(t)&&(t="None"),this.expire_days=Kg(n)?this.default_expiry:n;var i=!1;if(_m(e,(function(e,n){r.props.hasOwnProperty(n)&&r.props[n]!==t||(r.props[n]=e,i=!0)})),i)return this.save(),!0}return!1}},{key:"register",value:function(e,t){var n=this;if(Wg(e)){this.expire_days=Kg(t)?this.default_expiry:t;var r=!1;if(_m(e,(function(t,i){e.hasOwnProperty(i)&&n.props[i]!==t&&(n.props[i]=t,r=!0)})),r)return this.save(),!0}return!1}},{key:"unregister",value:function(e){e in this.props&&(delete this.props[e],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(Ty.campaignParams(this.config.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"set_initial_campaign_params",value:function(){this.register_once(Dg({},Jm,Ty.campaignParams(this.config.custom_campaign_params)),void 0)}},{key:"update_search_keyword",value:function(){this.register(Ty.searchInfo())}},{key:"update_referrer_info",value:function(){this.register(Ty.referrerInfo())}},{key:"set_initial_referrer_info",value:function(){this.register_once(Dg({},Zm,Ty.referrerInfo()),void 0)}},{key:"get_referrer_info",value:function(){return Cm({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"get_initial_props",value:function(){var e=this,t={};return _m([Zm,Jm],(function(n){var r=e.props[n];r&&_m(r,(function(e,n){var r;t["$initial_"+(r=n,r.replace(/^\$/,""))]=e}))})),t}},{key:"safe_merge",value:function(e){return _m(this.props,(function(t,n){n in e||(e[n]=t)})),e}},{key:"update_config",value:function(e,t){if(this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){var n=this.buildStorage(e),r=this.props;this.clear(),this.storage=n,this.props=r,this.save()}}},{key:"set_disabled",value:function(e){this.disabled=e,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}},{key:"set_event_timer",value:function(e,t){var n=this.props[Pm]||{};n[e]=t,this.props[Pm]=n,this.save()}},{key:"remove_event_timer",value:function(e){var t=(this.props[Pm]||{})[e];return Kg(t)||(delete this.props[Pm][e],this.save()),t}},{key:"get_property",value:function(e){return this.props[e]}},{key:"set_property",value:function(e,t){this.props[e]=t,this.save()}}]),e}(),Ny=2,Ry=4,Py=Pg((function e(t){var n,r,i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ng(this,e),Dg(this,"bucketSize",100),Dg(this,"refillRate",10),Dg(this,"mutationBuckets",{}),Dg(this,"loggedTracker",{}),Dg(this,"refillBuckets",(function(){Object.keys(i.mutationBuckets).forEach((function(e){i.mutationBuckets[e]=i.mutationBuckets[e]+i.refillRate,i.mutationBuckets[e]>=i.bucketSize&&delete i.mutationBuckets[e]}))})),Dg(this,"getNodeOrRelevantParent",(function(e){var t=i.rrweb.mirror.getNode(e);if("svg"!==(null==t?void 0:t.nodeName)&&t instanceof Element){var n=t.closest("svg");if(n)return[i.rrweb.mirror.getId(n),n]}return[e,t]})),Dg(this,"numberOfChanges",(function(e){var t,n,r,i,s,o,a,l;return(null!==(t=null===(n=e.removes)||void 0===n?void 0:n.length)&&void 0!==t?t:0)+(null!==(r=null===(i=e.attributes)||void 0===i?void 0:i.length)&&void 0!==r?r:0)+(null!==(s=null===(o=e.texts)||void 0===o?void 0:o.length)&&void 0!==s?s:0)+(null!==(a=null===(l=e.adds)||void 0===l?void 0:l.length)&&void 0!==a?a:0)})),Dg(this,"throttleMutations",(function(e){if(3!==e.type||0!==e.data.source)return e;var t=e.data,n=i.numberOfChanges(t);t.attributes&&(t.attributes=t.attributes.filter((function(e){var t,n,r,s=Og(i.getNodeOrRelevantParent(e.id),2),o=s[0],a=s[1];return 0!==i.mutationBuckets[o]&&(i.mutationBuckets[o]=null!==(t=i.mutationBuckets[o])&&void 0!==t?t:i.bucketSize,i.mutationBuckets[o]=Math.max(i.mutationBuckets[o]-1,0),0===i.mutationBuckets[o]&&(i.loggedTracker[o]||(i.loggedTracker[o]=!0,null===(n=(r=i.options).onBlockedNode)||void 0===n||n.call(r,o,a))),e)})));var r=i.numberOfChanges(t);return 0!==r||n===r?e:void 0})),this.rrweb=t,this.options=s,this.refillRate=null!==(n=this.options.refillRate)&&void 0!==n?n:this.refillRate,this.bucketSize=null!==(r=this.options.bucketSize)&&void 0!==r?r:this.bucketSize,setInterval((function(){i.refillBuckets()}),1e3)})),Dy=function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e}(Dy||{});function Oy(e){return e?vm(e).split(/\s+/):[]}function Fy(e){var t="";switch(Ag(e.className)){case"string":t=e.className;break;case"object":t=("baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return Oy(t)}function Ly(e){return Xg(e)?null:vm(e).split(/(\s+)/).filter((function(e){return Zy(e)})).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function jy(e){var t="";return $y(e)&&!Wy(e)&&e.childNodes&&e.childNodes.length&&_m(e.childNodes,(function(e){var n;zy(e)&&e.textContent&&(t+=null!==(n=Ly(e.textContent))&&void 0!==n?n:"")})),vm(t)}function My(e){return!!e&&1===e.nodeType}function Uy(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function zy(e){return!!e&&3===e.nodeType}function By(e){return!!e&&11===e.nodeType}var Vy=["a","button","form","input","select","textarea","label"];function qy(e){var t=e.parentNode;return!(!t||!My(t))&&t}function Hy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!tm||!e||Uy(e,"html")||!My(e))return!1;if(null!=n&&n.url_allowlist){var s=tm.location.href,o=n.url_allowlist;if(o&&!o.some((function(e){return s.match(e)})))return!1}if(null!=n&&n.dom_event_allowlist){var a=n.dom_event_allowlist;if(a&&!a.some((function(e){return t.type===e})))return!1}for(var l=!1,u=[e],c=!0,h=e;h.parentNode&&!Uy(h,"body");)if(By(h.parentNode))u.push(h.parentNode.host),h=h.parentNode.host;else{if(!(c=qy(h)))break;if(r||Vy.indexOf(c.tagName.toLowerCase())>-1)l=!0;else{var d=tm.getComputedStyle(c);d&&"pointer"===d.getPropertyValue("cursor")&&(l=!0)}u.push(c),h=c}if(!function(e,t){var n=null==t?void 0:t.element_allowlist;if(Kg(n))return!0;var r,i=Mg(e);try{var s=function(){var e=r.value;if(n.some((function(t){return e.tagName.toLowerCase()===t})))return{v:!0}};for(i.s();!(r=i.n()).done;){var o=s();if("object"===Ag(o))return o.v}}catch(e){i.e(e)}finally{i.f()}return!1}(u,n))return!1;if(!function(e,t){var n=null==t?void 0:t.css_selector_allowlist;if(Kg(n))return!0;var r,i=Mg(e);try{var s=function(){var e=r.value;if(n.some((function(t){return e.matches(t)})))return{v:!0}};for(i.s();!(r=i.n()).done;){var o=s();if("object"===Ag(o))return o.v}}catch(e){i.e(e)}finally{i.f()}return!1}(u,n))return!1;var f=tm.getComputedStyle(e);if(f&&"pointer"===f.getPropertyValue("cursor")&&"click"===t.type)return!0;var p=e.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return(i||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(t.type)>=0;default:return l?(i||["click"]).indexOf(t.type)>=0:(i||["click"]).indexOf(t.type)>=0&&(Vy.indexOf(p)>-1||"true"===e.getAttribute("contenteditable"))}}function $y(e){for(var t=e;t.parentNode&&!Uy(t,"body");t=t.parentNode){var n=Fy(t);if(wm(n,"ph-sensitive")||wm(n,"ph-no-capture"))return!1}if(wm(Fy(e),"ph-include"))return!0;var r=e.type||"";if(Qg(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";return!Qg(i)||!/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,""))}function Wy(e){return!!(Uy(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||Uy(e,"select")||Uy(e,"textarea")||"true"===e.getAttribute("contenteditable"))}var Gy="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",Ky=new RegExp("^(?:".concat(Gy,")$")),Qy=new RegExp(Gy),Yy="\\d{3}-?\\d{2}-?\\d{4}",Xy=new RegExp("^(".concat(Yy,")$")),Jy=new RegExp("(".concat(Yy,")"));function Zy(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Xg(e))return!1;if(Qg(e)){if(e=vm(e),(t?Ky:Qy).test((e||"").replace(/[- ]/g,"")))return!1;if((t?Xy:Jy).test(e))return!1}return!0}function e_(e){var t=jy(e);return Zy(t="".concat(t," ").concat(t_(e)).trim())?t:""}function t_(e){var t="";return e&&e.childNodes&&e.childNodes.length&&_m(e.childNodes,(function(e){var n;if(e&&"span"===(null===(n=e.tagName)||void 0===n?void 0:n.toLowerCase()))try{var r=jy(e);t="".concat(t," ").concat(r).trim(),e.childNodes&&e.childNodes.length&&(t="".concat(t," ").concat(t_(e)).trim())}catch(e){gm.error(e)}})),t}function n_(e){return function(e){var t=e.map((function(e){var t,n,r="";if(e.tag_name&&(r+=e.tag_name),e.attr_class){e.attr_class.sort();var i,s=Mg(e.attr_class);try{for(s.s();!(i=s.n()).done;){var o=i.value;r+=".".concat(o.replace(/"/g,""))}}catch(e){s.e(e)}finally{s.f()}}var a=Ig(Ig(Ig(Ig({},e.text?{text:e.text}:{}),{},{"nth-child":null!==(t=e.nth_child)&&void 0!==t?t:0,"nth-of-type":null!==(n=e.nth_of_type)&&void 0!==n?n:0},e.href?{href:e.href}:{}),e.attr_id?{attr_id:e.attr_id}:{}),e.attributes),l={};return km(a).sort((function(e,t){var n=Og(e,1)[0],r=Og(t,1)[0];return n.localeCompare(r)})).forEach((function(e){var t=Og(e,2),n=t[0],r=t[1];return l[r_(n.toString())]=r_(r.toString())})),(r+=":")+km(a).map((function(e){var t=Og(e,2),n=t[0],r=t[1];return"".concat(n,'="').concat(r,'"')})).join("")}));return t.join(";")}(function(e){return e.map((function(e){var t,n,r={text:null===(t=e.$el_text)||void 0===t?void 0:t.slice(0,400),tag_name:e.tag_name,href:null===(n=e.attr__href)||void 0===n?void 0:n.slice(0,2048),attr_class:i_(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return km(e).filter((function(e){return 0===Og(e,1)[0].indexOf("attr__")})).forEach((function(e){var t=Og(e,2),n=t[0],i=t[1];return r.attributes[n]=i})),r}))}(e))}function r_(e){return e.replace(/"|\\"/g,'\\"')}function i_(e){var t=e.attr__class;return t?Hg(t)?t:Oy(t):void 0}var s_="[SessionRecording]",o_={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(e){return e},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6},a_=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],l_=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],u_=["/s/","/e/","/i/"];function c_(e,t,n,r){if(Xg(e))return e;var i=(null==t?void 0:t["content-length"])||function(e){return new Blob([e]).size}(e);return Qg(i)&&(i=parseInt(i)),i>n?s_+" ".concat(r," body too large to record (").concat(i," bytes)"):e}function h_(e,t){if(Xg(e))return e;var n=e;return Zy(n,!1)||(n=s_+" "+t+" body redacted"),_m(l_,(function(e){var r,i;null!==(r=n)&&void 0!==r&&r.length&&-1!==(null===(i=n)||void 0===i?void 0:i.indexOf(e))&&(n=s_+" "+t+" body redacted as might contain: "+e)})),n}var d_="__ph_opt_in_out_";function f_(e,t){w_(!0,e,t)}function p_(e,t){w_(!1,e,t)}function g_(e,t){return"1"===b_(e,t)}function m_(e,t){return!!function(e){if(e&&e.respectDnt){var t=e&&e.window||tm,n=null==t?void 0:t.navigator,r=!1;return _m([null==n?void 0:n.doNotTrack,n.msDoNotTrack,t.doNotTrack],(function(e){wm([!0,1,"1","yes"],e)&&(r=!0)})),r}return!1}(t)||"0"===b_(e,t)}function v_(e,t){y_(t=t||{}).remove(__(e,t),!!t.crossSubdomainCookie)}function y_(e){return"localStorage"===(e=e||{}).persistenceType?bv:"localStorage+cookie"===e.persistenceType?kv:yv}function __(e,t){return((t=t||{}).persistencePrefix||d_)+e}function b_(e,t){return y_(t).get(__(e,t))}function w_(e,t,n){Qg(t)&&t.length?(y_(n=n||{}).set(__(t,n),e?1:0,Jg(n.cookieExpiration)?n.cookieExpiration:null,n.crossSubdomainCookie,n.secureCookie),n.capture&&e&&n.capture(n.captureEventName||"$opt_in",n.captureProperties||{},{send_instantly:!0})):gm.error("gdpr."+(e?"optIn":"optOut")+" called with an invalid token")}function k_(e){var t=!1;try{var n=e.config.token,r=e.config.respect_dnt,i=e.config.opt_out_capturing_persistence_type,s=e.config.opt_out_capturing_cookie_prefix||void 0,o=e.config.window;n&&(t=m_(n,{respectDnt:r,persistenceType:i,persistencePrefix:s,window:o}))}catch(e){gm.error("Unexpected error when checking capturing opt-out status: "+e)}return t}var S_,E_=3e5,x_=E_;!function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet"}(S_||(S_={}));var C_=[S_.MouseMove,S_.MouseInteraction,S_.Scroll,S_.ViewportResize,S_.Input,S_.TouchMove,S_.MediaInteraction,S_.Drag],T_=function(e){return{rrwebMethod:e,enqueuedAt:Date.now(),attempt:1}},I_="[SessionRecording]",A_=function(){function e(t){var n=this;if(Ng(this,e),Dg(this,"queuedRRWebEvents",[]),Dg(this,"isIdle",!1),Dg(this,"_linkedFlagSeen",!1),Dg(this,"_lastActivityTimestamp",Date.now()),Dg(this,"windowId",null),Dg(this,"sessionId",null),Dg(this,"_linkedFlag",null),Dg(this,"_forceAllowLocalhostNetworkCapture",!1),Dg(this,"_samplingSessionListener",null),this.instance=t,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,null==tm||tm.addEventListener("beforeunload",(function(){n._flushBuffer()})),null==tm||tm.addEventListener("offline",(function(){n._tryAddCustomEvent("browser offline",{})})),null==tm||tm.addEventListener("online",(function(){n._tryAddCustomEvent("browser online",{})})),null==tm||tm.addEventListener("visibilitychange",(function(){if(null!=am&&am.visibilityState){var e="window "+am.visibilityState;n._tryAddCustomEvent(e,{})}})),!this.instance.sessionManager)throw gm.error(I_+" started without valid sessionManager"),new Error(I_+" started without valid sessionManager. This is a bug.");this.buffer=this.clearBuffer(),this._setupSampling()}return Pg(e,[{key:"rrwebRecord",get:function(){var e;return null==fm||null===(e=fm.rrweb)||void 0===e?void 0:e.record}},{key:"started",get:function(){return this._captureStarted}},{key:"sessionManager",get:function(){if(!this.instance.sessionManager)throw gm.error(I_+" started without valid sessionManager"),new Error(I_+" started without valid sessionManager. This is a bug.");return this.instance.sessionManager}},{key:"isSampled",get:function(){var e=this.instance.get_property(Vm);return Zg(e)?e:null}},{key:"sessionDuration",get:function(){var e,t,n=null===(e=this.buffer)||void 0===e?void 0:e.data[(null===(t=this.buffer)||void 0===t?void 0:t.data.length)-1],r=this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return n?n.timestamp-r:null}},{key:"isRecordingEnabled",get:function(){var e=!!this.instance.get_property(Fm),t=!this.instance.config.disable_session_recording;return tm&&e&&t}},{key:"isConsoleLogCaptureEnabled",get:function(){var e=!!this.instance.get_property(Lm),t=this.instance.config.enable_recording_console_log;return null!=t?t:e}},{key:"canvasRecording",get:function(){var e=this.instance.get_property(Mm);return e&&e.fps&&e.quality?{enabled:e.enabled,fps:e.fps,quality:e.quality}:void 0}},{key:"networkPayloadCapture",get:function(){var e,t,n=this.instance.get_property(jm),r={recordHeaders:null===(e=this.instance.config.session_recording)||void 0===e?void 0:e.recordHeaders,recordBody:null===(t=this.instance.config.session_recording)||void 0===t?void 0:t.recordBody},i=(null==r?void 0:r.recordHeaders)||(null==n?void 0:n.recordHeaders),s=(null==r?void 0:r.recordBody)||(null==n?void 0:n.recordBody),o=this.instance.config.capture_performance||(null==n?void 0:n.capturePerformance);return i||s||o?{recordHeaders:i,recordBody:s,recordPerformance:o}:void 0}},{key:"sampleRate",get:function(){var e=this.instance.get_property(Um);return Jg(e)?e:null}},{key:"minimumDuration",get:function(){var e=this.instance.get_property(zm);return Jg(e)?e:null}},{key:"status",get:function(){return this.receivedDecide?this.isRecordingEnabled?Xg(this._linkedFlag)||this._linkedFlagSeen?Zg(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}},{key:"startIfEnabledOrStop",value:function(){this.isRecordingEnabled?(this._startCapture(),gm.info(I_+" started")):(this.stopRecording(),this.clearBuffer())}},{key:"stopRecording",value:function(){this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,gm.info(I_+" stopped"))}},{key:"makeSamplingDecision",value:function(e){var t,n=this.sessionId!==e,r=this.sampleRate;if(Jg(r)){var i,s=this.isSampled,o=n||!Zg(s);!(i=o?Math.random()<r:s)&&o&&gm.warn(I_+" Sample rate (".concat(r,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:r}),null===(t=this.instance.persistence)||void 0===t||t.register(Dg({},Vm,i))}else{var a;null===(a=this.instance.persistence)||void 0===a||a.register(Dg({},Vm,null))}}},{key:"afterDecideResponse",value:function(e){var t,n,r,i=this;if(this._persistDecideResponse(e),this._linkedFlag=(null===(t=e.sessionRecording)||void 0===t?void 0:t.linkedFlag)||null,null!==(n=e.sessionRecording)&&void 0!==n&&n.endpoint&&(this._endpoint=null===(r=e.sessionRecording)||void 0===r?void 0:r.endpoint),this._setupSampling(),!Xg(this._linkedFlag)){var s=Qg(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,o=Qg(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags((function(e,t){var n=Wg(t)&&s in t,r=o?t[s]===o:n;if(r){var a={linkedFlag:s,linkedVariant:o},l="linked flag matched";gm.info(I_+" "+l,a),i._tryAddCustomEvent(l,a)}i._linkedFlagSeen=r}))}this.receivedDecide=!0,this.startIfEnabledOrStop()}},{key:"_setupSampling",value:function(){var e=this;Jg(this.sampleRate)&&Yg(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId((function(t){e.makeSamplingDecision(t)})))}},{key:"_persistDecideResponse",value:function(e){if(this.instance.persistence){var t=this.instance.persistence,n=function(){var n,r,i,s,o,a,l,u,c=null===(n=e.sessionRecording)||void 0===n?void 0:n.sampleRate,h=Xg(c)?null:parseFloat(c),d=null===(r=e.sessionRecording)||void 0===r?void 0:r.minimumDurationMilliseconds;t.register((Dg(u={},Fm,!!e.sessionRecording),Dg(u,Lm,null===(i=e.sessionRecording)||void 0===i?void 0:i.consoleLogRecordingEnabled),Dg(u,jm,Ig({capturePerformance:e.capturePerformance},null===(s=e.sessionRecording)||void 0===s?void 0:s.networkPayloadCapture)),Dg(u,Mm,{enabled:null===(o=e.sessionRecording)||void 0===o?void 0:o.recordCanvas,fps:null===(a=e.sessionRecording)||void 0===a?void 0:a.canvasFps,quality:null===(l=e.sessionRecording)||void 0===l?void 0:l.canvasQuality}),Dg(u,Um,h),Dg(u,zm,Kg(d)?null:d),u))};n(),this.sessionManager.onSessionId(n)}}},{key:"log",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";null===(t=this.instance.sessionRecording)||void 0===t||t.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Sm()})}},{key:"_startCapture",value:function(){var e=this;Kg(Object.assign)||this._captureStarted||this.instance.config.disable_session_recording||k_(this.instance)||(this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():Am(this.instance.requestRouter.endpointFor("assets","/static/recorder.js?v=".concat(Ug.LIB_VERSION)),(function(t){if(t)return gm.error(I_+" could not load recorder.js",t);e._onScriptLoaded()})))}},{key:"isInteractiveEvent",value:function(e){var t;return 3===e.type&&-1!==C_.indexOf(null===(t=e.data)||void 0===t?void 0:t.source)}},{key:"_updateWindowAndSessionIds",value:function(e){var t=this.isInteractiveEvent(e);t||this.isIdle||e.timestamp-this._lastActivityTimestamp>x_&&(this.isIdle=!0,this._tryAddCustomEvent("sessionIdle",{reason:"user inactivity",timeSinceLastActive:e.timestamp-this._lastActivityTimestamp,threshold:x_}));var n=!1;if(t&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),n=!0)),!this.isIdle){var r=this.sessionManager.checkAndGetSessionAndWindowId(!t,e.timestamp),i=r.windowId,s=r.sessionId,o=this.sessionId!==s,a=this.windowId!==i;this.windowId=i,this.sessionId=s,(n||-1===[Ny,Ry].indexOf(e.type)&&(a||o))&&this._tryTakeFullSnapshot()}}},{key:"_tryRRWebMethod",value:function(e){try{return e.rrwebMethod(),!0}catch(Ig){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):gm.warn(I_+" could not emit queued rrweb event.",Ig,e),!1}}},{key:"_tryAddCustomEvent",value:function(e,t){var n=this;return this._tryRRWebMethod(T_((function(){return n.rrwebRecord.addCustomEvent(e,t)})))}},{key:"_tryTakeFullSnapshot",value:function(){var e=this;return this._tryRRWebMethod(T_((function(){return e.rrwebRecord.takeFullSnapshot()})))}},{key:"_onScriptLoaded",value:function(){for(var e,t=this,n={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},r=this.instance.config.session_recording,i=0,s=Object.entries(r||{});i<s.length;i++){var o=Og(s[i],2),a=o[0],l=o[1];a in n&&(n[a]=l)}if(this.canvasRecording&&this.canvasRecording.enabled&&(n.recordCanvas=!0,n.sampling={canvas:this.canvasRecording.fps},n.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=null!==(e=this.mutationRateLimiter)&&void 0!==e?e:new Py(this.rrwebRecord,{onBlockedNode:function(e,n){var r="Too many mutations on node '".concat(e,"'. Rate limiting. This could be due to SVG animations or something similar");gm.info(r,{node:n}),t.log(I_+" "+r,"warn")}}),this._scheduleFullSnapshot();var u=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(Ig({emit:function(e){t.onRRwebEmit(e)},plugins:u},n)),this.instance._addCaptureHook((function(e){try{if("$pageview"===e){var n=tm?t._maskUrl(tm.location.href):"";if(!n)return;t._tryAddCustomEvent("$pageview",{href:n}),t._tryTakeFullSnapshot()}}catch(e){gm.error("Could not add $pageview to rrweb session",e)}})),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:n,activePlugins:u.map((function(e){return null==e?void 0:e.name}))}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else gm.error(I_+"onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"_scheduleFullSnapshot",value:function(){var e=this;this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),this._fullSnapshotTimer=setInterval((function(){e._tryTakeFullSnapshot()}),E_)}},{key:"_gatherRRWebPlugins",value:function(){var e=[];return fm.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled&&e.push(fm.rrwebConsoleRecord.getRecordConsolePlugin()),this.networkPayloadCapture&&$g(fm.getRecordNetworkPlugin)&&(!Tv.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?e.push(fm.getRecordNetworkPlugin(function(e,t){var n,r,i,s={payloadSizeLimitBytes:o_.payloadSizeLimitBytes,performanceEntryTypeToObserve:Fg(o_.performanceEntryTypeToObserve)},o=!1!==e.session_recording.recordHeaders&&t.recordHeaders,a=!1!==e.session_recording.recordBody&&t.recordBody,l=!1!==e.capture_performance&&t.recordPerformance,u=(n=s,i=Math.min(1e6,null!==(r=n.payloadSizeLimitBytes)&&void 0!==r?r:1e6),function(e){return null!=e&&e.requestBody&&(e.requestBody=c_(e.requestBody,e.requestHeaders,i,"Request")),null!=e&&e.responseBody&&(e.responseBody=c_(e.responseBody,e.responseHeaders,i,"Response")),e}),c=function(e){return u(function(e){var t=Iv(e.name);if(!(t&&t.pathname&&u_.some((function(e){return 0===t.pathname.indexOf(e)}))))return e}((t=e,_m(Object.keys(null!==(n=t.requestHeaders)&&void 0!==n?n:{}),(function(e){var n;a_.includes(e.toLowerCase())&&(null===(n=t.requestHeaders)||void 0===n||delete n[e])})),t)));var t,n},h=$g(e.session_recording.maskNetworkRequestFn);return h&&$g(e.session_recording.maskCapturedNetworkRequestFn)&&gm.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),h&&(e.session_recording.maskCapturedNetworkRequestFn=function(t){var n=e.session_recording.maskNetworkRequestFn({url:t.name});return Ig(Ig({},t),{},{name:null==n?void 0:n.url})}),s.maskRequestFn=$g(e.session_recording.maskCapturedNetworkRequestFn)?function(t){var n,r,i,s=c(t);return s&&null!==(n=null===(r=(i=e.session_recording).maskCapturedNetworkRequestFn)||void 0===r?void 0:r.call(i,s))&&void 0!==n?n:void 0}:function(e){return function(e){if(!Kg(e))return e.requestBody=h_(e.requestBody,"Request"),e.responseBody=h_(e.responseBody,"Response"),e}(c(e))},Ig(Ig(Ig({},o_),s),{},{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})}(this.instance.config,this.networkPayloadCapture))):gm.info(I_+" NetworkCapture not started because we are on localhost.")),e}},{key:"onRRwebEmit",value:function(e){if(this._processQueuedEvents(),e&&Wg(e)){if(e.type===Dy.Meta){var t=this._maskUrl(e.data.href);if(this._lastHref=t,!t)return;e.data.href=t}else this._pageViewFallBack();e.type===Dy.FullSnapshot&&this._scheduleFullSnapshot();var n=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(n){var r=function(e){var t=e;if(t&&Wg(t)&&6===t.type&&Wg(t.data)&&"rrweb/console@1"===t.data.plugin){t.data.payload.payload.length>10&&(t.data.payload.payload=t.data.payload.payload.slice(0,10),t.data.payload.payload.push("...[truncated]"));for(var n=[],r=0;r<t.data.payload.payload.length;r++)t.data.payload.payload[r]&&t.data.payload.payload[r].length>2e3?n.push(t.data.payload.payload[r].slice(0,2e3)+"...[truncated]"):n.push(t.data.payload.payload[r]);return t.data.payload.payload=n,e}return e}(n),i=JSON.stringify(r).length;if(this._updateWindowAndSessionIds(r),!this.isIdle||r.type===Dy.Custom){var s={$snapshot_bytes:i,$snapshot_data:r,$session_id:this.sessionId,$window_id:this.windowId};"disabled"!==this.status?this._captureSnapshotBuffered(s):this.clearBuffer()}}}}},{key:"_pageViewFallBack",value:function(){if(!this.instance.config.capture_pageview&&tm){var e=this._maskUrl(tm.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}}},{key:"_processQueuedEvents",value:function(){var e=this;if(this.queuedRRWebEvents.length){var t=Fg(this.queuedRRWebEvents);this.queuedRRWebEvents=[],t.forEach((function(n){Date.now()-n.enqueuedAt>2e3?e._tryAddCustomEvent("rrwebQueueTimeout",{enqueuedAt:n.enqueuedAt,attempt:n.attempt,queueLength:t.length}):e._tryRRWebMethod(n)&&e._tryAddCustomEvent("rrwebQueueSuccess",{enqueuedAt:n.enqueuedAt,attempt:n.attempt,queueLength:t.length})}))}}},{key:"_maskUrl",value:function(e){var t=this.instance.config.session_recording;if(t.maskNetworkRequestFn){var n,r={url:e};return null===(n=r=t.maskNetworkRequestFn(r))||void 0===n?void 0:n.url}return e}},{key:"clearBuffer",value:function(){return this.buffer=void 0,{size:0,data:[],sessionId:this.sessionId,windowId:this.windowId}}},{key:"_flushBuffer",value:function(){var e=this;this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var t=this.minimumDuration,n=this.sessionDuration,r=Jg(n)&&n>=0,i=Jg(t)&&r&&n<t;return"buffering"===this.status||i?(this.flushBufferTimer=setTimeout((function(){e._flushBuffer()}),2e3),this.buffer||this.clearBuffer()):this.buffer&&0!==this.buffer.data.length?(this._captureSnapshot({$snapshot_bytes:this.buffer.size,$snapshot_data:this.buffer.data,$session_id:this.buffer.sessionId,$window_id:this.buffer.windowId}),this.clearBuffer()):this.buffer||this.clearBuffer()}},{key:"_captureSnapshotBuffered",value:function(e){var t,n=this,r=2+((null===(t=this.buffer)||void 0===t?void 0:t.data.length)||0);(!this.buffer||this.buffer.size+e.$snapshot_bytes+r>943718.4||this.buffer.sessionId&&this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),Yg(this.buffer.sessionId)&&!Yg(this.sessionId)&&(this.buffer.sessionId=this.sessionId,this.buffer.windowId=this.windowId),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||(this.flushBufferTimer=setTimeout((function(){n._flushBuffer()}),2e3))}},{key:"_captureSnapshot",value:function(e){this.instance.capture("$snapshot",e,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",_noHeatmaps:!0})}}]),e}(),N_=function(){function e(t){Ng(this,e),this.instance=t,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return Pg(e,[{key:"call",value:function(){var e=this,t={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property($m),group_properties:this.instance.get_property(Wm),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:t,compression:this.instance.config.disable_compression?void 0:Tm.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:function(t){return e.parseDecideResponse(t.json)}})}},{key:"parseDecideResponse",value:function(e){var t=this;this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer();var n=!e;if(this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(null!=e?e:{},n),n)gm.error("Failed to fetch feature flags from PostHog.");else{if(!am||!am.body)return gm.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((function(){t.parseDecideResponse(e)}),500);this.instance._afterDecideResponse(e);var r=null==tm?void 0:tm.extendPostHogWithExceptionAutoCapture;if(e.autocaptureExceptions&&e.autocaptureExceptions&&Kg(r)&&Am(this.instance.requestRouter.endpointFor("assets","/static/exception-autocapture.js"),(function(n){if(n)return gm.error("Could not load exception autocapture script",n);tm.extendPostHogWithExceptionAutocapture(t.instance,e)})),e.siteApps)if(this.instance.config.opt_in_site_apps){var i,s=Mg(e.siteApps);try{var o=function(){var e=i.value,n=e.id,r=e.url,s=t.instance.requestRouter.endpointFor("api",r);fm["__$$ph_site_app_".concat(n)]=t.instance,Am(s,(function(e){e&&gm.error("Error while initializing PostHog app with config id ".concat(n),e)}))};for(s.s();!(i=s.n()).done;)o()}catch(e){s.e(e)}finally{s.f()}}else e.siteApps.length>0&&gm.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}}]),e}(),R_=null!=tm&&tm.location?Nv(tm.location.hash,"__posthog")||Nv(location.hash,"state"):null,P_="_postHogToolbarParams",D_=function(){function e(t){Ng(this,e),Dg(this,"_toolbarScriptLoaded",!1),this.instance=t}return Pg(e,[{key:"maybeLoadToolbar",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!tm||!am)return!1;n=null!==(e=n)&&void 0!==e?e:tm.location,i=null!==(t=i)&&void 0!==t?t:tm.history;try{if(!r){try{tm.localStorage.setItem("test","test"),tm.localStorage.removeItem("test")}catch(e){return!1}r=null==tm?void 0:tm.localStorage}var s,o=R_||Nv(n.hash,"__posthog")||Nv(n.hash,"state"),a=o?Em((function(){return JSON.parse(atob(decodeURIComponent(o)))}))||Em((function(){return JSON.parse(decodeURIComponent(o))})):null;return a&&"ph_authorize"===a.action?((s=a).source="url",s&&Object.keys(s).length>0&&(a.desiredHash?n.hash=a.desiredHash:i?i.replaceState("",am.title,n.pathname+n.search):n.hash="")):((s=JSON.parse(r.getItem(P_)||"{}")).source="localstorage",delete s.userIntent),!(!s.token||this.instance.config.token!==s.token)&&(this.loadToolbar(s),!0)}catch(e){return!1}}},{key:"_callLoadToolbar",value:function(e){(fm.ph_load_toolbar||fm.ph_load_editor)(e,this.instance)}},{key:"loadToolbar",value:function(e){var t=this;if(!tm||tm.localStorage.getItem(P_)&&this._toolbarScriptLoaded)return!1;var n="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,r=Ig(Ig({token:this.instance.config.token},e),{},{apiURL:this.instance.requestRouter.endpointFor("ui")},n?{instrument:!1}:{});if(tm.localStorage.setItem(P_,JSON.stringify(Ig(Ig({},r),{},{source:void 0}))),this._toolbarScriptLoaded)this._callLoadToolbar(r);else{this._toolbarScriptLoaded=!0;var i=3e5,s=Math.floor(Date.now()/i)*i;Am(this.instance.requestRouter.endpointFor("assets","/static/toolbar.js?t=".concat(s)),(function(e){if(e)return gm.error("Failed to load toolbar",e),void(t._toolbarScriptLoaded=!1);t._callLoadToolbar(r)})),Im(tm,"turbolinks:load",(function(){t._toolbarScriptLoaded=!1,t.loadToolbar(r)}))}return!0}},{key:"_loadEditor",value:function(e){return this.loadToolbar(e)}},{key:"maybeLoadEditor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.maybeLoadToolbar(e,t,n)}}]),e}(),O_=function(){function e(t){Ng(this,e),Dg(this,"isPaused",!0),Dg(this,"queue",[]),Dg(this,"flushTimeoutMs",3e3),this.sendRequest=t}return Pg(e,[{key:"enqueue",value:function(e){this.queue.push(e),this.flushTimeout||this.setFlushTimeout()}},{key:"unload",value:function(){var e=this;this.clearFlushTimeout();var t=this.queue.length>0?this.formatQueue():{},n=Object.values(t);[].concat(Fg(n.filter((function(e){return 0===e.url.indexOf("/e")}))),Fg(n.filter((function(e){return 0!==e.url.indexOf("/e")})))).map((function(t){e.sendRequest(Ig(Ig({},t),{},{transport:"sendBeacon"}))}))}},{key:"enable",value:function(){this.isPaused=!1,this.setFlushTimeout()}},{key:"setFlushTimeout",value:function(){var e=this;this.isPaused||(this.flushTimeout=setTimeout((function(){if(e.clearFlushTimeout(),e.queue.length>0){var t=e.formatQueue(),n=function(n){var r=t[n],i=(new Date).getTime();r.data&&Hg(r.data)&&_m(r.data,(function(e){e.offset=Math.abs(e.timestamp-i),delete e.timestamp})),e.sendRequest(r)};for(var r in t)n(r)}}),this.flushTimeoutMs))}},{key:"clearFlushTimeout",value:function(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}},{key:"formatQueue",value:function(){var e={};return _m(this.queue,(function(t){var n,r=t,i=(r?r.batchKey:null)||r.url;Kg(e[i])&&(e[i]=Ig(Ig({},r),{},{data:[]})),null===(n=e[i].data)||void 0===n||n.push(r.data)})),this.queue=[],e}}]),e}(),F_=Uint8Array,L_=Uint16Array,j_=Uint32Array,M_=new F_([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),U_=new F_([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),z_=new F_([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),B_=function(e,t){for(var n=new L_(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new j_(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},V_=B_(M_,2),q_=V_[0],H_=V_[1];q_[28]=258,H_[258]=28;for(var $_=B_(U_,0)[1],W_=new L_(32768),G_=0;G_<32768;++G_){var K_=(43690&G_)>>>1|(21845&G_)<<1;K_=(61680&(K_=(52428&K_)>>>2|(13107&K_)<<2))>>>4|(3855&K_)<<4,W_[G_]=((65280&K_)>>>8|(255&K_)<<8)>>>1}var Q_=function(e,t,n){for(var r=e.length,i=0,s=new L_(t);i<r;++i)++s[e[i]-1];var o,a=new L_(t);for(i=0;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;if(n){o=new L_(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],c=t-e[i],h=a[e[i]-1]++<<c,d=h|(1<<c)-1;h<=d;++h)o[W_[h]>>>l]=u}else for(o=new L_(r),i=0;i<r;++i)o[i]=W_[a[e[i]-1]++]>>>15-e[i];return o},Y_=new F_(288);for(G_=0;G_<144;++G_)Y_[G_]=8;for(G_=144;G_<256;++G_)Y_[G_]=9;for(G_=256;G_<280;++G_)Y_[G_]=7;for(G_=280;G_<288;++G_)Y_[G_]=8;var X_=new F_(32);for(G_=0;G_<32;++G_)X_[G_]=5;var J_=Q_(Y_,9,0),Z_=Q_(X_,5,0),eb=function(e){return(e/8|0)+(7&e&&1)},tb=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof L_?L_:e instanceof j_?j_:F_)(n-t);return r.set(e.subarray(t,n)),r},nb=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},rb=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},ib=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return[new F_(0),0];if(1==i){var o=new F_(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,h=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=n[n[u].f<n[h].f?u++:h++],l=n[u!=c&&n[u].f<n[h].f?u++:h++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};var d=s[0].s;for(r=1;r<i;++r)s[r].s>d&&(d=s[r].s);var f=new L_(d+1),p=sb(n[c-1],f,0);if(p>t){r=0;var g=0,m=p-t,v=1<<m;for(s.sort((function(e,t){return f[t.s]-f[e.s]||e.f-t.f}));r<i;++r){var y=s[r].s;if(!(f[y]>t))break;g+=v-(1<<p-f[y]),f[y]=t}for(g>>>=m;g>0;){var _=s[r].s;f[_]<t?g-=1<<t-f[_]++-1:++r}for(;r>=0&&g;--r){var b=s[r].s;f[b]==t&&(--f[b],++g)}p=t}return[new F_(f),p]},sb=function e(t,n,r){return-1==t.s?Math.max(e(t.l,n,r+1),e(t.r,n,r+1)):n[t.s]=r},ob=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new L_(++t),r=0,i=e[0],s=1,o=function(e){n[r++]=e},a=1;a<=t;++a)if(e[a]==i&&a!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=e[a]}return[n.subarray(0,r),t]},ab=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},lb=function(e,t,n){var r=n.length,i=eb(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var s=0;s<r;++s)e[i+s+4]=n[s];return 8*(i+4+r)},ub=function(e,t,n,r,i,s,o,a,l,u,c){nb(t,c++,n),++i[256];for(var h=ib(i,15),d=h[0],f=h[1],p=ib(s,15),g=p[0],m=p[1],v=ob(d),y=v[0],_=v[1],b=ob(g),w=b[0],k=b[1],S=new L_(19),E=0;E<y.length;++E)S[31&y[E]]++;for(E=0;E<w.length;++E)S[31&w[E]]++;for(var x=ib(S,7),C=x[0],T=x[1],I=19;I>4&&!C[z_[I-1]];--I);var A,N,R,P,D=u+5<<3,O=ab(i,Y_)+ab(s,X_)+o,F=ab(i,d)+ab(s,g)+o+14+3*I+ab(S,C)+(2*S[16]+3*S[17]+7*S[18]);if(D<=O&&D<=F)return lb(t,c,e.subarray(l,l+u));if(nb(t,c,1+(F<O)),c+=2,F<O){A=Q_(d,f,0),N=d,R=Q_(g,m,0),P=g;var L=Q_(C,T,0);for(nb(t,c,_-257),nb(t,c+5,k-1),nb(t,c+10,I-4),c+=14,E=0;E<I;++E)nb(t,c+3*E,C[z_[E]]);c+=3*I;for(var j=[y,w],M=0;M<2;++M){var U=j[M];for(E=0;E<U.length;++E){var z=31&U[E];nb(t,c,L[z]),c+=C[z],z>15&&(nb(t,c,U[E]>>>5&127),c+=U[E]>>>12)}}}else A=J_,N=Y_,R=Z_,P=X_;for(E=0;E<a;++E)if(r[E]>255){z=r[E]>>>18&31,rb(t,c,A[z+257]),c+=N[z+257],z>7&&(nb(t,c,r[E]>>>23&31),c+=M_[z]);var B=31&r[E];rb(t,c,R[B]),c+=P[B],B>3&&(rb(t,c,r[E]>>>5&8191),c+=U_[B])}else rb(t,c,A[r[E]]),c+=N[r[E]];return rb(t,c,A[256]),c+N[256]},cb=new j_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),hb=new F_(0),db=function(){for(var e=new j_(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),fb=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function pb(e,t){void 0===t&&(t={});var n=function(){var e=4294967295;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=db[255&n^t[r]]^n>>>8;e=n},d:function(){return 4294967295^e}}}(),r=e.length;n.p(e);var i,s=function(e,t,n,r,i){return function(e,t,n,r,i,s){var o=e.length,a=new F_(r+o+5*(1+Math.floor(o/7e3))+i),l=a.subarray(r,a.length-i),u=0;if(!t||o<8)for(var c=0;c<=o;c+=65535){var h=c+65535;h<o?u=lb(l,u,e.subarray(c,h)):(l[c]=s,u=lb(l,u,e.subarray(c,o)))}else{for(var d=cb[t-1],f=d>>>13,p=8191&d,g=(1<<n)-1,m=new L_(32768),v=new L_(g+1),y=Math.ceil(n/3),_=2*y,b=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<_)&g},w=new j_(25e3),k=new L_(288),S=new L_(32),E=0,x=0,C=(c=0,0),T=0,I=0;c<o;++c){var A=b(c),N=32767&c,R=v[A];if(m[N]=R,v[A]=N,T<=c){var P=o-c;if((E>7e3||C>24576)&&P>423){u=ub(e,l,0,w,k,S,x,C,I,c-I,u),C=E=x=0,I=c;for(var D=0;D<286;++D)k[D]=0;for(D=0;D<30;++D)S[D]=0}var O=2,F=0,L=p,j=N-R&32767;if(P>2&&A==b(c-j))for(var M=Math.min(f,P)-1,U=Math.min(32767,c),z=Math.min(258,P);j<=U&&--L&&N!=R;){if(e[c+O]==e[c+O-j]){for(var B=0;B<z&&e[c+B]==e[c+B-j];++B);if(B>O){if(O=B,F=j,B>M)break;var V=Math.min(j,B-2),q=0;for(D=0;D<V;++D){var H=c-j+D+32768&32767,$=H-m[H]+32768&32767;$>q&&(q=$,R=H)}}}j+=(N=R)-(R=m[N])+32768&32767}if(F){w[C++]=268435456|H_[O]<<18|$_[F];var W=31&H_[O],G=31&$_[F];x+=M_[W]+U_[G],++k[257+W],++S[G],T=c+O,++E}else w[C++]=e[c],++k[e[c]]}}u=ub(e,l,s,w,k,S,x,C,I,c-I,u),s||(u=lb(l,u,hb))}return tb(a,0,r+eb(u)+i)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!i)}(e,t,10+((i=t).filename&&i.filename.length+1||0),8),o=s.length;return function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&fb(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}}(s,t),fb(s,o-8,n.d()),fb(s,o-4,r),s}var gb,mb=!!cm||!!um,vb="text/plain",yb=function(e,t){var n=Og(e.split("?"),2),r=n[0],i=n[1],s=Ig({},t);null==i||i.split("&").forEach((function(e){var t=Og(e.split("="),1)[0];delete s[t]}));var o=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",i=[];return _m(e,(function(e,r){Kg(e)||Kg(r)||"undefined"===r||(t=encodeURIComponent(function(e){return e instanceof File}(e)?e.name:e.toString()),n=encodeURIComponent(r),i[i.length]=n+"="+t)})),i.join(r)}(s);return o=o?(i?i+"&":"")+o:i,"".concat(r,"?").concat(o)},_b=function(e){return"data="+encodeURIComponent("string"==typeof e?e:JSON.stringify(e))},bb=function(e){var t=e.data,n=e.compression;if(t){if(n===Tm.GZipJS){var r=pb(function(e,t){var n=e.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var r=new F_(e.length+(e.length>>>1)),i=0,s=function(e){r[i++]=e},o=0;o<n;++o){if(i+5>r.length){var a=new F_(i+8+(n-o<<1));a.set(r),r=a}var l=e.charCodeAt(o);l<128?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return tb(r,0,i)}(JSON.stringify(t)),{mtime:0});return{contentType:vb,body:new Blob([r],{type:vb})}}if(n===Tm.Base64){var i=function(e){var t,n,r,i,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,u="",c=[];if(!e)return e;e=function(e){var t,n,r,i,s="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<r;i++){var o=e.charCodeAt(i),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),Yg(a)||(n>t&&(s+=e.substring(t,n)),s+=a,t=n=i+1)}return n>t&&(s+=e.substring(t,e.length)),s}(e);do{t=(s=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,n=s>>12&63,r=s>>6&63,i=63&s,c[l++]=o.charAt(t)+o.charAt(n)+o.charAt(r)+o.charAt(i)}while(a<e.length);switch(u=c.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u}(JSON.stringify(t));return{contentType:"application/x-www-form-urlencoded",body:_b(i)}}return{contentType:"application/json",body:JSON.stringify(t)}}},wb=["retriesPerformedSoFar"],kb=function(){function e(t){var n=this;Ng(this,e),Dg(this,"isPolling",!1),Dg(this,"pollIntervalMs",3e3),Dg(this,"queue",[]),this.instance=t,this.queue=[],this.areWeOnline=!0,!Kg(tm)&&"onLine"in tm.navigator&&(this.areWeOnline=tm.navigator.onLine,tm.addEventListener("online",(function(){n.areWeOnline=!0,n.flush()})),tm.addEventListener("offline",(function(){n.areWeOnline=!1})))}return Pg(e,[{key:"retriableRequest",value:function(e){var t=this,n=e.retriesPerformedSoFar,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,wb);Jg(n)&&n>0&&(r.url=yb(r.url,{retry_count:n})),this.instance._send_request(Ig(Ig({},r),{},{callback:function(e){var i;200!==e.statusCode&&(e.statusCode<400||e.statusCode>=500)&&(null!=n?n:0)<10?t.enqueue(Ig({},r)):null===(i=r.callback)||void 0===i||i.call(r,e)}}))}},{key:"enqueue",value:function(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var n=function(e){var t=3e3*Math.pow(2,e),n=t/2,r=Math.min(18e5,t),i=(Math.random()-.5)*(r-n);return Math.ceil(r+i)}(t),r=Date.now()+n;this.queue.push({retryAt:r,requestOptions:e});var i="Enqueued failed request for retry in ".concat(n);navigator.onLine||(i+=" (Browser is offline)"),gm.warn(i),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var e=this;this.poller&&clearTimeout(this.poller),this.poller=setTimeout((function(){e.areWeOnline&&e.queue.length>0&&e.flush(),e.poll()}),this.pollIntervalMs)}},{key:"flush",value:function(){var e=Date.now(),t=[],n=this.queue.filter((function(n){return n.retryAt<e||(t.push(n),!1)}));if(this.queue=t,n.length>0){var r,i=Mg(n);try{for(i.s();!(r=i.n()).done;){var s=r.value.requestOptions;this.retriableRequest(s)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"unload",value:function(){this.poller&&(clearTimeout(this.poller),this.poller=void 0);var e,t=Mg(this.queue);try{for(t.s();!(e=t.n()).done;){var n=e.value.requestOptions;try{this.instance._send_request(Ig(Ig({},n),{},{transport:"sendBeacon"}))}catch(e){gm.error(e)}}}catch(e){t.e(e)}finally{t.f()}this.queue=[]}}]),e}(),Sb=1800,Eb=function(){function e(t,n,r,i){Ng(this,e),Dg(this,"_sessionIdChangedHandlers",[]),this.config=t,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=r||fv,this._windowIdGenerator=i||fv;var s=t.persistence_name||t.token,o=t.session_idle_timeout_seconds||Sb;if(Jg(o)?o>Sb?gm.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):o<60&&gm.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."):(gm.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),o=Sb),this._sessionTimeoutMs=1e3*Math.min(Math.max(o,60),Sb),this._window_id_storage_key="ph_"+s+"_window_id",this._primary_window_exists_storage_key="ph_"+s+"_primary_window_exists",this._canUseSessionStorage()){var a=Cv.parse(this._window_id_storage_key),l=Cv.parse(this._primary_window_exists_storage_key);a&&!l?this._windowId=a:Cv.remove(this._window_id_storage_key),Cv.set(this._primary_window_exists_storage_key,!0)}this._listenToReloadWindow()}return Pg(e,[{key:"onSessionId",value:function(e){var t=this;return Kg(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),function(){t._sessionIdChangedHandlers=t._sessionIdChangedHandlers.filter((function(t){return t!==e}))}}},{key:"_canUseSessionStorage",value:function(){return"memory"!==this.config.persistence&&!this.persistence.disabled&&Cv.is_supported()}},{key:"_setWindowId",value:function(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&Cv.set(this._window_id_storage_key,e))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?Cv.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(e,t,n){e===this._sessionId&&t===this._sessionActivityTimestamp&&n===this._sessionStartTimestamp||(this._sessionStartTimestamp=n,this._sessionActivityTimestamp=t,this._sessionId=e,this.persistence.register(Dg({},Bm,[t,e,n])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[Bm];return Hg(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var e=this;null==tm||tm.addEventListener("beforeunload",(function(){e._canUseSessionStorage()&&Cv.remove(e._primary_window_exists_storage_key)}))}},{key:"checkAndGetSessionAndWindowId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(new Date).getTime(),n=Og(this._getSessionId(),3),r=n[0],i=n[1],s=n[2],o=this._getWindowId(),a=s&&s>0&&Math.abs(t-s)>864e5,l=!1,u=!i,c=!e&&Math.abs(t-r)>this._sessionTimeoutMs;u||c||a?(i=this._sessionIdGenerator(),o=this._windowIdGenerator(),gm.info("[SessionId] new session ID generated",{sessionId:i,windowId:o,changeReason:{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}}),s=t,l=!0):o||(o=this._windowIdGenerator(),l=!0);var h=0===r||!e||a?t:r,d=0===s?(new Date).getTime():s;return this._setWindowId(o),this._setSessionId(i,h,d),l&&this._sessionIdChangedHandlers.forEach((function(e){return e(i,o)})),{sessionId:i,windowId:o,sessionStartTimestamp:d}}}]),e}();!function(e){e.US="us",e.EU="eu",e.CUSTOM="custom"}(gb||(gb={}));var xb="i.posthog.com",Cb=function(){function e(t){Ng(this,e),Dg(this,"_regionCache",{}),this.instance=t}return Pg(e,[{key:"apiHost",get:function(){return this.instance.config.api_host.trim().replace(/\/$/,"")}},{key:"uiHost",get:function(){var e;return null===(e=this.instance.config.ui_host)||void 0===e?void 0:e.replace(/\/$/,"")}},{key:"region",get:function(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=gb.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=gb.EU:this._regionCache[this.apiHost]=gb.CUSTOM),this._regionCache[this.apiHost]}},{key:"endpointFor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t&&(t="/"===t[0]?t:"/".concat(t)),"ui"===e)return(this.uiHost||this.apiHost.replace(".".concat(xb),".posthog.com"))+t;if(this.region===gb.CUSTOM)return this.apiHost+t;var n=xb+t;switch(e){case"assets":return"https://".concat(this.region,"-assets.").concat(n);case"api":return"https://".concat(this.region,".").concat(n)}}}]),e}(),Tb=Pg((function e(t,n,r,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:["error"];Ng(this,e),this.name="posthog-js",this.setupOnce=function(e){e((function(e){var o,a,l,u,c;if("*"!==s&&!s.includes(e.level)||!t.__loaded)return e;e.tags||(e.tags={});var h=t.requestRouter.endpointFor("ui","/project/".concat(t.config.token,"/person/").concat(t.get_distinct_id()));e.tags["PostHog Person URL"]=h,t.sessionRecordingStarted()&&(e.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var d=(null===(o=e.exception)||void 0===o?void 0:o.values)||[],f={$exception_message:(null===(a=d[0])||void 0===a?void 0:a.value)||e.message,$exception_type:null===(l=d[0])||void 0===l?void 0:l.type,$exception_personURL:h,$sentry_event_id:e.event_id,$sentry_exception:e.exception,$sentry_exception_message:(null===(u=d[0])||void 0===u?void 0:u.value)||e.message,$sentry_exception_type:null===(c=d[0])||void 0===c?void 0:c.type,$sentry_tags:e.tags,$level:e.level};return n&&r&&(f.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+e.event_id),t.capture("$exception",f),e}))}}));var Ib=function(){function e(t){Ng(this,e),this._instance=t}return Pg(e,[{key:"doPageView",value:function(){var e,t=this._previousScrollProperties();return this._currentPath=null!==(e=null==tm?void 0:tm.location.pathname)&&void 0!==e?e:"",this._instance.scrollManager.resetContext(),t}},{key:"doPageLeave",value:function(){return this._previousScrollProperties()}},{key:"_previousScrollProperties",value:function(){var e=this._currentPath,t=this._instance.scrollManager.getContext();if(!e||!t)return{};var n=t.maxScrollHeight,r=t.lastScrollY,i=t.maxScrollY,s=t.maxContentHeight,o=t.lastContentY,a=t.maxContentY;return Kg(n)||Kg(r)||Kg(i)||Kg(s)||Kg(o)||Kg(a)?{}:(n=Math.ceil(n),r=Math.ceil(r),i=Math.ceil(i),s=Math.ceil(s),o=Math.ceil(o),a=Math.ceil(a),{$prev_pageview_pathname:e,$prev_pageview_last_scroll:r,$prev_pageview_last_scroll_percentage:n<=1?1:Ab(r/n,0,1),$prev_pageview_max_scroll:i,$prev_pageview_max_scroll_percentage:n<=1?1:Ab(i/n,0,1),$prev_pageview_last_content:o,$prev_pageview_last_content_percentage:s<=1?1:Ab(o/s,0,1),$prev_pageview_max_content:a,$prev_pageview_max_content_percentage:s<=1?1:Ab(a/s,0,1)})}}]),e}();function Ab(e,t,n){return Math.max(t,Math.min(e,n))}var Nb={icontains:function(e){return!!tm&&tm.location.href.toLowerCase().indexOf(e.toLowerCase())>-1},regex:function(e){return!!tm&&function(e,t){return!!function(e){try{new RegExp(e)}catch(e){return!1}return!0}(t)&&new RegExp(t).test(e)}(tm.location.href,e)},exact:function(e){return(null==tm?void 0:tm.location.href)===e}},Rb=function(){function e(t){Ng(this,e),this.instance=t}return Pg(e,[{key:"afterDecideResponse",value:function(e){this._decideServerResponse=!!e.surveys,this.loadIfEnabled()}},{key:"loadIfEnabled",value:function(){var e=this,t=null==fm?void 0:fm.extendPostHogWithSurveys;this.instance.config.disable_surveys||!this._decideServerResponse||t||Am(this.instance.requestRouter.endpointFor("assets","/static/surveys.js"),(function(t){if(t)return gm.error("Could not load surveys script",t);fm.extendPostHogWithSurveys(e.instance)}))}},{key:"getSurveys",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance.config.disable_surveys)return e([]);var r=this.instance.get_property(Gm);if(r&&!n)return e(r);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:function(n){var r;if(200!==n.statusCode||!n.json)return e([]);var i=n.json.surveys||[];return null===(r=t.instance.persistence)||void 0===r||r.register(Dg({},Gm,i)),e(i)}})}},{key:"getActiveMatchingSurveys",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSurveys((function(n){var r=n.filter((function(e){return!(!e.start_date||e.end_date)})).filter((function(e){var t,n,r,i;if(!e.conditions)return!0;var s=null===(t=e.conditions)||void 0===t||!t.url||Nb[null!==(n=null===(r=e.conditions)||void 0===r?void 0:r.urlMatchType)&&void 0!==n?n:"icontains"](e.conditions.url),o=null===(i=e.conditions)||void 0===i||!i.selector||(null==am?void 0:am.querySelector(e.conditions.selector));return s&&o})).filter((function(e){if(!e.linked_flag_key&&!e.targeting_flag_key)return!0;var n=!e.linked_flag_key||t.instance.featureFlags.isFeatureEnabled(e.linked_flag_key),r=!e.targeting_flag_key||t.instance.featureFlags.isFeatureEnabled(e.targeting_flag_key);return n&&r}));return e(r)}),n)}}]),e}(),Pb=function(){function e(t){var n,r,i=this;Ng(this,e),Dg(this,"serverLimits",{}),Dg(this,"lastEventRateLimited",!1),Dg(this,"checkForLimiting",(function(e){var t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach((function(e){gm.info("[RateLimiter] ".concat(e||"events"," is quota limited.")),i.serverLimits[e]=(new Date).getTime()+6e4}))}catch(e){return void gm.warn('[RateLimiter] could not rate limit - continuing. Error: "'.concat(null==e?void 0:e.message,'"'),{text:t})}})),this.instance=t,this.captureEventsPerSecond=(null===(n=t.config.rate_limiting)||void 0===n?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null===(r=t.config.rate_limiting)||void 0===r?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}return Pg(e,[{key:"clientRateLimitContext",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=(new Date).getTime(),s=null!==(e=null===(t=this.instance.persistence)||void 0===t?void 0:t.get_property(Xm))&&void 0!==e?e:{tokens:this.captureEventsBurstLimit,last:i};s.tokens+=(i-s.last)/1e3*this.captureEventsPerSecond,s.last=i,s.tokens>this.captureEventsBurstLimit&&(s.tokens=this.captureEventsBurstLimit);var o=s.tokens<1;return o||r||(s.tokens=Math.max(0,s.tokens-1)),!o||this.lastEventRateLimited||r||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond," events per second and ").concat(this.captureEventsBurstLimit," events burst limit.")},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=o,null===(n=this.instance.persistence)||void 0===n||n.set_property(Xm,s),{isRateLimited:o,remainingTokens:s.tokens}}},{key:"isServerRateLimited",value:function(e){var t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}]),e}(),Db=function(){return Ig({initialPathName:(null==lm?void 0:lm.pathname)||"",referringDomain:Ty.referringDomain()},Ty.campaignParams())},Ob=function(){function e(t,n,r){var i=this;Ng(this,e),Dg(this,"_onSessionIdCallback",(function(e){var t=i._getStoredProps();if(!t||t.sessionId!==e){var n={sessionId:e,props:i._sessionSourceParamGenerator()};i._persistence.register(Dg({},Ym,n))}})),this._sessionIdManager=t,this._persistence=n,this._sessionSourceParamGenerator=r||Db,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}return Pg(e,[{key:"_getStoredProps",value:function(){return this._persistence.props[Ym]}},{key:"getSessionProps",value:function(){var e,t=null===(e=this._getStoredProps())||void 0===e?void 0:e.props;return t?{$client_session_initial_referring_host:t.referringDomain,$client_session_initial_pathname:t.initialPathName,$client_session_initial_utm_source:t.utm_source,$client_session_initial_utm_campaign:t.utm_campaign,$client_session_initial_utm_medium:t.utm_medium,$client_session_initial_utm_content:t.utm_content,$client_session_initial_utm_term:t.utm_term}:{}}}]),e}(),Fb=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],Lb=function(e,t){if(!e)return!1;var n=e.toLowerCase();return Fb.concat(t||[]).some((function(e){var t=e.toLowerCase();return-1!==n.indexOf(t)}))},jb=function(){function e(){Ng(this,e),this.clicks=[]}return Pg(e,[{key:"isRageClick",value:function(e,t,n){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(t-r.y)<30&&n-r.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:n}),3===this.clicks.length)return!0}else this.clicks=[{x:e,y:t,timestamp:n}];return!1}}]),e}(),Mb="__POSTHOG_TOOLBAR__";function Ub(e){var t;return e.id===Mb||!(null===(t=e.closest)||void 0===t||!t.call(e,"#"+Mb))}var zb=function(){function e(t){var n;Ng(this,e),Dg(this,"rageclicks",new jb),Dg(this,"_enabledServerSide",!1),Dg(this,"_initialized",!1),this.instance=t,this._enabledServerSide=!(null===(n=this.instance.persistence)||void 0===n||!n.props[Om])}return Pg(e,[{key:"startIfEnabled",value:function(){this.isEnabled&&!this._initialized&&(gm.info("[heatmaps] Heatmaps enabled, starting..."),this._setupListeners())}},{key:"isEnabled",get:function(){return Kg(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps}},{key:"afterDecideResponse",value:function(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register(Dg({},Om,t)),this._enabledServerSide=t,this.startIfEnabled()}},{key:"getAndClearBuffer",value:function(){var e=this.buffer;return this.buffer=void 0,e}},{key:"_setupListeners",value:function(){var e=this;tm&&am&&(Im(am,"click",(function(t){return e._onClick(t||(null==tm?void 0:tm.event))}),!1,!0),Im(am,"mousemove",(function(t){return e._onMouseMove(t||(null==tm?void 0:tm.event))}),!1,!0),this._initialized=!0)}},{key:"_getProperties",value:function(e,t){var n=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),i=this.instance.scrollManager.scrollElement(),s=function(e,t,n){for(var r=e;r&&!Uy(r,"body");){if(r===n)return!1;if(wm(t,null==tm?void 0:tm.getComputedStyle(r).position))return!0;r=qy(r)}return!1}(e.target,["fixed","sticky"],i);return{x:e.clientX+(s?0:r),y:e.clientY+(s?0:n),target_fixed:s,type:t}}},{key:"_onClick",value:function(e){var t;if(!Ub(e.target)){var n=this._getProperties(e,"click");null!==(t=this.rageclicks)&&void 0!==t&&t.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._capture(Ig(Ig({},n),{},{type:"rageclick"})),this._capture(n)}}},{key:"_onMouseMove",value:function(e){var t=this;Ub(e.target)||(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout((function(){t._capture(t._getProperties(e,"mousemove"))}),500))}},{key:"_capture",value:function(e){if(tm){var t=tm.location.href;this.buffer=this.buffer||{},this.buffer[t]||(this.buffer[t]=[]),this.buffer[t].push(e)}}}]),e}(),Bb=function(){function e(t){var n=this;Ng(this,e),Dg(this,"_updateScrollData",(function(){var e,t,r,i;n.context||(n.context={});var s=n.scrollElement(),o=n.scrollY(),a=s?Math.max(0,s.scrollHeight-s.clientHeight):0,l=o+((null==s?void 0:s.clientHeight)||0),u=(null==s?void 0:s.scrollHeight)||0;n.context.lastScrollY=Math.ceil(o),n.context.maxScrollY=Math.max(o,null!==(e=n.context.maxScrollY)&&void 0!==e?e:0),n.context.maxScrollHeight=Math.max(a,null!==(t=n.context.maxScrollHeight)&&void 0!==t?t:0),n.context.lastContentY=l,n.context.maxContentY=Math.max(l,null!==(r=n.context.maxContentY)&&void 0!==r?r:0),n.context.maxContentHeight=Math.max(u,null!==(i=n.context.maxContentHeight)&&void 0!==i?i:0)})),this.instance=t}return Pg(e,[{key:"getContext",value:function(){return this.context}},{key:"resetContext",value:function(){var e=this.context;return setTimeout(this._updateScrollData,0),e}},{key:"startMeasuringScrollPosition",value:function(){null==tm||tm.addEventListener("scroll",this._updateScrollData,!0),null==tm||tm.addEventListener("scrollend",this._updateScrollData,!0),null==tm||tm.addEventListener("resize",this._updateScrollData)}},{key:"scrollElement",value:function(){if(!this.instance.config.scroll_root_selector)return null==tm?void 0:tm.document.documentElement;var e,t=Mg(Hg(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector]);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=null==tm?void 0:tm.document.querySelector(n);if(r)return r}}catch(e){t.e(e)}finally{t.f()}}},{key:"scrollY",value:function(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return tm&&(tm.scrollY||tm.pageYOffset||tm.document.documentElement.scrollTop)||0}},{key:"scrollX",value:function(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return tm&&(tm.scrollX||tm.pageXOffset||tm.document.documentElement.scrollLeft)||0}}]),e}(),Vb=function(){function e(){Ng(this,e),Dg(this,"events",{}),this.events={}}return Pg(e,[{key:"on",value:function(e,t){var n=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){n.events[e]=n.events[e].filter((function(e){return e!==t}))}}},{key:"emit",value:function(e,t){var n,r=Mg(this.events[e]||[]);try{for(r.s();!(n=r.n()).done;)(0,n.value)(t)}catch(e){r.e(e)}finally{r.f()}var i,s=Mg(this.events["*"]||[]);try{for(s.s();!(i=s.n()).done;)(0,i.value)(e,t)}catch(e){s.e(e)}finally{s.f()}}}]),e}(),qb="$copy_autocapture";function Hb(e,t){return t.length>e?t.slice(0,e)+"...":t}var $b,Wb,Gb=function(){function e(t){Ng(this,e),Dg(this,"_initialized",!1),Dg(this,"_isDisabledServerSide",null),Dg(this,"rageclicks",new jb),Dg(this,"_elementsChainAsString",!1),this.instance=t}return Pg(e,[{key:"config",get:function(){var e,t=Wg(this.instance.config.autocapture)?this.instance.config.autocapture:{};return t.url_allowlist=null===(e=t.url_allowlist)||void 0===e?void 0:e.map((function(e){return new RegExp(e)})),t}},{key:"_addDomEventHandlers",value:function(){var e=this;if(this.isBrowserSupported()){if(tm&&am){var t=function(t){t=t||(null==tm?void 0:tm.event);try{e._captureEvent(t)}catch(e){gm.error("Failed to capture event",e)}},n=function(t){t=t||(null==tm?void 0:tm.event),e._captureEvent(t,qb)};Im(am,"submit",t,!1,!0),Im(am,"change",t,!1,!0),Im(am,"click",t,!1,!0),this.config.capture_copied_text&&(Im(am,"copy",n,!1,!0),Im(am,"cut",n,!1,!0))}}else gm.info("Disabling Automatic Event Collection because this browser is not supported")}},{key:"startIfEnabled",value:function(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}},{key:"afterDecideResponse",value:function(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register(Dg({},Dm,!!e.autocapture_opt_out)),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}},{key:"isEnabled",get:function(){var e,t,n=null===(e=this.instance.persistence)||void 0===e?void 0:e.props[Dm],r=this._isDisabledServerSide;if(Yg(r)&&!Zg(n)&&!this.instance.config.advanced_disable_decide)return!1;var i=null!==(t=this._isDisabledServerSide)&&void 0!==t?t:!!n;return!!this.instance.config.autocapture&&!i}},{key:"_previousElementSibling",value:function(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do{t=t.previousSibling}while(t&&!My(t));return t}},{key:"_getAugmentPropertiesFromElement",value:function(e){if(!$y(e))return{};var t={};return _m(e.attributes,(function(e){if(e.name&&0===e.name.indexOf("data-ph-capture-attribute")){var n=e.name.replace("data-ph-capture-attribute-",""),r=e.value;n&&r&&Zy(r)&&(t[n]=r)}})),t}},{key:"_getPropertiesFromElement",value:function(e,t,n){var r,i=e.tagName.toLowerCase(),s={tag_name:i};Vy.indexOf(i)>-1&&!n&&("a"===i.toLowerCase()||"button"===i.toLowerCase()?s.$el_text=Hb(1024,e_(e)):s.$el_text=Hb(1024,jy(e)));var o=Fy(e);o.length>0&&(s.classes=o.filter((function(e){return""!==e})));var a=null===(r=this.config)||void 0===r?void 0:r.element_attribute_ignorelist;_m(e.attributes,(function(n){var r;if((!Wy(e)||-1!==["name","id","class","aria-label"].indexOf(n.name))&&(null==a||!a.includes(n.name))&&!t&&Zy(n.value)&&(r=n.name,!Qg(r)||"_ngcontent"!==r.substring(0,10)&&"_nghost"!==r.substring(0,7))){var i=n.value;"class"===n.name&&(i=Oy(i).join(" ")),s["attr__"+n.name]=Hb(1024,i)}}));for(var l=1,u=1,c=e;c=this._previousElementSibling(c);)l++,c.tagName===e.tagName&&u++;return s.nth_child=l,s.nth_of_type=u,s}},{key:"_getDefaultProperties",value:function(e){return{$event_type:e,$ce_version:1}}},{key:"_getEventTarget",value:function(e){return Kg(e.target)?e.srcElement||null:null!==(t=e.target)&&void 0!==t&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}},{key:"_captureEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$autocapture";if(this.isEnabled){var r,i=this._getEventTarget(e);zy(i)&&(i=i.parentNode||null),"$autocapture"===n&&"click"===e.type&&e instanceof MouseEvent&&this.instance.config.rageclick&&null!==(r=this.rageclicks)&&void 0!==r&&r.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._captureEvent(e,"$rageclick");var s=n===qb;if(i&&Hy(i,e,this.config,s,s?["copy","cut"]:void 0)){for(var o,a,l=[i],u=i;u.parentNode&&!Uy(u,"body");)By(u.parentNode)?(l.push(u.parentNode.host),u=u.parentNode.host):(l.push(u.parentNode),u=u.parentNode);var c,h=[],d={},f=!1;if(_m(l,(function(e){var n=$y(e);"a"===e.tagName.toLowerCase()&&(c=e.getAttribute("href"),c=n&&Zy(c)&&c),wm(Fy(e),"ph-no-capture")&&(f=!0),h.push(t._getPropertiesFromElement(e,t.instance.config.mask_all_element_attributes,t.instance.config.mask_all_text));var r=t._getAugmentPropertiesFromElement(e);bm(d,r)})),this.instance.config.mask_all_text||("a"===i.tagName.toLowerCase()||"button"===i.tagName.toLowerCase()?h[0].$el_text=e_(i):h[0].$el_text=jy(i)),c&&(h[0].attr__href=c),f)return!1;var p=bm(this._getDefaultProperties(e.type),this._elementsChainAsString?{$elements_chain:n_(h)}:{$elements:h},null!==(o=h[0])&&void 0!==o&&o.$el_text?{$el_text:null===(a=h[0])||void 0===a?void 0:a.$el_text}:{},d);if(n===qb){var g,m=Ly(null==tm||null===(g=tm.getSelection())||void 0===g?void 0:g.toString()),v=e.type||"clipboard";if(!m)return!1;p.$selected_content=m,p.$copy_type=v}return this.instance.capture(n,p),!0}}}},{key:"isBrowserSupported",value:function(){return $g(null==am?void 0:am.querySelectorAll)}}]),e}(),Kb={},Qb=function(){},Yb="posthog",Xb=!mb&&-1===(null==dm?void 0:dm.indexOf("MSIE"))&&-1===(null==dm?void 0:dm.indexOf("Mozilla")),Jb=function(){var e,t,n;return{api_host:"https://us.i.posthog.com",api_transport:"XHR",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(t=null==am?void 0:am.location,n=null==t?void 0:t.hostname,!!Qg(n)&&"herokuapp.com"!==n.split(".").slice(-2).join(".")),persistence:"localStorage+cookie",persistence_name:"",loaded:Qb,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:!0,debug:lm&&Qg(null==lm?void 0:lm.search)&&-1!==lm.search.indexOf("__posthog_debug=true")||!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_surveys:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==tm||null===(e=tm.location)||void 0===e?void 0:e.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:function(e){var t="Bad HTTP status: "+e.statusCode+" "+e.text;gm.error(t)},get_device_id:function(e){return e},_onCapture:Qb,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"always"}},Zb=function(e){var t={};Kg(e.process_person)||(t.person_profiles=e.process_person),Kg(e.xhr_headers)||(t.request_headers=e.xhr_headers),Kg(e.cookie_name)||(t.persistence_name=e.cookie_name),Kg(e.disable_cookie)||(t.disable_persistence=e.disable_cookie);var n=bm({},t,e);return Hg(e.property_blacklist)&&(Kg(e.property_denylist)?n.property_denylist=e.property_blacklist:Hg(e.property_denylist)?n.property_denylist=[].concat(Fg(e.property_blacklist),Fg(e.property_denylist)):gm.error("Invalid value for property_denylist config: "+e.property_denylist)),n},ew=function(){function e(){Ng(this,e),Dg(this,"__forceAllowLocalhost",!1)}return Pg(e,[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(e){gm.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}]),e}(),tw=function(){function e(){var t=this;Ng(this,e),Dg(this,"webPerformance",new ew),Dg(this,"_debugEventEmitter",new Vb),this.config=Jb(),this.decideEndpointWasHit=!1,this.SentryIntegration=Tb,this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.featureFlags=new ov(this),this.toolbar=new D_(this),this.scrollManager=new Bb(this),this.pageViewManager=new Ib(this),this.surveys=new Rb(this),this.rateLimiter=new Pb(this),this.requestRouter=new Cb(this),this.people={set:function(e,n,r){var i=Qg(e)?Dg({},e,n):e;t.setPersonProperties(i),null==r||r({})},set_once:function(e,n,r){var i=Qg(e)?Dg({},e,n):e;t.setPersonProperties(void 0,i),null==r||r({})}},this.on("eventCaptured",(function(e){return gm.info("send",e)}))}return Pg(e,[{key:"init",value:function(t,n,r){if(r&&r!==Yb){var i,s=null!==(i=Kb[r])&&void 0!==i?i:new e;return s._init(t,n,r),Kb[r]=s,Kb[Yb][r]=s,s}return this._init(t,n,r)}},{key:"_init",value:function(e){var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;if(Kg(e)||function(e){return Qg(e)&&0===e.trim().length}(e))return gm.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return gm.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;if(this.__loaded=!0,this.config={},this._triggered_notifs=[],this.set_config(bm({},Jb(),Zb(i),{name:s,token:e})),this.compression=i.disable_compression?void 0:Tm.Base64,this.persistence=new Ay(this.config),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new Ay(Ig(Ig({},this.config),{},{persistence:"sessionStorage"})),this._requestQueue=new O_((function(e){return r._send_request(e)})),this._retryQueue=new kb(this),this.__request_queue=[],this.sessionManager=new Eb(this.config,this.persistence),this.sessionPropsManager=new Ob(this.sessionManager,this.persistence),this.sessionRecording=new A_(this),this.sessionRecording.startIfEnabledOrStop(),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new Gb(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new zb(this),this.heatmaps.startIfEnabled(),Ug.DEBUG=Ug.DEBUG||this.config.debug,this._gdpr_init(),void 0!==(null===(t=i.bootstrap)||void 0===t?void 0:t.distinctID)){var o,a,l=this.config.get_device_id(fv()),u=null!==(o=i.bootstrap)&&void 0!==o&&o.isIdentifiedID?l:i.bootstrap.distinctID;this.persistence.set_property(Qm,null!==(a=i.bootstrap)&&void 0!==a&&a.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:i.bootstrap.distinctID,$device_id:u})}if(this._hasBootstrappedFeatureFlags()){var c,h,d=Object.keys((null===(c=i.bootstrap)||void 0===c?void 0:c.featureFlags)||{}).filter((function(e){var t,n;return!(null===(t=i.bootstrap)||void 0===t||null===(n=t.featureFlags)||void 0===n||!n[e])})).reduce((function(e,t){var n,r;return e[t]=(null===(n=i.bootstrap)||void 0===n||null===(r=n.featureFlags)||void 0===r?void 0:r[t])||!1,e}),{}),f=Object.keys((null===(h=i.bootstrap)||void 0===h?void 0:h.featureFlagPayloads)||{}).filter((function(e){return d[e]})).reduce((function(e,t){var n,r,s,o;return null!==(n=i.bootstrap)&&void 0!==n&&null!==(r=n.featureFlagPayloads)&&void 0!==r&&r[t]&&(e[t]=null===(s=i.bootstrap)||void 0===s||null===(o=s.featureFlagPayloads)||void 0===o?void 0:o[t]),e}),{});this.featureFlags.receivedFeatureFlags({featureFlags:d,featureFlagPayloads:f})}if(!this.get_distinct_id()){var p=this.config.get_device_id(fv());this.register_once({distinct_id:p,$device_id:p},""),this.persistence.set_property(Qm,"anonymous")}return null==tm||null===(n=tm.addEventListener)||void 0===n||n.call(tm,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),this.toolbar.maybeLoadToolbar(),i.segment?function(e,t){var n=e.config.segment;if(!n)return t();!function(e,t){var n=e.config.segment;if(!n)return t();var r=function(n){var r=function(){return n.anonymousId()||fv()};e.config.get_device_id=r,n.id()&&(e.register({distinct_id:n.id(),$device_id:r()}),e.persistence.set_property(Qm,"identified")),t()},i=n.user();"then"in i&&$g(i.then)?i.then((function(e){return r(e)})):r(i)}(e,(function(){n.register(function(e){Promise&&Promise.resolve||gm.warn("This browser does not have Promise support, and can not use the segment integration");var t=function(t,n){var r;if(!n)return t;t.event.userId||t.event.anonymousId===e.get_distinct_id()||e.reset(),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(e.register({distinct_id:t.event.userId}),e.reloadFeatureFlags());var i=e._calculate_event_properties(n,null!==(r=t.event.properties)&&void 0!==r?r:{});return t.event.properties=Object.assign({},i,t.event.properties),t};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(e){return t(e,e.event.event)},page:function(e){return t(e,"$pageview")},identify:function(e){return t(e,"$identify")},screen:function(e){return t(e,"$screen")}}}(e)).then((function(){t()}))}))}(this,(function(){return r._loaded()})):this._loaded(),$g(this.config._onCapture)&&this.on("eventCaptured",(function(e){return r.config._onCapture(e.event,e)})),this}},{key:"_afterDecideResponse",value:function(e){var t,n,r,i,s;this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=wm(e.supportedCompression,Tm.GZipJS)?Tm.GZipJS:wm(e.supportedCompression,Tm.Base64)?Tm.Base64:void 0),null!==(t=e.analytics)&&void 0!==t&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),null===(n=this.sessionRecording)||void 0===n||n.afterDecideResponse(e),null===(r=this.autocapture)||void 0===r||r.afterDecideResponse(e),null===(i=this.heatmaps)||void 0===i||i.afterDecideResponse(e),null===(s=this.surveys)||void 0===s||s.afterDecideResponse(e)}},{key:"_loaded",value:function(){var e=this,t=this.config.advanced_disable_decide;t||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(e){gm.critical("`loaded` function failed",e)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout((function(){am&&e.capture("$pageview",{title:am.title},{send_instantly:!0})}),1),t||(new N_(this).call(),this.featureFlags.resetRequestQueue())}},{key:"_start_queue_if_opted_in",value:function(){var e;this.has_opted_out_capturing()||this.config.request_batching&&(null===(e=this._requestQueue)||void 0===e||e.enable())}},{key:"_dom_loaded",value:function(){var e=this;this.has_opted_out_capturing()||ym(this.__request_queue,(function(t){return e._send_retriable_request(t)})),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_handle_unload",value:function(){var e,t;this.config.request_batching?(this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave"),null===(e=this._requestQueue)||void 0===e||e.unload(),null===(t=this._retryQueue)||void 0===t||t.unload()):this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_send_request",value:function(e){var t=this;this.__loaded&&(Xb?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=yb(e.url,{ip:this.config.ip?1:0}),e.headers=this.config.request_headers,e.compression="best-available"===e.compression?this.compression:e.compression,function(e){var t=Ig({},e);t.timeout=t.timeout||6e4,t.url=yb(t.url,{_:(new Date).getTime().toString(),ver:Ug.LIB_VERSION,compression:t.compression}),"sendBeacon"===t.transport&&null!=om&&om.sendBeacon?function(e){var t=yb(e.url,{beacon:"1"});try{var n,r=null!==(n=bb(e))&&void 0!==n?n:{},i=r.contentType,s=r.body,o="string"==typeof s?new Blob([s],{type:i}):s;om.sendBeacon(t,o)}catch(e){}}(t):"fetch"===t.transport&&um?function(e){var t,n,r=null!==(t=bb(e))&&void 0!==t?t:{},i=r.contentType,s=r.body,o=new Headers;_m(o,(function(e,t){o.append(t,e)})),i&&o.append("Content-Type",i);var a=e.url,l=null;if(hm){var u=new hm;l={signal:u.signal,timeout:setTimeout((function(){return u.abort()}),e.timeout)}}um(a,{method:(null==e?void 0:e.method)||"GET",headers:o,keepalive:"POST"===e.method,body:s,signal:null===(n=l)||void 0===n?void 0:n.signal}).then((function(t){return t.text().then((function(n){var r,i={statusCode:t.status,text:n};if(200===t.status)try{i.json=JSON.parse(n)}catch(e){gm.error(e)}null===(r=e.callback)||void 0===r||r.call(e,i)}))})).catch((function(t){var n;gm.error(t),null===(n=e.callback)||void 0===n||n.call(e,{statusCode:0,text:t})})).finally((function(){return l?clearTimeout(l.timeout):null}))}(t):cm||!am?function(e){var t,n=new cm;n.open(e.method||"GET",e.url,!0);var r=null!==(t=bb(e))&&void 0!==t?t:{},i=r.contentType,s=r.body;_m(e.headers,(function(e,t){n.setRequestHeader(t,e)})),i&&n.setRequestHeader("Content-Type",i),e.timeout&&(n.timeout=e.timeout),n.withCredentials=!0,n.onreadystatechange=function(){if(4===n.readyState){var t,r={statusCode:n.status,text:n.responseText};if(200===n.status)try{r.json=JSON.parse(n.responseText)}catch(e){}null===(t=e.callback)||void 0===t||t.call(e,r)}},n.send(s)}(t):function(e){var t;if(am){var n=am.createElement("script");n.type="text/javascript",n.async=!0,n.defer=!0,n.src=e.url;var r=am.getElementsByTagName("script")[0];null===(t=r.parentNode)||void 0===t||t.insertBefore(n,r)}}(t)}(Ig(Ig({},e),{},{callback:function(n){var r,i,s;t.rateLimiter.checkForLimiting(n),n.statusCode>=400&&(null===(i=(s=t.config).on_request_error)||void 0===i||i.call(s,n)),null===(r=e.callback)||void 0===r||r.call(e,n)}}))))}},{key:"_send_retriable_request",value:function(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}},{key:"_execute_array",value:function(e){var t,n=this,r=[],i=[],s=[];ym(e,(function(e){e&&(t=e[0],Hg(t)?s.push(e):$g(e)?e.call(n):Hg(e)&&"alias"===t?r.push(e):Hg(e)&&-1!==t.indexOf("capture")&&$g(n[t])?s.push(e):i.push(e))}));var o=function(e,t){ym(e,(function(e){if(Hg(e[0])){var n=t;_m(e,(function(e){n=n[e[0]].apply(n,e.slice(1))}))}else this[e[0]].apply(this,e.slice(1))}),t)};o(r,this),o(i,this),o(s,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var e,t;return(null===(e=this.config.bootstrap)||void 0===e?void 0:e.featureFlags)&&Object.keys(null===(t=this.config.bootstrap)||void 0===t?void 0:t.featureFlags).length>0||!1}},{key:"push",value:function(e){this._execute_array([e])}},{key:"capture",value:function(e,t,n){var r;if(!(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue))return gm.uninitializedWarning("posthog.capture");if(!k_(this))if(!Kg(e)&&Qg(e)){if(!dm||this.config.opt_out_useragent_filter||!Lb(dm,this.config.custom_blocked_useragents)){var i=null!=n&&n.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==i||!i.isRateLimited){this.sessionPersistence.update_search_keyword(),this.config.store_google&&(this.sessionPersistence.update_campaign_params(),this.persistence.set_initial_campaign_params()),this.config.save_referrer&&(this.sessionPersistence.update_referrer_info(),this.persistence.set_initial_referrer_info());var s={uuid:fv(),event:e,properties:this._calculate_event_properties(e,t||{})};if(null==n||!n._noHeatmaps){var o,a=null===(o=this.heatmaps)||void 0===o?void 0:o.getAndClearBuffer();a&&(s.properties.$heatmap_data=a)}i&&(s.properties.$lib_rate_limit_remaining_tokens=i.remainingTokens),(null==n?void 0:n.$set)&&(s.$set=null==n?void 0:n.$set);var l=this._calculate_set_once_properties(null==n?void 0:n.$set_once);l&&(s.$set_once=l),(s=function(e,t){return n=e,r=function(e){return Qg(e)&&!Yg(t)?e.slice(0,t):e},i=new Set,function e(t,n){return t!==Object(t)?r?r(t):t:i.has(t)?void 0:(i.add(t),Hg(t)?(s=[],ym(t,(function(t){s.push(e(t))}))):(s={},_m(t,(function(t,n){i.has(t)||(s[n]=e(t,n))}))),s);var s}(n);var n,r,i}(s,null!=n&&n._noTruncate?null:this.config.properties_string_max_length)).timestamp=(null==n?void 0:n.timestamp)||new Date,Kg(null==n?void 0:n.timestamp)||(s.properties.$event_time_override_provided=!0,s.properties.$event_time_override_system_time=new Date);var u=Ig(Ig({},s.properties.$set),s.$set);Gg(u)||this.setPersonPropertiesForFlags(u),this._debugEventEmitter.emit("eventCaptured",s);var c={method:"POST",url:null!==(r=null==n?void 0:n._url)&&void 0!==r?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:s,compression:"best-available",batchKey:null==n?void 0:n._batchKey};return!this.config.request_batching||n&&(null==n||!n._batchKey)||null!=n&&n.send_instantly?this._send_retriable_request(c):this._requestQueue.enqueue(c),s}gm.critical("This capture call is ignored due to client rate limiting.")}}else gm.error("No event name provided to posthog.capture")}},{key:"_addCaptureHook",value:function(e){this.on("eventCaptured",(function(t){return e(t.event)}))}},{key:"_calculate_event_properties",value:function(e,t){if(!this.persistence||!this.sessionPersistence)return t;var n=this.persistence.remove_event_timer(e),r=Ig({},t);if(r.token=this.config.token,"$snapshot"===e){var i=Ig(Ig({},this.persistence.properties()),this.sessionPersistence.properties());return r.distinct_id=i.distinct_id,r}var s=Ty.properties();if(this.sessionManager){var o=this.sessionManager.checkAndGetSessionAndWindowId(),a=o.sessionId,l=o.windowId;r.$session_id=a,r.$window_id=l}if(this.requestRouter.region===gb.CUSTOM&&(r.$lib_custom_api_host=this.config.api_host),this.sessionPropsManager&&this.config.__preview_send_client_session_params&&("$pageview"===e||"$pageleave"===e||"$autocapture"===e)){var u=this.sessionPropsManager.getSessionProps();r=bm(r,u)}if(!this.config.disable_scroll_properties){var c={};"$pageview"===e?c=this.pageViewManager.doPageView():"$pageleave"===e&&(c=this.pageViewManager.doPageLeave()),r=bm(r,c)}if("$pageview"===e&&am&&(r.title=am.title),!Kg(n)){var h=(new Date).getTime()-n;r.$duration=parseFloat((h/1e3).toFixed(3))}dm&&this.config.opt_out_useragent_filter&&(r.$browser_type=Lb(dm,this.config.custom_blocked_useragents)?"bot":"browser"),(r=bm({},s,this.persistence.properties(),this.sessionPersistence.properties(),r)).$is_identified=this._isIdentified(),Hg(this.config.property_denylist)?_m(this.config.property_denylist,(function(e){delete r[e]})):gm.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var d=this.config.sanitize_properties;return d&&(r=d(r,e)),r.$process_person_profile=this._hasPersonProcessing(),r}},{key:"_calculate_set_once_properties",value:function(e){if(!this.persistence||!this._hasPersonProcessing())return e;var t=bm({},this.persistence.get_initial_props(),e||{});return Gg(t)?void 0:t}},{key:"register",value:function(e,t){var n;null===(n=this.persistence)||void 0===n||n.register(e,t)}},{key:"register_once",value:function(e,t,n){var r;null===(r=this.persistence)||void 0===r||r.register_once(e,t,n)}},{key:"register_for_session",value:function(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.register(e)}},{key:"unregister",value:function(e){var t;null===(t=this.persistence)||void 0===t||t.unregister(e)}},{key:"unregister_for_session",value:function(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.unregister(e)}},{key:"_register_single",value:function(e,t){this.register(Dg({},e,t))}},{key:"getFeatureFlag",value:function(e,t){return this.featureFlags.getFeatureFlag(e,t)}},{key:"getFeatureFlagPayload",value:function(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(e){return t}}},{key:"isFeatureEnabled",value:function(e,t){return this.featureFlags.isFeatureEnabled(e,t)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,t){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t)}},{key:"getEarlyAccessFeatures",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,t)}},{key:"on",value:function(e,t){return this._debugEventEmitter.on(e,t)}},{key:"onFeatureFlags",value:function(e){return this.featureFlags.onFeatureFlags(e)}},{key:"onSessionId",value:function(e){var t,n;return null!==(t=null===(n=this.sessionManager)||void 0===n?void 0:n.onSessionId(e))&&void 0!==t?t:function(){}}},{key:"getSurveys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getSurveys(e,t)}},{key:"getActiveMatchingSurveys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getActiveMatchingSurveys(e,t)}},{key:"identify",value:function(e,t,n){if(!this.__loaded||!this.persistence)return gm.uninitializedWarning("posthog.identify");if(Jg(e)&&(e=e.toString(),gm.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e){if(["distinct_id","distinctid"].includes(e.toLowerCase()))gm.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else if(this._requirePersonProcessing("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var i=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:i},"")}e!==r&&e!==this.get_property(Rm)&&(this.unregister(Rm),this.register({distinct_id:e}));var s="anonymous"===(this.persistence.get_property(Qm)||"anonymous");e!==r&&s?(this.persistence.set_property(Qm,"identified"),this.setPersonPropertiesForFlags(t||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:t||{},$set_once:n||{}}),this.featureFlags.setAnonymousDistinctId(r)):(t||n)&&this.setPersonProperties(t,n),e!==r&&(this.reloadFeatureFlags(),this.unregister(Km))}}else gm.error("Unique user id has not been set in posthog.identify")}},{key:"setPersonProperties",value:function(e,t){(e||t)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:t||{}}))}},{key:"group",value:function(e,t,n){if(e&&t){if(this._requirePersonProcessing("posthog.group")){var r=this.getGroups();r[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:Ig(Ig({},r),{},Dg({},e,t))}),n&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:n}),this.setGroupPropertiesForFlags(Dg({},e,n))),r[e]===t||n||this.reloadFeatureFlags()}}else gm.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._requirePersonProcessing("posthog.setPersonPropertiesForFlags")&&this.featureFlags.setPersonPropertiesForFlags(e,t)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}},{key:"resetGroupPropertiesForFlags",value:function(e){this.featureFlags.resetGroupPropertiesForFlags(e)}},{key:"reset",value:function(e){var t,n,r,i;if(!this.__loaded)return gm.uninitializedWarning("posthog.reset");var s=this.get_property("$device_id");null===(t=this.persistence)||void 0===t||t.clear(),null===(n=this.sessionPersistence)||void 0===n||n.clear(),null===(r=this.persistence)||void 0===r||r.set_property(Qm,"anonymous"),null===(i=this.sessionManager)||void 0===i||i.resetSessionId();var o=this.config.get_device_id(fv());this.register_once({distinct_id:o,$device_id:e?o:s},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){var e,t;return null!==(e=null===(t=this.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==e?e:""}},{key:"get_session_replay_url",value:function(e){if(!this.sessionManager)return"";var t=this.sessionManager.checkAndGetSessionAndWindowId(!0),n=t.sessionId,r=t.sessionStartTimestamp,i=this.requestRouter.endpointFor("ui","/project/".concat(this.config.token,"/replay/").concat(n));if(null!=e&&e.withTimestamp&&r){var s,o=null!==(s=e.timestampLookBack)&&void 0!==s?s:10;if(!r)return i;var a=Math.max(Math.floor(((new Date).getTime()-r)/1e3)-o,0);i+="?t=".concat(a)}return i}},{key:"alias",value:function(e,t){return e===this.get_property(Nm)?(gm.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(Kg(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(Rm,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(gm.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}},{key:"set_config",value:function(e){var t,n,r,i,s=Ig({},this.config);Wg(e)&&(bm(this.config,Zb(e)),null===(t=this.persistence)||void 0===t||t.update_config(this.config,s),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new Ay(Ig(Ig({},this.config),{},{persistence:"sessionStorage"})),bv.is_supported()&&"true"===bv.get("ph_debug")&&(this.config.debug=!0),this.config.debug&&(Ug.DEBUG=!0),null===(n=this.sessionRecording)||void 0===n||n.startIfEnabledOrStop(),null===(r=this.autocapture)||void 0===r||r.startIfEnabled(),null===(i=this.heatmaps)||void 0===i||i.startIfEnabled(),this.surveys.loadIfEnabled())}},{key:"startSessionRecording",value:function(e){if(null!=e&&e.sampling){var t,n,r=null===(t=this.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId();null===(n=this.persistence)||void 0===n||n.register(Dg({},Vm,!0)),gm.info("Session recording started with sampling override for session: ",null==r?void 0:r.sessionId)}this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var e;return!(null===(e=this.sessionRecording)||void 0===e||!e.started)}},{key:"loadToolbar",value:function(e){return this.toolbar.loadToolbar(e)}},{key:"get_property",value:function(e){var t;return null===(t=this.persistence)||void 0===t?void 0:t.props[e]}},{key:"getSessionProperty",value:function(e){var t;return null===(t=this.sessionPersistence)||void 0===t?void 0:t.props[e]}},{key:"toString",value:function(){var e,t=null!==(e=this.config.name)&&void 0!==e?e:Yb;return t!==Yb&&(t=Yb+"."+t),t}},{key:"_isIdentified",value:function(){var e,t;return"identified"===(null===(e=this.persistence)||void 0===e?void 0:e.get_property(Qm))||"identified"===(null===(t=this.sessionPersistence)||void 0===t?void 0:t.get_property(Qm))}},{key:"_hasPersonProcessing",value:function(){var e,t,n,r;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&Gg(this.getGroups())&&(null===(e=this.persistence)||void 0===e||null===(t=e.props)||void 0===t||!t[Rm])&&(null===(n=this.persistence)||void 0===n||null===(r=n.props)||void 0===r||!r[ev]))}},{key:"_requirePersonProcessing",value:function(e){return"never"===this.config.person_profiles?(gm.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(ev,!0),!0)}},{key:"_gdpr_init",value:function(){"localStorage"===this.config.opt_out_capturing_persistence_type&&bv.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_capturing()||!this.config.opt_out_capturing_by_default&&!yv.get("ph_optout")||(yv.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.config.opt_out_persistence_by_default}))}},{key:"_gdpr_update_persistence",value:function(e){var t,n,r,i,s;if(e&&e.clear_persistence)r=!0;else{if(!e||!e.enable_persistence)return;r=!1}this.config.disable_persistence||(null===(t=this.persistence)||void 0===t?void 0:t.disabled)===r||null===(i=this.persistence)||void 0===i||i.set_disabled(r),this.config.disable_persistence||(null===(n=this.sessionPersistence)||void 0===n?void 0:n.disabled)===r||null===(s=this.sessionPersistence)||void 0===s||s.set_disabled(r)}},{key:"_gdpr_call_func",value:function(e,t){return t=bm({capture:this.capture.bind(this),persistence_type:this.config.opt_out_capturing_persistence_type,cookie_prefix:this.config.opt_out_capturing_cookie_prefix,cookie_expiration:this.config.cookie_expiration,cross_subdomain_cookie:this.config.cross_subdomain_cookie,secure_cookie:this.config.secure_cookie},t||{}),bv.is_supported()||"localStorage"!==t.persistence_type||(t.persistence_type="cookie"),e(this.config.token,{capture:t.capture,captureEventName:t.capture_event_name,captureProperties:t.capture_properties,persistenceType:t.persistence_type,persistencePrefix:t.cookie_prefix,cookieExpiration:t.cookie_expiration,crossSubdomainCookie:t.cross_subdomain_cookie,secureCookie:t.secure_cookie})}},{key:"opt_in_capturing",value:function(e){e=bm({enable_persistence:!0},e||{}),this._gdpr_call_func(f_,e),this._gdpr_update_persistence(e)}},{key:"opt_out_capturing",value:function(e){var t=bm({clear_persistence:!0},e||{});this._gdpr_call_func(p_,t),this._gdpr_update_persistence(t)}},{key:"has_opted_in_capturing",value:function(e){return this._gdpr_call_func(g_,e)}},{key:"has_opted_out_capturing",value:function(e){return this._gdpr_call_func(m_,e)}},{key:"clear_opt_in_out_capturing",value:function(e){var t=bm({enable_persistence:!0},null!=e?e:{});this._gdpr_call_func(v_,t),this._gdpr_update_persistence(t)}},{key:"debug",value:function(e){!1===e?(null==tm||tm.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==tm||tm.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),e}();!function(e,t){for(var n=0;n<t.length;n++)e.prototype[t[n]]=xm(e.prototype[t[n]])}(tw,["identify"]),function(e){e.Popover="popover",e.API="api",e.Widget="widget"}($b||($b={})),function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}(Wb||(Wb={}));var nw,rw=(nw=Kb[Yb]=new tw,function(){function e(){e.done||(e.done=!0,Xb=!1,_m(Kb,(function(e){e._dom_loaded()})))}null!=am&&am.addEventListener&&("complete"===am.readyState?e():am.addEventListener("DOMContentLoaded",e,!1)),tm&&Im(tm,"load",e,!0)}(),nw);rw.init("phc_pYiz1K4qlGNQD0HUMYzAwTQy2H67FhJvNJj3j4JtGw5",{api_host:"https://us.i.posthog.com"});const iw=function(){return(0,t.useEffect)((()=>{Bp()}),[]),(0,qp.jsx)(ig,{children:(0,qp.jsx)(Kp,{children:(0,qp.jsx)(we,{children:(0,qp.jsxs)(ge,{children:[(0,qp.jsx)(fe,{path:"/",element:(0,qp.jsxs)("div",{style:{backgroundImage:'url("bgimg.png")',backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center top",height:"100vh",color:"#61685f"},className:"homePageContainer",children:[(0,qp.jsxs)("div",{className:"title",children:[(0,qp.jsxs)("h1",{children:[(0,qp.jsx)("img",{src:"/logo.png",className:"logo",alt:"A logo of a leaf inside a drop"})," Skincremental"]}),(0,qp.jsx)("h4",{children:"Revolutionizing Skincare, One Batch at a Time!"})]}),(0,qp.jsx)(Ee,{to:"/product",children:(0,qp.jsxs)("button",{className:"startbutton",children:["Design Custom ",(0,qp.jsx)("br",{})," Skincare Recipe"]})}),(0,qp.jsxs)("div",{className:"homepageText",children:[(0,qp.jsxs)("p",{children:[(0,qp.jsx)("strong",{children:"Tailored to You, Evolving with You:"})," ",(0,qp.jsx)("br",{})," Small batch custom-crafted skincare that adapts to your unique needs, lifestyle, and environmental changes."]}),(0,qp.jsxs)("p",{children:[(0,qp.jsx)("strong",{children:"Double the Discovery, Double the Impact:"})," ",(0,qp.jsx)("br",{})," Embark on a skincare adventure with every order as you try two variations of your custom formulation. Use, assess, and let us know your favorite. Our AI assistant will refine your choice into two new exploratory batches for your next order. Your skincare journey is an ongoing adventure of discovery and optimization."]}),(0,qp.jsxs)("p",{children:[(0,qp.jsx)("strong",{children:"Tired of skincare cluttered with unnecessary preservatives, stabilizers and cheap synthetic fillers?"})," We are too! Our mission is to provide you with skincare essentials free from the non-beneficial ingredients that are only added so it can sit in a warehouse for a year before it reaches you.  Our commitment to using only deeply nourishing ingredients means your skin receives only the best."]}),(0,qp.jsxs)("p",{children:[(0,qp.jsx)("strong",{children:"Knowledge is Power, Especially for Your Skin:"}),"  Dive into the world of ingredients without the complexity. As you customize your formulation, we'll guide you through each ingredient's purpose. Say goodbye to mystery chemicals and hello to informed skincare choices."]}),(0,qp.jsxs)("p",{children:[(0,qp.jsx)("strong",{children:"Empowered by AI:"}),"  Say hello to your new skincare partner, our AI-powered formulation assistant. It's not just about the initial match but how your skincare evolves with you, ensuring you always have the best for your skin."]}),(0,qp.jsxs)("p",{children:[(0,qp.jsx)("strong",{children:"Natural Preservation, Naturally Better:"})," Delivering small batches within days of mixing means minimal need for preservatives. When needed, we opt for natural, plant-based options. Healthier for your skin, gentler on the planet."]}),(0,qp.jsxs)("p",{children:[(0,qp.jsx)("strong",{children:"Adapt with the Seasons:"})," As the seasons change, so should your skincare. We fine-tune your formulation to adapt to seasonal shifts, ensuring your skin always gets what it needs, when it needs it."]}),(0,qp.jsxs)("p",{children:[(0,qp.jsx)("strong",{children:"Craft, Share, Earn:"})," Ready to be a skincare trendsetter? Create and perfect your unique formulation, then share it with the world. Every time someone chooses your creation, you can earn rewards or support a cause close to your heart. Empower your skin and your community!"]}),(0,qp.jsxs)("p",{children:[(0,qp.jsx)("strong",{children:"Conscious, Clean, and Community-Driven:"})," We're not just about great skincare; we're about a healthier planet. Our packaging? Recycled, sterilized, and reused for future orders. Our ingredients? We strive to source from local Pacific Northwest small and family-owned businesses whenever possible. For each jar you return for recycling, we\u2019ll donate $1 to a local charity."]}),(0,qp.jsxs)("p",{children:[(0,qp.jsx)("strong",{children:"Join the Skincremental Revolution:"})," Where skincare is more than a routine \u2013 it's a dynamic, personalized journey. Be a part of a community that chooses sustainability, customization, and innovation."]})]}),(0,qp.jsx)(Ee,{to:"/product",children:(0,qp.jsx)("button",{className:"bottomstartbutton",children:"Begin Your Skincare Journey"})}),(0,qp.jsx)(Ee,{to:"/contact",children:(0,qp.jsx)("span",{children:"Contact us"})})]})}),(0,qp.jsx)(fe,{path:"/goals",element:(0,qp.jsx)(Yp,{})}),(0,qp.jsx)(fe,{path:"/product",element:(0,qp.jsx)(ng,{})}),(0,qp.jsx)(fe,{path:"/summary",element:(0,qp.jsx)(og,{})}),(0,qp.jsx)(fe,{path:"/recipe-builder",element:(0,qp.jsx)(ag,{})}),(0,qp.jsx)(fe,{path:"/finalize-recipe",element:(0,qp.jsx)(lg,{})}),(0,qp.jsx)(fe,{path:"/saved-recipe",element:(0,qp.jsx)(ug,{})}),(0,qp.jsx)(fe,{path:"/order-formulation",element:(0,qp.jsx)(cg,{})}),(0,qp.jsx)(fe,{path:"/order-success",element:(0,qp.jsx)(hg,{})}),(0,qp.jsx)(fe,{path:"/contact",element:(0,qp.jsx)(dg,{})}),(0,qp.jsx)(fe,{path:"/order-pricing",element:(0,qp.jsx)(fg,{})}),(0,qp.jsx)(fe,{path:"/variation-selection",element:(0,qp.jsx)(pg,{})}),(0,qp.jsx)(fe,{path:"/order-survey",element:(0,qp.jsx)(mg,{})}),(0,qp.jsx)(fe,{path:"/ingredients-table",element:(0,qp.jsx)(_g,{})}),(0,qp.jsx)(fe,{path:"/phase-selection",element:(0,qp.jsx)(xg,{})}),(0,qp.jsx)(fe,{path:"/phase-choices",element:(0,qp.jsx)(Cg,{})})]})})})})},sw=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,qp.jsx)(t.StrictMode,{children:(0,qp.jsx)(iw,{})})),sw()})()})();
//# sourceMappingURL=main.e9b7444e.js.map